<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Stack — Investment Thesis</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script>
// Auth gate — redirect to login if not authenticated
if (sessionStorage.getItem('deck_auth') !== '1' && window.location.hostname !== 'localhost' && window.location.protocol !== 'file:') {
  window.location.href = '/';
}
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --navy: #0d2137;
  --teal: #2a7a8c;
  --light-blue: #edf4f7;
  --gray: #5a6a78;
  --source-gray: #8a96a0;
  --white: #ffffff;
  --card-border: #2a7a8c;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  font-family: 'Inter', sans-serif;
  background: #000;
}

.presentation {
  width: 100%; height: 100%;
  position: relative;
}

.slide {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: var(--white);
  border-left: 4px solid var(--teal);
  padding: 52px 64px 36px 60px;
  display: none;
  flex-direction: column;
  opacity: 0;
  transition: opacity 0.4s ease;
  overflow: hidden;
}

.slide.active {
  display: flex;
  opacity: 1;
}

.slide.fade-in {
  display: flex;
  animation: fadeIn 0.4s ease forwards;
}

.slide.fade-out {
  display: flex;
  animation: fadeOut 0.4s ease forwards;
}

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

/* Typography */
h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--navy); }

.section-label {
  font-family: 'Inter', sans-serif;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  color: var(--teal);
  margin-bottom: 6px;
  flex-shrink: 0;
}

.slide-title {
  font-family: 'Playfair Display', serif;
  font-size: 34px;
  font-weight: 700;
  color: var(--navy);
  line-height: 1.2;
  margin-bottom: 10px;
  flex-shrink: 0;
}

.slide-subtitle {
  font-family: 'Inter', sans-serif;
  font-size: 16px;
  color: var(--gray);
  margin-bottom: 22px;
  line-height: 1.4;
  flex-shrink: 0;
}

.body-text {
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  color: var(--gray);
  line-height: 1.65;
  margin-bottom: 14px;
}

.source-line {
  font-family: 'Inter', sans-serif;
  font-size: 11px;
  color: var(--source-gray);
  margin-top: 6px;
  line-height: 1.4;
  flex-shrink: 0;
}

/* Cards */
.card {
  background: var(--light-blue);
  border-left: 4px solid var(--teal);
  border-radius: 4px;
  padding: 22px 26px;
  margin-bottom: 14px;
}

.card-label {
  font-family: 'Inter', sans-serif;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--teal);
  margin-bottom: 8px;
}

.card-text {
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  color: var(--gray);
  line-height: 1.6;
}

.card-row {
  display: flex;
  gap: 18px;
  margin-bottom: 14px;
}

.card-row > .card { flex: 1; }

/* Chart area — flexes to fill remaining slide space */
.chart-area {
  width: 100%;
  flex: 1 1 0;
  min-height: 0;
  max-height: 72vh;
  position: relative;
  margin-bottom: 8px;
  border-radius: 6px;
  overflow: hidden;
}

.chart-area canvas {
  width: 100% !important;
  height: 100% !important;
}

.chart-placeholder {
  width: 100%;
  flex: 1 1 0;
  min-height: 0;
  border: 2px dashed var(--teal);
  background: #f0f4f7;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
}

.chart-placeholder span {
  font-family: 'Inter', sans-serif;
  font-style: italic;
  font-size: 14px;
  color: var(--source-gray);
  text-align: center;
  padding: 20px;
}

/* Download button */
.chart-download-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 30px;
  height: 30px;
  background: rgba(255,255,255,0.85);
  border: 1px solid #cdd5db;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: var(--teal);
  z-index: 10;
  transition: background 0.2s;
}
.chart-download-btn:hover { background: var(--light-blue); }

/* Stat cards */
.stat-card {
  background: var(--light-blue);
  border-left: 4px solid var(--teal);
  border-radius: 4px;
  padding: 18px 22px;
  text-align: center;
  flex: 1;
}

.stat-number {
  font-family: 'Playfair Display', serif;
  font-size: 36px;
  font-weight: 700;
  color: var(--teal);
  margin-bottom: 4px;
}

.stat-label {
  font-family: 'Inter', sans-serif;
  font-size: 12px;
  color: var(--gray);
  line-height: 1.4;
}

/* Giant number */
.giant-number {
  font-family: 'Playfair Display', serif;
  font-size: 80px;
  font-weight: 900;
  color: var(--teal);
  margin-bottom: 8px;
  line-height: 1;
}

/* Scenario sliders */
.scenario-slider-group {
  display: flex;
  gap: 14px;
  margin: 10px 0 8px;
}
.scenario-slider {
  flex: 1;
  background: var(--light-blue);
  border-radius: 6px;
  padding: 12px 14px;
  text-align: center;
}
.scenario-slider label {
  display: block;
  font-family: 'Inter', sans-serif;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--teal);
  margin-bottom: 4px;
}
.scenario-slider .slider-value {
  font-family: 'Playfair Display', serif;
  font-size: 22px;
  font-weight: 700;
  color: var(--navy);
  margin-bottom: 6px;
}
.scenario-slider input[type="range"] {
  width: 100%;
  -webkit-appearance: none;
  height: 4px;
  background: var(--teal);
  border-radius: 2px;
  outline: none;
  opacity: 0.7;
  transition: opacity 0.2s;
}
.scenario-slider input[type="range"]:hover { opacity: 1; }
.scenario-slider input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--navy);
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

/* Section Divider */
.slide-divider {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
}

.divider-title {
  font-family: 'Playfair Display', serif;
  font-size: 52px;
  font-weight: 900;
  color: var(--navy);
  margin-bottom: 16px;
}

.divider-subtitle {
  font-family: 'Inter', sans-serif;
  font-size: 20px;
  color: var(--gray);
  font-weight: 300;
}

/* Title slide */
.title-slide {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
}

.title-main {
  font-family: 'Playfair Display', serif;
  font-size: 56px;
  font-weight: 900;
  color: var(--navy);
  letter-spacing: 4px;
  margin-bottom: 12px;
}

.title-underline {
  width: 120px;
  height: 4px;
  background: var(--teal);
  margin: 0 auto 24px auto;
  border-radius: 2px;
}

.title-sub1 {
  font-family: 'Inter', sans-serif;
  font-size: 22px;
  color: var(--gray);
  font-weight: 400;
  margin-bottom: 6px;
}

.title-sub2 {
  font-family: 'Inter', sans-serif;
  font-size: 17px;
  color: var(--source-gray);
  font-weight: 300;
  margin-bottom: 48px;
}

.title-confidential {
  font-family: 'Inter', sans-serif;
  font-size: 11px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--source-gray);
}

/* Horizontal rule */
.slide-hr {
  width: 100%;
  height: 1px;
  background: #d0d8de;
  margin: 16px 0;
  border: none;
}

/* Italic accent */
.italic-accent {
  font-style: italic;
  color: var(--teal);
}

/* Bold accent */
.bold-accent {
  font-weight: 700;
  color: var(--navy);
}

/* Small note */
.small-note {
  font-family: 'Inter', sans-serif;
  font-size: 11px;
  color: var(--source-gray);
  margin-top: 6px;
  line-height: 1.4;
}

/* Stat row labels */
.stat-row-label {
  font-family: 'Inter', sans-serif;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--teal);
  margin-bottom: 8px;
  margin-top: 8px;
}

/* Bullet list */
.bullet-list {
  list-style: none;
  padding: 0;
}
.bullet-list li {
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  color: var(--gray);
  line-height: 1.5;
  padding: 4px 0 4px 18px;
  position: relative;
}
.bullet-list li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 12px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--teal);
}

/* Controls */
.controls {
  position: fixed;
  bottom: 18px;
  right: 24px;
  display: flex;
  align-items: center;
  gap: 12px;
  z-index: 1000;
  font-family: 'Inter', sans-serif;
}

.slide-counter {
  font-size: 13px;
  color: var(--source-gray);
  background: rgba(255,255,255,0.9);
  padding: 4px 12px;
  border-radius: 4px;
  border: 1px solid #d0d8de;
}

.fs-btn {
  background: rgba(255,255,255,0.9);
  border: 1px solid #d0d8de;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
  font-size: 13px;
  color: var(--gray);
  font-family: 'Inter', sans-serif;
}
.fs-btn:hover { background: var(--light-blue); }

/* Section navigation */
.section-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  z-index: 999;
  padding: 6px 80px 6px 12px;
  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(8px);
  border-top: 1px solid rgba(0,0,0,0.06);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}
.section-nav:hover, .section-nav.visible {
  opacity: 1;
  pointer-events: all;
}
.section-nav-btn {
  font-family: 'Inter', sans-serif;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  color: var(--source-gray);
  background: none;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 3px;
  transition: all 0.2s;
  white-space: nowrap;
}
.section-nav-btn:hover {
  background: var(--light-blue);
  color: var(--navy);
}
.section-nav-btn.active-section {
  background: var(--navy);
  color: white;
}
.section-nav-sep {
  width: 1px;
  height: 14px;
  background: #d0d8de;
  margin: 0 2px;
}
.progress-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  height: 3px;
  background: var(--teal);
  z-index: 1001;
  transition: width 0.4s ease;
}

/* Scrollbar */
.slide::-webkit-scrollbar { width: 6px; }
.slide::-webkit-scrollbar-thumb { background: #c0cad2; border-radius: 3px; }
.slide::-webkit-scrollbar-track { background: transparent; }

/* Responsive tweaks for smaller screens */
@media (max-height: 800px) {
  .slide { padding: 32px 48px 32px 44px; }
  .slide-title { font-size: 26px; }
  .chart-area, .chart-placeholder { height: 320px; }
  .giant-number { font-size: 60px; }
  .divider-title { font-size: 42px; }
  .title-main { font-size: 44px; }
}
</style>
</head>
<body>

<div class="presentation" id="presentation">

<!-- ========== SLIDE 1: TITLE ========== -->
<div class="slide active" id="slide-1">
  <div class="title-slide">
    <div class="title-main">THE STACK</div>
    <div class="title-underline"></div>
    <div class="title-sub2">A long-term liquid portfolio collateralized with real estate</div>
    <div class="title-confidential">CONFIDENTIAL &middot; FEBRUARY 2026</div>
  </div>
</div>
<div class="slide" id="slide-2">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">Anchored in real assets. Driven by structural conviction.</div>
  <div class="slide-subtitle">Protected downside with uncapped upside</div>
  <div style="flex:1; min-height:0; display:flex; gap:40px;">
    <!-- Left: single card with everything -->
    <div class="card" style="flex:1; margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:36px 40px; align-self:center;">
      <div class="card-label" style="font-size:20px; margin-bottom:20px; letter-spacing:2.5px;">REAL ESTATE (~45%)</div>
      <div class="card-text" style="font-size:24px; line-height:1.85; margin-bottom:8px;">Triple-net commercial real estate with investment-grade tenants. Contractual USD cash flows with hard asset collateral.</div>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:6px 28px; font-size:19px; color:var(--navy); line-height:1.7; margin-bottom:28px;">
        <div><strong>Structure:</strong> 100% equity &rarr; 55% LTV refi</div>
        <div><strong>Tenants:</strong> AAA credit, NNN lease</div>
        <div><strong>Debt:</strong> 10yr term, 30yr amortization</div>
        <div><strong>NOI:</strong> Surplus &rarr; U.S. Treasuries</div>
      </div>
      <div style="border-top:1px solid rgba(42,122,140,0.15); padding-top:24px;">
        <div class="card-label" style="font-size:20px; margin-bottom:20px; color:#0d2137; letter-spacing:2.5px;">STRUCTURAL LONG PORTFOLIO (~55%)</div>
        <div class="card-text" style="font-size:24px; line-height:1.85; margin-bottom:8px;">Long-duration positions in commodities, infrastructure, real assets, and technology across secular macro themes.</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:6px 28px; font-size:19px; color:var(--navy); line-height:1.7;">
          <div><strong>Permitted:</strong> Equities, ETFs, commodities, FX, futures, options, crypto</div>
          <div><strong>Max Position:</strong> 10% of portfolio NAV</div>
          <div><strong>Prohibited:</strong> Margin, borrowing, shorts</div>
          <div><strong>Benchmark:</strong> S&P 500 Total Return</div>
        </div>
      </div>
    </div>
    <!-- Right: big donut chart -->
    <div style="flex:1; display:flex; align-items:center; justify-content:center;">
      <canvas id="chart-capital-split" style="max-width:480px; max-height:480px;"></canvas>
    </div>
  </div>
  <div class="source-line">Source: Internal fund construction model (target allocation and constraints), Feb 2026</div>
</div>

<div class="slide" id="slide-3">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">How capital flows through the structure</div>
  <div class="slide-subtitle">100% equity acquisition &rarr; 55% LTV cash-out refinance &rarr; structural long portfolio</div>
  <div class="chart-area"><canvas id="chart-capital-waterfall"></canvas></div>
  <div class="source-line">Illustrative deployment &middot; $20M LP capital &middot; Upfront costs include formation, acquisition, and origination fees</div>
</div>

<div class="slide" id="slide-4">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">Illustrative NNN lease opportunities</div>
  <div class="slide-subtitle">The types of properties we target &mdash; investment-grade tenants, absolute NNN structure, long-duration cash flows</div>
  <div style="flex:1; display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; margin-top:8px; min-height:0;">
    <!-- Property 1: Chase Bank & Chipotle -->
    <div style="background:var(--light-blue); border-radius:6px; display:flex; flex-direction:column; overflow:hidden; border:1px solid rgba(42,122,140,0.15);">
      <div style="position:relative; height:200px; overflow:hidden;">
        <img src="assets/triple-net/chase_chipotle.jpeg" style="width:100%; height:100%; object-fit:cover; object-position:center 18%;" alt="Chase Bank & Chipotle NNN Property">
        <div style="position:absolute; bottom:0; left:0; right:0; background:linear-gradient(transparent, rgba(13,33,55,0.9)); padding:10px 18px 12px;">
          <div style="font-family:'Inter',sans-serif; font-size:10px; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:rgba(255,255,255,0.7); margin-bottom:2px;">RETAIL NNN</div>
          <div style="font-family:'Playfair Display',serif; font-size:18px; font-weight:700; color:white;">Chase Bank &amp; Chipotle</div>
          <div style="font-family:'Inter',sans-serif; font-size:11px; color:rgba(255,255,255,0.8);">821 Eau Gallie Blvd &middot; Melbourne, FL 32935</div>
        </div>
      </div>
      <div style="padding:16px 18px; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <table style="width:100%; font-family:'Inter',sans-serif; font-size:13px; border-collapse:collapse;">
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Tenant</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">Chase Bank &amp; Chipotle</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Location</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">821 Eau Gallie Blvd, Melbourne, FL 32935</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Acquisition Price</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$7,732,000</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Cap Rate</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">4.6%</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">NOI</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$355,687</td></tr>
          <tr><td style="padding:7px 0; color:var(--gray);">Remaining Lease Term</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">15 Years</td></tr>
        </table>
      </div>
    </div>

    <!-- Property 2: Wendy's -->
    <div style="background:var(--light-blue); border-radius:6px; display:flex; flex-direction:column; overflow:hidden; border:1px solid rgba(42,122,140,0.15);">
      <div style="position:relative; height:200px; overflow:hidden;">
        <img src="assets/triple-net/wendys.jpeg" style="width:100%; height:100%; object-fit:cover;" alt="Wendy's NNN Property">
        <div style="position:absolute; bottom:0; left:0; right:0; background:linear-gradient(transparent, rgba(13,33,55,0.9)); padding:10px 18px 12px;">
          <div style="font-family:'Inter',sans-serif; font-size:10px; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:rgba(255,255,255,0.7); margin-bottom:2px;">QSR NNN</div>
          <div style="font-family:'Playfair Display',serif; font-size:18px; font-weight:700; color:white;">Wendy's</div>
          <div style="font-family:'Inter',sans-serif; font-size:11px; color:rgba(255,255,255,0.8);">12135 Lem Turner Rd &middot; Jacksonville, FL 32218</div>
        </div>
      </div>
      <div style="padding:16px 18px; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <table style="width:100%; font-family:'Inter',sans-serif; font-size:13px; border-collapse:collapse;">
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Tenant</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">Wendy's</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Location</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">12135 Lem Turner Rd, Jacksonville, FL 32218</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Acquisition Price</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$2,352,500</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Cap Rate</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">5.1%</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">NOI</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$120,000</td></tr>
          <tr><td style="padding:7px 0; color:var(--gray);">Remaining Lease Term</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">20.6 Years</td></tr>
        </table>
      </div>
    </div>
    <!-- Property 3: TD Bank -->
    <div style="background:var(--light-blue); border-radius:6px; display:flex; flex-direction:column; overflow:hidden; border:1px solid rgba(42,122,140,0.15);">
      <div style="position:relative; height:200px; overflow:hidden;">
        <img src="assets/triple-net/td_bank.jpeg" style="width:100%; height:100%; object-fit:cover;" alt="TD Bank NNN Property">
        <div style="position:absolute; bottom:0; left:0; right:0; background:linear-gradient(transparent, rgba(13,33,55,0.9)); padding:10px 18px 12px;">
          <div style="font-family:'Inter',sans-serif; font-size:10px; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:rgba(255,255,255,0.7); margin-bottom:2px;">SINGLE TENANT NNN</div>
          <div style="font-family:'Playfair Display',serif; font-size:18px; font-weight:700; color:white;">TD Bank</div>
          <div style="font-family:'Inter',sans-serif; font-size:11px; color:rgba(255,255,255,0.8);">Target Outparcel &middot; 14995 SW 88TH STREET, MIAMI, FL</div>
        </div>
      </div>
      <div style="padding:16px 18px; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <table style="width:100%; font-family:'Inter',sans-serif; font-size:13px; border-collapse:collapse;">
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Tenant</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">TD Bank</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Location</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">14995 SW 88TH STREET, MIAMI, FL</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Acquisition Price</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$6,509,803</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">Cap Rate</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">5.11%</td></tr>
          <tr style="border-bottom:1px solid rgba(42,122,140,0.12);"><td style="padding:7px 0; color:var(--gray);">NOI</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">$332,750</td></tr>
          <tr><td style="padding:7px 0; color:var(--gray);">Remaining Lease Term</td><td style="padding:7px 0; text-align:right; color:var(--navy); font-weight:600;">12.1 Years</td></tr>
        </table>
      </div>
    </div>
  </div>
  <div style="display:flex; gap:0; margin-top:8px; background:rgba(42,122,140,0.04); border-radius:6px; border:1px solid rgba(42,122,140,0.08); overflow:hidden;">
    <div style="flex:1; padding:10px 16px; border-right:1px solid rgba(42,122,140,0.08);">
      <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:3px;">1. SOURCE</div>
      <div style="font-family:Inter; font-size:11px; color:var(--gray); line-height:1.45;">Off-market and broker relationships across Florida, Texas, and Southeast US</div>
    </div>
    <div style="flex:1; padding:10px 16px; border-right:1px solid rgba(42,122,140,0.08);">
      <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:3px;">2. UNDERWRITE</div>
      <div style="font-family:Inter; font-size:11px; color:var(--gray); line-height:1.45;">Tenant credit, lease structure, location demographics, replacement cost analysis</div>
    </div>
    <div style="flex:1; padding:10px 16px; border-right:1px solid rgba(42,122,140,0.08);">
      <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:3px;">3. FINANCE</div>
      <div style="font-family:Inter; font-size:11px; color:var(--gray); line-height:1.45;">50&ndash;60% LTV, 3&ndash;5 yr fixed then adjustable, 25&ndash;30 yr amortization</div>
    </div>
    <div style="flex:1; padding:10px 16px;">
      <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:3px;">4. MANAGE &amp; REFI</div>
      <div style="font-family:Inter; font-size:11px; color:var(--gray); line-height:1.45;">Collect rent, season the asset, optimize the debt profile whenever possible</div>
    </div>
  </div>
  <div class="source-line" style="margin-top:4px;">Illustrative opportunities only &mdash; not indicative of current fund holdings &middot; Specific terms subject to negotiation and due diligence</div>
</div>

<div class="slide" id="slide-5">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">NNN leases in Florida: structure and financing</div>
  <div style="flex:1; display:flex; gap:28px; margin-top:16px; min-height:0;">

    <!-- LEFT COLUMN: The Asset -->
    <div style="flex:1; display:flex; flex-direction:column; gap:16px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:2px;">THE ASSET</div>

      <div style="font-family:Inter; font-size:16px; color:var(--navy); line-height:1.75;">
        Triple-net (NNN): the tenant pays property taxes, insurance, and maintenance. The landlord collects rent with <strong>near-zero operating cost</strong>. Tenants are investment-grade corporates on 10&ndash;20 year leases with 1.5&ndash;2% annual escalators.
      </div>

      <div style="background:var(--light-blue); border-radius:8px; padding:20px 24px; flex:0 0 auto;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:#c05040; letter-spacing:1.5px; margin-bottom:12px;">WHY FLORIDA</div>
        <table style="width:100%; font-family:Inter; font-size:15px; color:var(--navy); border-collapse:collapse;">
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:8px 0;">Population growth</td>
            <td style="padding:8px 0; text-align:right; font-weight:700; color:var(--teal);">+2.1M since 2020</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:8px 0;">State income tax</td>
            <td style="padding:8px 0; text-align:right; font-weight:700; color:var(--teal);">None</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:8px 0;">Net domestic migration</td>
            <td style="padding:8px 0; text-align:right; font-weight:700; color:var(--teal);">#1 in US</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:8px 0;">Landlord legal framework</td>
            <td style="padding:8px 0; text-align:right; font-weight:700; color:var(--teal);">Strong protections</td>
          </tr>
          <tr>
            <td style="padding:8px 0;">GDP growth (2020&ndash;24)</td>
            <td style="padding:8px 0; text-align:right; font-weight:700; color:var(--teal);">+32%</td>
          </tr>
        </table>
      </div>

      <!-- Florida net migration chart -->
      <div style="flex:1; min-height:0; display:flex; flex-direction:column;">
        <div style="font-family:Inter; font-size:10px; font-weight:600; color:var(--source-gray); letter-spacing:1px; margin-bottom:4px;">FLORIDA NET DOMESTIC MIGRATION (THOUSANDS)</div>
        <div style="flex:1; min-height:0; position:relative;"><canvas id="floridaMigrationChart"></canvas></div>
      </div>
    </div>

    <!-- Divider -->
    <div style="width:1px; background:rgba(42,122,140,0.15);"></div>

    <!-- RIGHT COLUMN: Debt Profile -->
    <div style="flex:1; display:flex; flex-direction:column; gap:14px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:2px;">EXPECTED DEBT PROFILE</div>

      <div style="background:var(--light-blue); border-radius:8px; padding:18px 24px; flex:0 0 auto;">
        <table style="width:100%; font-family:Inter; font-size:15px; color:var(--navy); border-collapse:collapse;">
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:7px 0;">Structure</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">Buy all-equity, cash-out refi</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:7px 0;">LTV</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">55% (hard cap)</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:7px 0;">Loan term</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">10 years</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:7px 0;">Amortization</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">30 years (balloon at maturity)</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(13,33,55,0.08);">
            <td style="padding:7px 0;">Rate assumption</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">~5.5% fixed</td>
          </tr>
          <tr>
            <td style="padding:7px 0;">NOI surplus</td>
            <td style="padding:7px 0; text-align:right; font-weight:700; color:var(--teal);">Retained in Treasuries</td>
          </tr>
        </table>
      </div>

      <!-- NOI vs Debt Service chart -->
      <div style="flex:1; min-height:0; display:flex; flex-direction:column;">
        <div style="font-family:Inter; font-size:10px; font-weight:600; color:var(--source-gray); letter-spacing:1px; margin-bottom:4px;">ILLUSTRATIVE: NOI SURPLUS ACCUMULATION vs. BALLOON ($20M PROPERTY, 6% CAP)</div>
        <div style="flex:1; min-height:0; position:relative;"><canvas id="noiDebtChart"></canvas></div>
      </div>
    </div>

  </div>
  <div class="source-line">Source: U.S. Census Bureau; BEA; Florida Dept. of Revenue; market financing terms as of Q1 2026</div>
</div>

<div class="slide" id="slide-6">
  <div class="section-label">EXECUTIVE SUMMARY</div>
  <div class="slide-title">Two foundational macro views.</div>
  <div style="flex:1; min-height:0; display:flex; flex-direction:column; gap:16px; margin-top:10px;">
    <!-- Two thesis cards -->
    <div style="display:flex; gap:20px; flex:3;">
      <div class="card" style="flex:1; margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 38px;">
        <div class="card-label" style="font-size:14px; margin-bottom:14px; letter-spacing:2.5px;">THESIS A &mdash; MACRO CONSTRAINT</div>
        <div class="card-text" style="font-size:18px; line-height:1.85; color:var(--gray);">The post&#8209;1950s monetary and political order is entering a regime of tightening constraint. Public debt is high, interest burdens are rising, geopolitics are fragmenting, and institutional credibility is weakening. Policy flexibility narrows: sustaining restrictive real financial conditions becomes progressively more costly. The adjustment path is a structural repricing toward assets with direct claims on real resources and productive capacity, and away from purely nominal financial claims.</div>
      </div>
      <div class="card" style="flex:1; margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 38px; border-left-color:#0d2137;">
        <div class="card-label" style="font-size:14px; margin-bottom:14px; color:#0d2137; letter-spacing:2.5px;">THESIS B &mdash; AI INFRASTRUCTURE</div>
        <div class="card-text" style="font-size:18px; line-height:1.85; color:var(--gray);">Frontier AI is shifting from incremental software gains to a general&#8209;purpose production technology that substitutes for economically productive cognitive labor. Productivity gains can be real &mdash; while the buildout becomes capital&#8209; and energy&#8209;intensive, constrained by physical bottlenecks: power, chips, cooling, grid capacity, minerals, and land. The result is a mixed macro impulse: deflationary in cognition, inflationary in the physical layer that enables it.</div>
      </div>
    </div>
    <!-- Intersection card -->
    <div style="background:var(--navy); border-radius:6px; padding:28px 38px; color:white; flex:1;">
      <div style="font-family:'Inter',sans-serif; font-size:13px; font-weight:600; letter-spacing:2.5px; text-transform:uppercase; color:var(--teal); margin-bottom:12px;">THE INTERSECTION</div>
      <div style="font-family:'Inter',sans-serif; font-size:18px; line-height:1.8; color:rgba(255,255,255,0.92);">These forces are not offsetting &mdash; they compound. AI raises potential output, but it also increases capital intensity and strains scarce inputs (power, grid hardware, chips, and minerals) inside a macro regime with less policy room to absorb shocks. As AI displaces labor, the political response skews toward redistribution and industrial policy &mdash; further widening structural deficits and reinforcing the drift toward real&#8209;asset repricing.</div>
      <div style="font-family:'Inter',sans-serif; font-size:16px; line-height:1.7; color:rgba(255,255,255,0.55); margin-top:14px; font-style:italic;">Net: deflationary in cognition, inflationary in resources &mdash; creating convexity in hard assets and physical bottlenecks, while compressing returns in undifferentiated information and &ldquo;model&#8209;only&rdquo; layers.</div>
    </div>
  </div>
  <div class="source-line">Source: World Gold Council Gold Demand Trends FY2025; hyperscaler earnings/guidance (Q4 2025 to Q2 FY2026); S&amp;P Global Market Intelligence (2024)</div>
</div>

<div class="slide" id="slide-7">
  <div class="slide-divider">
    <div class="divider-title">MACRO SHIFT</div>
    <div class="divider-subtitle">The repricing of real assets</div>
  </div>
</div>

<div class="slide" id="slide-8">
  <div class="section-label">THESIS A &mdash; FISCAL CONSTRAINT</div>
  <div class="slide-title">Federal debt is no longer cyclical. It's structural.</div>
  <div class="slide-subtitle">Fiscal spending is politically driven and structurally uncontrolled, backstopped by a Federal Reserve balance sheet that has expanded 10x since 2008.</div>
  <div class="chart-area" id="debt-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('debtChart','MI_federal_debt_gdp.png')" title="Download as PNG">&darr;</button>
    <canvas id="debtChart"></canvas>
  </div>
  <div class="source-line">Source: Congressional Budget Office data and GAO simulation</div>
</div>

<div class="slide" id="slide-9">
  <div class="section-label">THESIS A &mdash; FISCAL CONSTRAINT</div>
  <div class="slide-title">Interest expense is now a major budget item</div>
  <div class="slide-subtitle">Debt service crowds out fiscal flexibility and narrows the policy toolkit. Deficits persist even in expansions.</div>
  <div class="chart-area" id="spending-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('spendingChart','MI_spending_interest_revenue.png')" title="Download as PNG">&darr;</button>
    <canvas id="spendingChart"></canvas>
  </div>
  <div class="source-line">Source: Congressional Budget Office data and GAO simulation</div>
</div>

<div class="slide" id="slide-10">
  <div class="section-label">THESIS A &mdash; FISCAL CONSTRAINT</div>
  <div class="slide-title">For every $5 the government collects, $1 goes to interest</div>
  <div class="slide-subtitle">The debt compounds itself. The increase in interest expense widens the deficit, which requires more borrowing, which keeps rates elevated. This is the fiscal spiral &mdash; already in motion.</div>
  <div class="chart-area" id="interest-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('interestChart','MI_interest_pct_revenues.png')" title="Download as PNG">&darr;</button>
    <canvas id="interestChart"></canvas>
  </div>
  <div class="source-line">Source: U.S. Congressional Budget Office, Macrobond, Apollo Chief Economist</div>
</div>

<div class="slide" id="slide-11">
  <div class="section-label">THESIS A &mdash; ASSET PRICING</div>
  <div class="slide-title">The term premium is back</div>
  <div class="slide-subtitle">After a decade of suppression, investors are again demanding compensation for holding long-duration government debt</div>
  <div class="chart-area" id="term-premium-container">
    <button class="chart-download-btn" onclick="downloadChart('termPremiumChart','MI_term_premium.png')" title="Download as PNG">&darr;</button>
    <canvas id="termPremiumChart"></canvas>
  </div>
  <div class="source-line">Source: Board of Governors of the Federal Reserve System (US) via FRED. Shaded areas indicate U.S. recessions.</div>
</div>

<div class="slide" id="slide-12">
  <div class="section-label">THESIS A &mdash; GLOBAL</div>
  <div class="slide-title">This is not just the US</div>
  <div class="slide-subtitle">Japan and the UK are repricing long-run constraints</div>
  <div style="flex:1; min-height:0; display:flex; gap:20px;">
    <div style="flex:1; display:flex; flex-direction:column;">
      <div style="font-family:'Inter',sans-serif; font-size:13px; font-weight:700; letter-spacing:2px; color:var(--teal); text-transform:uppercase; margin-bottom:8px;">JAPAN</div>
      <div class="chart-area" style="flex:1;"><canvas id="japanChart"></canvas></div>
    </div>
    <div style="flex:1; display:flex; flex-direction:column;">
      <div style="font-family:'Inter',sans-serif; font-size:13px; font-weight:700; letter-spacing:2px; color:var(--navy); text-transform:uppercase; margin-bottom:8px;">UNITED KINGDOM</div>
      <div class="chart-area" style="flex:1;"><canvas id="ukChart"></canvas></div>
    </div>
  </div>
  <div class="source-line">Source: FRED, Bank of Japan, Bank of England</div>
</div>


<div class="slide" id="slide-13">
  <div class="section-label">THESIS A &mdash; INFLATION REGIME</div>
  <div class="slide-title">Core inflation has settled higher than pre-2020 across every major DM economy</div>
  <div class="slide-subtitle">Inflation has not returned to pre-COVID levels. We appear to be entering a structurally higher regime &mdash; above the target rate of most major central banks.</div>
  <div class="chart-area" id="inflation-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('inflationChart','MI_dm_core_inflation.png')" title="Download as PNG">&darr;</button>
    <canvas id="inflationChart"></canvas>
  </div>
  <div class="source-line">Source: Goldman Sachs. Dashed lines indicate GS forecasts.</div>
</div>

<div class="slide" id="slide-14">
  <div class="section-label">THESIS A &mdash; INFLATION REGIME</div>
  <div class="slide-title">Inflation concentrates where supply can't scale</div>
  <div class="slide-subtitle">Cumulative price change by category, 2000&ndash;2025</div>
  <div class="chart-area" id="price-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('priceChangesChart','MI_price_changes.png')" title="Download as PNG">&darr;</button>
    <canvas id="priceChangesChart"></canvas>
  </div>
  <div class="source-line">Source: Bureau of Labor Statistics</div>
</div>


<div class="slide" id="slide-15">
  <div class="section-label">THESIS A &mdash; POLICY</div>
  <div class="slide-title">Policy uncertainty is structural, not episodic</div>
  <div class="slide-subtitle">Tariffs, sanctions, and fiscal expansion create persistent repricing across asset classes</div>
  <div style="flex:1; display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr; gap:10px; min-height:0; margin-top:8px;">

    <!-- Trade Policy Uncertainty -->
    <div style="background:var(--light-blue); border-radius:8px; padding:12px 14px 6px; display:flex; flex-direction:column; border-top:3px solid #c05040;">
      <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:2px;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; color:#c05040; letter-spacing:1.5px;">TRADE POLICY UNCERTAINTY</div>
        <div><span style="font-family:Playfair Display; font-size:20px; font-weight:700; color:#c05040;">2,205</span><span style="font-family:Inter; font-size:9px; color:var(--gray); margin-left:4px;">Jan 2026</span></div>
      </div>
      <div style="flex:1; min-height:0; position:relative;"><canvas id="tpuChart"></canvas></div>
    </div>

    <!-- Geopolitical Risk Index -->
    <div style="background:var(--light-blue); border-radius:8px; padding:12px 14px 6px; display:flex; flex-direction:column; border-top:3px solid var(--navy);">
      <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:2px;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--navy); letter-spacing:1.5px;">GEOPOLITICAL RISK INDEX</div>
        <div><span style="font-family:Playfair Display; font-size:20px; font-weight:700; color:var(--navy);">164</span><span style="font-family:Inter; font-size:9px; color:var(--gray); margin-left:4px;">Jan 2026</span></div>
      </div>
      <div style="flex:1; min-height:0; position:relative;"><canvas id="gprChart"></canvas></div>
    </div>

    <!-- Fiscal Policy Uncertainty -->
    <div style="background:var(--light-blue); border-radius:8px; padding:12px 14px 6px; display:flex; flex-direction:column; border-top:3px solid var(--teal);">
      <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:2px;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; color:var(--teal); letter-spacing:1.5px;">FISCAL POLICY UNCERTAINTY</div>
        <div><span style="font-family:Playfair Display; font-size:20px; font-weight:700; color:var(--teal);">438</span><span style="font-family:Inter; font-size:9px; color:var(--gray); margin-left:4px;">Jan 2026</span></div>
      </div>
      <div style="flex:1; min-height:0; position:relative;"><canvas id="fiscalChart"></canvas></div>
    </div>

    <!-- VIX -->
    <div style="background:var(--light-blue); border-radius:8px; padding:12px 14px 6px; display:flex; flex-direction:column; border-top:3px solid #8b6914;">
      <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:2px;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; color:#8b6914; letter-spacing:1.5px;">CBOE VIX</div>
        <div><span style="font-family:Playfair Display; font-size:20px; font-weight:700; color:#8b6914;">22</span><span style="font-family:Inter; font-size:9px; color:var(--gray); margin-left:4px;">Jan 2026</span></div>
      </div>
      <div style="flex:1; min-height:0; position:relative;"><canvas id="vixChart"></canvas></div>
    </div>

  </div>
  <div class="source-line">Source: Baker, Bloom &amp; Davis (EPU, TPU, Fiscal); Caldara &amp; Iacoviello (GPR); CBOE (VIX) &middot; policyuncertainty.com &middot; latest panel values shown as Jan 2026 readings</div>
</div>


<div class="slide" id="slide-16">
  <div class="section-label">THESIS A &mdash; STRUCTURAL ADVANTAGE</div>
  <div class="slide-title">The US still grows. Most developed economies don&rsquo;t.</div>
  <div class="slide-subtitle">AI and reindustrialization can drive US GDP growth &mdash; but growth alone does not protect the dollar or reverse the fiscal trajectory</div>
  <div style="flex:1; display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr auto; gap:14px; margin-top:10px; min-height:0;">

    <!-- GDP Growth & Demographics -->
    <div style="background:var(--light-blue); border-radius:10px; padding:28px 30px; border-left:4px solid var(--teal); display:flex; flex-direction:column; gap:8px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1.5px;">GDP GROWTH &amp; DEMOGRAPHICS</div>
      <div style="font-family:Playfair Display; font-size:34px; font-weight:700; color:var(--navy);">2.4%</div>
      <div style="font-family:Inter; font-size:14px; color:var(--gray); line-height:1.6;">IMF 2026 forecast &mdash; roughly 2x the Eurozone, 3x Japan</div>
      <ul style="margin:0; padding-left:18px; font-family:Inter; font-size:13px; color:var(--gray); line-height:1.9; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <li>Eurozone <span style="color:var(--teal); font-weight:700;">1.2%</span> &middot; Japan <span style="color:var(--teal); font-weight:700;">0.7%</span> &middot; UK <span style="color:var(--teal); font-weight:700;">1.3%</span></li>
        <li>US population growing <span style="color:var(--teal); font-weight:700;">+0.5%/yr</span> while Japan, Germany, and China decline</li>
        <li><span style="color:var(--teal); font-weight:700;">$892B</span> in R&amp;D spending &mdash; 3.5% of GDP, among the highest globally</li>
      </ul>
    </div>

    <!-- Energy & Industrial Reliance -->
    <div style="background:var(--light-blue); border-radius:10px; padding:28px 30px; border-left:4px solid var(--teal); display:flex; flex-direction:column; gap:8px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1.5px;">ENERGY &amp; INDUSTRIAL RELIANCE</div>
      <div style="font-family:Playfair Display; font-size:34px; font-weight:700; color:var(--navy);">13.5M bbl/d</div>
      <div style="font-family:Inter; font-size:14px; color:var(--gray); line-height:1.6;">Largest oil producer, net exporter since 2019. But:</div>
      <ul style="margin:0; padding-left:18px; font-family:Inter; font-size:13px; color:var(--gray); line-height:1.9; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <li><span style="color:#c05040; font-weight:700;">90%</span> of advanced chips manufactured in Taiwan</li>
        <li><span style="color:#c05040; font-weight:700;">100%</span> import-reliant for gallium and graphite</li>
        <li><span style="color:#c05040; font-weight:700;">80%</span> of pharmaceutical APIs sourced overseas</li>
        <li><span style="color:#c05040; font-weight:700;">$918B</span> goods-and-services trade deficit in 2024</li>
        <li><span style="color:#c05040; font-weight:700;">0.1%</span> share of global commercial shipbuilding</li>
        <li><span style="color:#c05040; font-weight:700;">$40B</span> first agriculture trade deficit in 60 years</li>
      </ul>
    </div>

    <!-- Innovation -->
    <div style="background:var(--light-blue); border-radius:10px; padding:28px 30px; border-left:4px solid var(--teal); display:flex; flex-direction:column; gap:8px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1.5px;">INNOVATION ECOSYSTEM</div>
      <div style="font-family:Playfair Display; font-size:34px; font-weight:700; color:var(--navy);">7 of top 10</div>
      <div style="font-family:Inter; font-size:14px; color:var(--gray); line-height:1.6;">Most valuable companies globally are American</div>
      <ul style="margin:0; padding-left:18px; font-family:Inter; font-size:13px; color:var(--gray); line-height:1.9; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <li><span style="color:var(--teal); font-weight:700;">$21T</span> combined market cap of the top 7 US companies</li>
        <li><span style="color:var(--teal); font-weight:700;">$4.5T</span> NVIDIA alone exceeds UK, France, and Germany stock exchanges combined</li>
        <li><span style="color:var(--teal); font-weight:700;">54%</span> of global unicorns are American (853 companies)</li>
        <li><span style="color:var(--teal); font-weight:700;">64%</span> of global venture capital funding</li>
        <li><span style="color:var(--teal); font-weight:700;">79%</span> of global AI investment</li>
        <li><span style="color:var(--teal); font-weight:700;">$159B</span> invested in US AI companies in 2025</li>
      </ul>
    </div>

    <!-- Reserve currency -->
    <div style="background:rgba(192,80,64,0.06); border-radius:10px; padding:28px 30px; border-left:4px solid #c05040; display:flex; flex-direction:column; gap:8px;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:#c05040; letter-spacing:1.5px;">RESERVE CURRENCY</div>
      <div style="font-family:Playfair Display; font-size:34px; font-weight:700; color:var(--navy);">58% <span style="font-size:16px; color:#c05040; font-family:Inter; font-weight:600;">&darr; from 72%</span></div>
      <div style="font-family:Inter; font-size:14px; color:var(--gray); line-height:1.6;">USD share of global reserves &mdash; steady decline over two decades</div>
      <ul style="margin:0; padding-left:18px; font-family:Inter; font-size:13px; color:var(--gray); line-height:1.9; flex:1; display:flex; flex-direction:column; justify-content:center;">
        <li>BRICS+ nations settling bilateral trade in local currencies</li>
        <li><span style="color:#c05040; font-weight:700;">1,000+ tonnes/yr</span> in 2022-2024; <span style="color:#c05040; font-weight:700;">863 tonnes</span> in 2025</li>
        <li>The forces that grow GDP &mdash; AI capex, fiscal expansion &mdash; also widen deficits and accelerate reserve diversification</li>
      </ul>
    </div>

    <!-- Tension box spanning full width -->
    <div style="grid-column:1/-1; background:linear-gradient(135deg, rgba(13,33,55,0.04), rgba(192,80,64,0.04)); border-radius:10px; padding:20px 30px; border:1px solid rgba(192,80,64,0.15);">
      <div style="font-family:Inter; font-size:14px; color:var(--navy); line-height:1.7;">
        <strong style="color:#c05040;">The tension:</strong> The US can grow its way forward &mdash; but the path runs through massive fiscal spending, AI-driven labor disruption, and commodity-intensive reindustrialization. GDP rises, but so do deficits, inflation pressure, and demand for the physical inputs this portfolio targets.
      </div>
    </div>

  </div>
  <div class="source-line">Source: IMF WEO Jan 2026; EIA; USGS MCS 2025; Census Bureau; PitchBook; Stanford HAI; company market caps as of Feb 2026</div>
</div>

<div class="slide" id="slide-17">
  <div class="slide-divider">
    <div class="divider-title">THE CASE FOR REAL ASSETS</div>
    <div class="divider-subtitle">Scarcity plus credibility</div>
  </div>
</div>

<div class="slide" id="slide-18">
  <div class="section-label">REAL ASSETS &mdash; GOLD</div>
  <div class="slide-title">Gold has overtaken Treasuries in central bank reserves</div>
  <div class="slide-subtitle">Sovereign reserve managers are diversifying away from dollar-denominated debt</div>
  <div class="chart-area" id="gold-treasuries-container">
    <button class="chart-download-btn" onclick="downloadChart('goldTreasuriesChart','MI_gold_vs_treasuries.png')" title="Download as PNG">&darr;</button>
    <canvas id="goldTreasuriesChart"></canvas>
  </div>
  <div class="source-line">Source: IMF, Department of Treasury</div>
</div>

<div class="slide" id="slide-19">
  <div class="section-label">REAL ASSETS &mdash; GOLD</div>
  <div class="slide-title">Central-bank buying stayed elevated in 2025 after three 1,000t+ years</div>
  <div class="slide-subtitle">Annual net change in central-bank gold holdings (tonnes)</div>
  <div class="chart-area" id="cb-gold-container">
    <button class="chart-download-btn" onclick="downloadChart('cbGoldChart','MI_cb_gold_purchases.png')" title="Download as PNG">&darr;</button>
    <canvas id="cbGoldChart"></canvas>
  </div>
  <div class="source-line">Source: World Gold Council, Gold Demand Trends FY2025</div>
  <div class="small-note">2025 figure reflects full-year data (863t). Net purchases include reported and estimated unreported activity.</div>
</div>

<div class="slide" id="slide-20">
  <div class="section-label">REAL ASSETS &mdash; GOLD</div>
  <div class="slide-title">Priced in gold, US equities have made no progress since the GFC</div>
  <div class="slide-subtitle">Equities have kept pace with money supply growth &mdash; but not with real store-of-value assets</div>
  <div class="chart-area" id="sp-gold-container">
    <button class="chart-download-btn" onclick="downloadChart('spGoldChart','MI_sp500_gold_ratio.png')" title="Download as PNG">&darr;</button>
    <canvas id="spGoldChart"></canvas>
  </div>
  <div class="source-line">Source: S&amp;P Global, LBMA, IndexMundi; ratio indexed to Q1 2006 = 100</div>
</div>

<div class="slide" id="slide-21">
  <div class="section-label">REAL ASSETS &mdash; GOLD</div>
  <div class="slide-title">The gold-real yield relationship broke in 2022</div>
  <div class="slide-subtitle">Gold is now priced as a hedge against institutional risk, not rates</div>
  <div class="chart-area" id="gold-yield-container">
    <button class="chart-download-btn" onclick="downloadChart('goldYieldChart','MI_gold_vs_real_yield.png')" title="Download as PNG">&darr;</button>
    <canvas id="goldYieldChart"></canvas>
  </div>
  <div class="source-line">Source: Federal Reserve, Bloomberg</div>
</div>

<div class="slide" id="slide-22">
  <div class="section-label">REAL ASSETS &mdash; SUPPLY INELASTICITY</div>
  <div class="slide-title">Mine development timelines have tripled in three decades</div>
  <div class="slide-subtitle">Even if demand signals are clear today, new supply cannot respond for 18&ndash;29 years</div>
  <div class="chart-area"><canvas id="chart-mine-lead"></canvas></div>
  <div class="source-line">Source: S&amp;P Global Market Intelligence &middot; Study of 268 mines across 23 countries (2024)</div>
</div>

<div class="slide" id="slide-23">
  <div class="section-label">REAL ASSETS &mdash; CONCENTRATION RISK</div>
  <div class="slide-title">China refines 19 of the 20 strategic minerals the IEA tracks</div>
  <div class="slide-subtitle">Average market share: ~70%. Gallium: 98.7%. Magnesium: 95%. Rare earths: ~90%.</div>
  <div class="chart-area" id="minerals-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('mineralsChart','MI_critical_minerals.png')" title="Download as PNG">&darr;</button>
    <canvas id="mineralsChart"></canvas>
  </div>
  <div class="source-line">Source: Various. See IEA Critical Minerals report.</div>
</div>

<div class="slide" id="slide-24">
  <div class="section-label">REAL ASSETS &mdash; DEMAND</div>
  <div class="slide-title">Critical mineral demand is accelerating across the board</div>
  <div class="slide-subtitle">Under stated policies, lithium demand more than doubles by 2030 and quadruples by 2040. Every mineral on this chart faces a supply gap.</div>
  <div class="chart-area" id="mineral-demand-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('mineralDemandChart','MI_mineral_demand.png')" title="Download as PNG">&darr;</button>
    <canvas id="mineralDemandChart"></canvas>
  </div>
  <div class="source-line">Source: IEA Global Critical Minerals Outlook 2025 (STEPS scenario)</div>
</div>


<div class="slide" id="slide-25">
  <div class="section-label">THESIS A &mdash; COMMODITIES</div>
  <div class="slide-title">Beyond gold: silver, copper, and uranium are repricing on structural demand</div>
  <div class="slide-subtitle">Electrification, AI infrastructure, and reshoring are converging on the same constrained supply chains</div>
  <div style="flex:1; display:flex; flex-direction:column; gap:12px; margin-top:10px; min-height:0;">

    <!-- Three metal cards: Silver, Copper, Uranium -->
    <div style="display:flex; gap:14px; flex:0 0 auto;">
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:16px 20px; border-left:4px solid #8b8b8b;">
        <div style="display:flex; justify-content:space-between; align-items:baseline;">
          <div style="font-family:Inter; font-size:13px; font-weight:700; color:#6b6b6b; letter-spacing:1px;">SILVER</div>
          <div style="font-family:Inter; font-size:12px; color:var(--gray);">$26.4/oz &rarr; $79.1/oz</div>
        </div>
        <div style="font-family:Inter; font-size:12.5px; color:var(--navy); line-height:1.6; margin-top:6px;">
          Industrial demand exceeds mine supply for the fourth consecutive year. Solar PV consumes 20% of annual production. Monetary demand rising alongside gold. Above-ground inventories at multi-decade lows.
        </div>
      </div>
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:16px 20px; border-left:4px solid #c05040;">
        <div style="display:flex; justify-content:space-between; align-items:baseline;">
          <div style="font-family:Inter; font-size:13px; font-weight:700; color:#c05040; letter-spacing:1px;">COPPER</div>
          <div style="font-family:Inter; font-size:12px; color:var(--gray);">$4.09/lb &rarr; $5.88/lb</div>
        </div>
        <div style="font-family:Inter; font-size:12.5px; color:var(--navy); line-height:1.6; margin-top:6px;">
          Every EV uses 3&ndash;4x more copper than ICE. Every MW of solar needs 5 tonnes. Data centers use 5&ndash;10x more per MW than offices. No major new mine delivers before 2030.
        </div>
      </div>
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:16px 20px; border-left:4px solid var(--teal);">
        <div style="display:flex; justify-content:space-between; align-items:baseline;">
          <div style="font-family:Inter; font-size:13px; font-weight:700; color:var(--teal); letter-spacing:1px;">URANIUM</div>
          <div style="font-family:Inter; font-size:12px; color:var(--gray);">$28.7/lb &rarr; $63.5/lb</div>
        </div>
        <div style="font-family:Inter; font-size:12.5px; color:var(--navy); line-height:1.6; margin-top:6px;">
          30+ countries pledged to triple nuclear capacity by 2050. Hyperscalers signing SMR PPAs for baseload data center power. A decade of underinvestment meets surging demand.
        </div>
      </div>
    </div>

    <!-- Reshoring + Tariffs -->
    <div style="background:rgba(192,80,64,0.05); border-radius:8px; padding:14px 22px; border:1px solid rgba(192,80,64,0.12); flex:0 0 auto;">
      <div style="font-family:Inter; font-size:13px; font-weight:700; color:#c05040; letter-spacing:1px; margin-bottom:6px;">RESHORING &amp; TARIFFS</div>
      <div style="font-family:Inter; font-size:13px; color:var(--navy); line-height:1.65;">
        The US is deploying <strong>$280B</strong> on semiconductor fabs (CHIPS Act), <strong>$370B</strong> on clean energy (IRA), and <strong>$1.2T</strong> on infrastructure (IIJA) &mdash; all copper-intensive, steel-intensive, and energy-intensive. Trade policy compounds the pressure: <strong>25% tariffs</strong> on steel and aluminum, <strong>145%</strong> on Chinese goods, and Beijing&rsquo;s retaliatory embargo on gallium, germanium, and antimony. Reshoring doesn&rsquo;t reduce commodity demand &mdash; it <strong>redirects and amplifies</strong> it.
      </div>
    </div>

    <!-- Historical price chart -->
    <div style="flex:1; min-height:0; position:relative;">
      <canvas id="metalPricesChart"></canvas>
    </div>

  </div>
  <div class="source-line">Source: Yahoo Finance futures monthly closes (SI=F, HG=F) through February 9, 2026; FRED PURANUSDM (IMF uranium price) through December 2025</div>
</div>
<script>
(function() {
  var ctx = document.getElementById('metalPricesChart');
  if (!ctx) return;
  var labels = ["2021-02", "2021-03", "2021-04", "2021-05", "2021-06", "2021-07", "2021-08", "2021-09", "2021-10", "2021-11", "2021-12", "2022-01", "2022-02", "2022-03", "2022-04", "2022-05", "2022-06", "2022-07", "2022-08", "2022-09", "2022-10", "2022-11", "2022-12", "2023-01", "2023-02", "2023-03", "2023-04", "2023-05", "2023-06", "2023-07", "2023-08", "2023-09", "2023-10", "2023-11", "2023-12", "2024-01", "2024-02", "2024-03", "2024-04", "2024-05", "2024-06", "2024-07", "2024-08", "2024-09", "2024-10", "2024-11", "2024-12", "2025-01", "2025-02", "2025-03", "2025-04", "2025-05", "2025-06", "2025-07", "2025-08", "2025-09", "2025-10", "2025-11", "2025-12", "2026-01", "2026-02"];
  /* Indexed to 100 in Feb 2021. */
  var silver  = [100.00, 92.86, 97.92, 106.03, 99.10, 96.69, 90.75, 83.41, 90.69, 86.22, 88.36, 84.82, 92.27, 95.15, 87.27, 82.01, 76.82, 76.34, 67.28, 71.81, 72.44, 81.62, 90.38, 89.95, 79.39, 91.19, 94.69, 88.91, 86.39, 94.14, 92.69, 84.22, 86.51, 95.80, 90.35, 87.31, 85.85, 93.92, 99.96, 114.75, 110.74, 109.00, 108.82, 118.04, 123.68, 116.22, 109.61, 121.69, 118.24, 130.51, 123.21, 124.58, 135.79, 138.44, 152.26, 175.19, 181.78, 213.79, 265.64, 296.53, 299.41];
  var copper  = [100.00, 97.77, 109.39, 114.36, 104.93, 109.43, 106.48, 99.89, 106.86, 104.48, 108.80, 105.46, 108.55, 115.84, 107.34, 104.90, 90.72, 87.53, 85.93, 84.06, 83.37, 91.09, 92.94, 103.27, 100.07, 100.24, 94.52, 88.68, 91.37, 97.56, 92.14, 91.00, 88.94, 93.52, 94.77, 95.31, 93.65, 97.78, 111.48, 112.59, 107.23, 101.60, 101.23, 109.81, 105.35, 99.66, 97.35, 104.09, 110.26, 122.60, 111.37, 113.63, 122.85, 105.76, 110.36, 117.35, 123.71, 126.65, 137.50, 144.02, 143.56];
  var uranium = [100.00, 98.86, 103.80, 105.56, 112.14, 112.83, 112.16, 157.27, 134.24, 108.50, 126.05, 128.65, 125.01, 158.80, 169.92, 142.67, 140.71, 135.85, 138.87, 142.87, 144.10, 142.88, 136.69, 139.78, 144.14, 142.14, 145.70, 151.64, 159.44, 157.86, 161.80, 185.62, 201.12, 217.31, 244.43, 280.38, 283.71, 250.55, 249.94, 258.00, 241.39, 238.12, 227.78, 225.49, 232.05, 220.35, 210.10, 205.70, 189.50, 180.85, 183.81, 199.93, 207.86, 205.66, 205.73, 219.36, 223.14, 217.15, 221.59, null, null];
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Silver',
          data: silver,
          borderColor: '#8b8b8b',
          backgroundColor: 'rgba(139,139,139,0.06)',
          fill: true,
          tension: 0.3,
          pointRadius: 3,
          pointBackgroundColor: '#8b8b8b',
          borderWidth: 2.5
        },
        {
          label: 'Copper',
          data: copper,
          borderColor: '#c05040',
          backgroundColor: 'rgba(192,80,64,0.06)',
          fill: true,
          tension: 0.3,
          pointRadius: 3,
          pointBackgroundColor: '#c05040',
          borderWidth: 2.5
        },
        {
          label: 'Uranium',
          data: uranium,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42,122,140,0.06)',
          fill: true,
          tension: 0.3,
          pointRadius: 3,
          pointBackgroundColor: '#2a7a8c',
          borderWidth: 2.5
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        title: {
          display: true,
          text: '5Y indexed monthly price performance (Feb 2021 = 100)',
          font: { family: 'Inter', size: 12, weight: '600' },
          color: '#5a6a78',
          padding: { bottom: 8 }
        },
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            font: { family: 'Inter', size: 11 },
            color: '#5a6a78',
            usePointStyle: true,
            pointStyle: 'circle',
            boxWidth: 6,
            boxHeight: 6,
            padding: 14
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            label: function(ctx) {
              return ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1);
            }
          }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: { font: { family: 'Inter', size: 11 }, color: '#5a6a78' }
        },
        y: {
          grid: { color: 'rgba(0,0,0,0.06)' },
          ticks: { font: { family: 'Inter', size: 11 }, color: '#5a6a78' },
          min: 60,
          max: 320
        }
      }
    }
  });
})();
</script>

<div class="slide" id="slide-26">
  <div class="slide-divider">
    <div class="divider-title">THE AI BUILDOUT</div>
    <div class="divider-subtitle">The largest infrastructure deployment since electrification &mdash; compounding the fiscal, energy, and commodity pressures already in motion</div>
  </div>
</div>


<div class="slide" id="slide-28">
  <div class="section-label">THE AI BUILDOUT</div>
  <div class="slide-title">Why AI matters for this portfolio</div>
  <div class="slide-subtitle">Not a technology bet &mdash; a physical infrastructure bet. Every GPU cluster needs power, copper wiring, and concrete &mdash; AI accelerates the same commodity pressures our thesis already targets.</div>
  <div style="flex:1; display:flex; flex-direction:column; gap:16px; margin-top:14px; min-height:0;">

    <!-- Top row: Three impact cards -->
    <div style="display:flex; gap:16px; flex:0 0 auto;">
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:20px 22px; border-left:4px solid var(--teal);">
        <div style="font-family:Inter; font-size:13px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:8px;">POWER DEMAND</div>
        <div style="font-family:Playfair Display; font-size:32px; font-weight:700; color:var(--navy); margin-bottom:6px;">120 GW</div>
        <div style="font-family:Inter; font-size:13px; color:var(--gray); line-height:1.6;">Projected US data center power demand by 2029 (from 4.3 GW in 2023). Equivalent to adding the entire UK grid. Drives natural gas, uranium, and grid infrastructure.</div>
      </div>
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:20px 22px; border-left:4px solid #c05040;">
        <div style="font-family:Inter; font-size:13px; font-weight:700; color:#c05040; letter-spacing:1px; margin-bottom:8px;">COPPER INTENSITY</div>
        <div style="font-family:Playfair Display; font-size:32px; font-weight:700; color:var(--navy); margin-bottom:6px;">5&ndash;10x</div>
        <div style="font-family:Inter; font-size:13px; color:var(--gray); line-height:1.6;">More copper per MW in data centers vs. traditional buildings. AI accelerates the supply deficit in a metal that already takes 18&ndash;29 years to bring to market.</div>
      </div>
      <div style="flex:1; background:var(--light-blue); border-radius:8px; padding:20px 22px; border-left:4px solid var(--teal);">
        <div style="font-family:Inter; font-size:13px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:8px;">CAPEX CYCLE</div>
        <div style="font-family:Playfair Display; font-size:32px; font-weight:700; color:var(--navy); margin-bottom:6px;">$600B</div>
        <div style="font-family:Inter; font-size:13px; color:var(--gray); line-height:1.6;">Big Tech capex guided for 2026. Microsoft, Google, Amazon, and Meta are building physical infrastructure at a pace not seen since the railroads.</div>
      </div>
    </div>

    <!-- Bottom: Electricity Generation Chart (full width) -->
    <div style="flex:1; background:#fff; border-radius:8px; padding:16px 18px 12px; border:1px solid rgba(0,0,0,0.06); display:flex; flex-direction:column; min-height:0;">
      <canvas id="chart-electricity-gen" style="flex:1; min-height:0;"></canvas>
    </div>

  </div>
  <div class="source-line">Source: IEA; Goldman Sachs; Ember; EIA; company earnings disclosures (2026)</div>
</div>

<script>
// ==========================
// CHART: CHINA vs US ELECTRICITY GENERATION (SLIDE 28)
// ==========================
(function() {
  var c = document.getElementById('chart-electricity-gen');
  if (!c) return;

  var years = [2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025];
  var china = [1356,1481,1654,1911,2204,2500,2866,3282,3467,3715,4208,4716,4994,5447,5679,5860,6218,6635,7182,7119,7371,8161,8502,9058,10038,10400];
  var us    = [3802,3737,3858,3883,3971,4055,4065,4157,4119,3950,4125,4105,4048,4066,4093,4077,4077,4015,4178,4127,4007,4096,4231,4178,4200,4260];

  new Chart(c, {
    type: 'line',
    data: {
      labels: years,
      datasets: [
        {
          label: 'China',
          data: china,
          borderColor: '#c05040',
          backgroundColor: 'rgba(192,80,64,0.05)',
          fill: true,
          tension: 0.3,
          pointRadius: 0,
          pointHoverRadius: 4,
          pointBackgroundColor: '#c05040',
          borderWidth: 2.5
        },
        {
          label: 'United States',
          data: us,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42,122,140,0.05)',
          fill: true,
          tension: 0.3,
          pointRadius: 0,
          pointHoverRadius: 4,
          pointBackgroundColor: '#2a7a8c',
          borderWidth: 2.5
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        title: {
          display: true,
          text: 'Electricity generation (TWh)',
          font: { family: 'Inter', size: 11, weight: '600' },
          color: '#5a6a78',
          padding: { bottom: 6 }
        },
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            usePointStyle: true,
            pointStyle: 'circle',
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            padding: 14,
            boxWidth: 6,
            boxHeight: 6
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11, weight: '600' },
          callbacks: {
            label: function(ctx) {
              return ctx.dataset.label + ': ' + ctx.parsed.y.toLocaleString() + ' TWh';
            }
          }
        },
        annotation: {
          annotations: {
            crossoverLine: {
              type: 'line',
              xMin: 11,
              xMax: 11,
              borderColor: 'rgba(90,106,120,0.3)',
              borderWidth: 1,
              borderDash: [4, 3],
              label: {
                display: true,
                content: 'China overtakes US',
                position: 'start',
                backgroundColor: 'rgba(13,33,55,0.06)',
                color: '#5a6a78',
                font: { family: 'Inter', size: 9, weight: '600' },
                padding: { top: 2, bottom: 2, left: 6, right: 6 },
                yAdjust: -6
              }
            },
            chinaEndLabel: {
              type: 'label',
              xValue: 25,
              yValue: 10400,
              content: ['~10,400 TWh'],
              color: '#c05040',
              font: { family: 'Inter', size: 9, weight: '700' },
              backgroundColor: 'rgba(192,80,64,0.07)',
              padding: { top: 2, bottom: 2, left: 5, right: 5 },
              position: { x: 'end', y: 'center' },
              xAdjust: -8,
              yAdjust: -14
            },
            usEndLabel: {
              type: 'label',
              xValue: 25,
              yValue: 4260,
              content: ['~4,260 TWh'],
              color: '#2a7a8c',
              font: { family: 'Inter', size: 9, weight: '700' },
              backgroundColor: 'rgba(42,122,140,0.07)',
              padding: { top: 2, bottom: 2, left: 5, right: 5 },
              position: { x: 'end', y: 'center' },
              xAdjust: -8,
              yAdjust: 14
            }
          }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0',
            maxRotation: 0,
            callback: function(val, idx) {
              var yr = this.getLabelForValue(val);
              return (yr % 5 === 0) ? yr : '';
            }
          }
        },
        y: {
          grid: { color: 'rgba(0,0,0,0.045)' },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0',
            callback: function(v) { return v.toLocaleString(); }
          },
          min: 0
        }
      }
    }
  });
})();
</script>

<div class="slide" id="slide-27">
  <div class="section-label">THESIS B &mdash; VALUE CHAIN</div>
  <div class="slide-title" style="margin-bottom:4px;">AI Value Chain: Constraint to Cash-Flow Map</div>
  <div class="slide-subtitle" style="margin-bottom:10px;">Investment framing: physical bottlenecks first, capability conversion second, recurring monetization last.</div>

  <div style="flex:1; min-height:0; display:grid; grid-template-rows:auto 1fr; gap:10px;">
    <div style="display:grid; grid-template-columns:1fr auto 1fr auto 1fr; align-items:center; gap:8px; padding:10px 12px; border:1px solid rgba(42,122,140,0.2); border-radius:10px; background:linear-gradient(130deg,#f5fafd,#e9f2f8);">
      <div style="font-family:Inter; font-size:12px; font-weight:700; color:#0d2137; text-transform:uppercase; letter-spacing:1px; text-align:center; background:#edf4fa; border-radius:7px; padding:7px 6px;">1. Physical Constraints</div>
      <div style="font-family:Inter; font-size:22px; color:#7f93a6;">&rarr;</div>
      <div style="font-family:Inter; font-size:12px; font-weight:700; color:#0d2137; text-transform:uppercase; letter-spacing:1px; text-align:center; background:#e5f0f8; border-radius:7px; padding:7px 6px;">2. Model Conversion</div>
      <div style="font-family:Inter; font-size:22px; color:#7f93a6;">&rarr;</div>
      <div style="font-family:Inter; font-size:12px; font-weight:700; color:#0d2137; text-transform:uppercase; letter-spacing:1px; text-align:center; background:#dcebf6; border-radius:7px; padding:7px 6px;">3. Revenue Capture</div>
    </div>

    <div style="min-height:0; display:grid; grid-template-rows:1fr 1fr 1fr; gap:10px;">
      <div style="display:grid; grid-template-columns:190px 1fr; gap:10px; min-height:0; background:#f2f7fb; border:1px solid rgba(61,102,134,0.18); border-radius:11px; padding:9px;">
        <div style="background:#e8f1f8; border-left:4px solid #5f7892; border-radius:8px; padding:9px 10px; display:flex; flex-direction:column; justify-content:center;">
          <div style="font-family:Inter; font-size:10px; font-weight:700; color:#4a6784; letter-spacing:1.2px; text-transform:uppercase; margin-bottom:4px;">Physical Layer</div>
          <div style="font-family:Inter; font-size:13px; font-weight:600; color:#0d2137; line-height:1.25;">Hard assets and permitting cadence set the supply ceiling.</div>
        </div>
        <div style="display:grid; grid-template-columns:1fr auto 1fr auto 1fr auto 1fr; gap:7px; align-items:stretch; min-height:0;">
          <div style="background:#f8fbfe; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #5f7892; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Mining</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Copper, lithium, rare earths</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">Codelco 12% &middot; Freeport &middot; BHP &middot; Albemarle &middot; SQM &middot; Lynas &middot; MP Materials</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#f8fbfe; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #5f7892; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Refining</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Chemical processing and purification</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">China: 90% rare earths &middot; 70% lithium &middot; 40% copper. US &lt;3% refined lithium</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#f8fbfe; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #5f7892; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Semiconductors</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Fab capacity and advanced packaging</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">TSMC 70% foundry &middot; NVIDIA 90% AI GPU &middot; Samsung 7% &middot; NVIDIA 60% CoWoS</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#f8fbfe; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #5f7892; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Data Centers</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Power, cooling, networking</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">AWS $125B &middot; Azure $88B &middot; Google $85B &middot; Meta $72B capex (2025). Digital Realty 15% US power</div>
          </div>
        </div>
      </div>

      <div style="display:grid; grid-template-columns:190px 1fr; gap:10px; min-height:0; background:#e9f2f8; border:1px solid rgba(42,122,140,0.2); border-radius:11px; padding:9px;">
        <div style="background:#dfeaf4; border-left:4px solid #3f6686; border-radius:8px; padding:9px 10px; display:flex; flex-direction:column; justify-content:center;">
          <div style="font-family:Inter; font-size:10px; font-weight:700; color:#2f5d82; letter-spacing:1.2px; text-transform:uppercase; margin-bottom:4px;">Model Layer</div>
          <div style="font-family:Inter; font-size:13px; font-weight:600; color:#0d2137; line-height:1.25;">Post-training is where base capability becomes product-grade behavior.</div>
        </div>
        <div style="display:grid; grid-template-columns:1fr auto 1fr auto 1fr; gap:7px; align-items:stretch; min-height:0;">
          <div style="background:#f4f9fd; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #3f6686; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Pre-Training</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Foundation capability from large-scale compute and data</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">xAI 1M+ GPUs &middot; Meta 1.3M &middot; OpenAI/Stargate 400K &middot; Google DeepMind &middot; Anthropic. 5 frontier labs only</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#f4f9fd; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #2f5d82; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Post-Training</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">SFT + preference optimization + RLHF/RLAIF</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">Scale AI $14B val (Meta 49% stake) &middot; Mercor $450M ARR &middot; Labelbox &middot; Surge AI. Market $1.9B &rarr; $5.5B by 2030</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#f4f9fd; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #2f5d82; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Deployment</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Latency, reliability, safety, routing and eval loops</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">NVIDIA 90%+ workloads &middot; Groq $6.9B val &middot; Cerebras &middot; AWS Bedrock 4.7x growth &middot; Azure 80K+ customers</div>
          </div>
        </div>
      </div>

      <div style="display:grid; grid-template-columns:190px 1fr; gap:10px; min-height:0; background:#dcebf6; border:1px solid rgba(42,122,140,0.22); border-radius:11px; padding:9px;">
        <div style="background:#d1e4f2; border-left:4px solid #2a5a7a; border-radius:8px; padding:9px 10px; display:flex; flex-direction:column; justify-content:center;">
          <div style="font-family:Inter; font-size:10px; font-weight:700; color:#2a5a7a; letter-spacing:1.2px; text-transform:uppercase; margin-bottom:4px;">Revenue Layer</div>
          <div style="font-family:Inter; font-size:13px; font-weight:600; color:#0d2137; line-height:1.25;">Monetization compounds when inference is embedded in real workflows.</div>
        </div>
        <div style="display:grid; grid-template-columns:1fr auto 1fr auto 1fr; gap:7px; align-items:stretch; min-height:0;">
          <div style="background:#eef6fc; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #2a5a7a; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Inference</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Token consumption from agents, copilots and APIs</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">Enterprise API: Anthropic 40% &middot; OpenAI 27% &middot; Google 21%. Spend $3.5B &rarr; $8.4B in two quarters</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#eef6fc; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #2a5a7a; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Applications</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Distribution and workflow ownership drive pricing power</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">MSFT Copilot $13B 175% YoY &middot; Salesforce Agentforce $1.4B &middot; ServiceNow $500M+ &middot; 150M Copilot MAU</div>
          </div>
          <div style="display:flex; align-items:center; justify-content:center; font-family:Inter; font-size:23px; color:#7f93a6;">&rarr;</div>
          <div style="background:#eef6fc; border:1px solid rgba(13,33,55,0.1); border-left:4px solid #2a5a7a; border-radius:8px; padding:9px;">
            <div style="font-family:Inter; font-size:14px; font-weight:700; color:#0d2137;">Cash Flow</div>
            <div style="font-family:Inter; font-size:10px; color:#5a6a78; margin-top:3px; line-height:1.3;">Recurring gross profit reinvested into next model cycle</div>
            <div style="font-family:Inter; font-size:9.5px; color:#2a7a8c; margin-top:5px; line-height:1.35; font-weight:500;">NVIDIA $170B DC run rate &middot; AWS 35% margin &middot; Azure $75B+ &middot; Google Cloud 21% margin. Labs still unprofitable</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="source-line">Sources: TrendForce Q2 2025; IEA Global Critical Minerals Outlook 2025; Menlo Ventures State of GenAI in Enterprise (Jan 2026); public earnings (MSFT, AWS, GOOG, META, NVDA FY2025&ndash;26); Mordor Intelligence; S&amp;P Global</div>
</div>

<div class="slide" id="slide-29">
  <div class="section-label">THESIS B &mdash; CAPABILITY</div>
  <div class="slide-title">Harder benchmarks show capabilities still climbing steeply</div>
  <div class="slide-subtitle">Frontier running max on non-saturated benchmarks &mdash; SWE-bench broke 80% (Opus 4.5), FrontierMath 1%&rarr;41% in 18 months</div>
  <div class="chart-area"><canvas id="chart-eci"></canvas></div>
  <div class="source-line">Source: Epoch AI Capabilities Index (ECI); performance = best-ever score as of each month</div>
</div>

<div class="slide" id="slide-30">
  <div class="section-label">THESIS B &mdash; SCALING</div>
  <div class="slide-title">The task horizon is doubling every 4.3 months</div>
  <div class="slide-subtitle">METR-Horizon v1.1 &mdash; GPT-5.2 can now complete tasks that take humans ~6.5 hours</div>
  <div class="chart-area"><canvas id="chart-metr"></canvas></div>
  <div class="source-line">Source: METR Horizon v1.1 benchmark; p50 = median task duration where AI succeeds 50% of the time</div>
</div>

<div class="slide" id="slide-31">
  <div class="section-label">THE AI BUILDOUT &mdash; ADOPTION</div>
  <div class="slide-title">AI adoption is unprecedented &mdash; consumer and enterprise</div>
  <div class="slide-subtitle">~900M weekly consumer users. 1.3M+ business customers across the two leading AI labs. OpenAI has more enterprise customers; Anthropic captures 40% of enterprise LLM spend vs OpenAI&rsquo;s 27%.</div>
  <div class="stat-row-label" style="margin-top:12px;">ENTERPRISE ADOPTION</div>
  <div class="card-row">
    <div class="stat-card"><div class="stat-number">1M+</div><div class="stat-label">OpenAI business customers</div><div style="font-family:Inter; font-size:10px; color:var(--gray); margin-top:4px;">enterprise seats 9x YoY</div></div>
    <div class="stat-card"><div class="stat-number">300K+</div><div class="stat-label">Anthropic business customers</div><div style="font-family:Inter; font-size:10px; color:var(--gray); margin-top:4px;">from &lt;1K two years ago &mdash; 300x</div></div>
    <div class="stat-card"><div class="stat-number">65%</div><div class="stat-label">Google Cloud customers using AI</div><div style="font-family:Inter; font-size:10px; color:var(--gray); margin-top:4px;">cloud backlog doubled to $240B</div></div>
  </div>
  <div class="stat-row-label">CONSUMER &mdash; CHATGPT WEEKLY ACTIVE USERS</div>
  <div class="chart-area" style="flex:1; min-height:120px;"><canvas id="chart-ai-usage"></canvas></div>
  <div class="source-line">Source: OpenAI (Nov 2025); Anthropic (Sep 2025); Google (Q4 2025 earnings); The Information (Dec 2025); Menlo Ventures</div>
</div>


<div class="slide" id="slide-32">
  <div class="section-label">THE AI BUILDOUT &mdash; BUSINESS</div>
  <div class="slide-title">Revenue is already materializing &mdash; faster than any prior technology wave</div>
  <div class="slide-subtitle">The market is already paying for what these models produce. OpenAI: $28M &rarr; $20B in 3 years. Anthropic: $100M &rarr; $9B in 2 years.</div>
  <div class="chart-area"><canvas id="chart-ai-revenue"></canvas></div>
  <div class="source-line">Source: Epoch AI; company disclosures; The Information; Bloomberg; CNBC</div>
</div>

<div class="slide" id="slide-33">
  <div class="section-label">THESIS B &mdash; COMPUTE</div>
  <div class="slide-title">Training compute has grown 5 orders of magnitude since 2017</div>
  <div class="slide-subtitle">Each generation of model requires exponentially more hardware &mdash; from ~10<sup>21</sup> to ~5&times;10<sup>26</sup> FLOP in 8 years</div>
  <div class="chart-area"><canvas id="chart-training-compute"></canvas></div>
  <div class="source-line">Source: Epoch AI Notable AI Models database</div>
</div>

<div class="slide" id="slide-34">
  <div class="section-label">THESIS B &mdash; AI COMPUTE</div>
  <div class="slide-title">Training costs have crossed $500M &mdash; approaching $1B per run</div>
  <div class="slide-subtitle">More compute per model means more chips, more power, more cooling &mdash; each run is a megaproject</div>
  <div class="chart-area"><canvas id="chart-training-cost"></canvas></div>
  <div class="source-line">Source: Epoch AI Notable AI Models database; costs in 2023 USD</div>
</div>


<div class="slide" id="slide-35">
  <div class="section-label">THESIS B &mdash; HARDWARE</div>
  <div class="slide-title">32&times; more chips shipped in three years</div>
  <div class="stat-row-label" style="margin-top:18px;">AI ACCELERATORS SHIPPED (H100 EQUIV.)</div>
  <div class="card-row">
    <div class="stat-card"><div class="stat-number">310K</div><div class="stat-label">2022</div></div>
    <div class="stat-card"><div class="stat-number">1.4M</div><div class="stat-label">2023</div></div>
    <div class="stat-card"><div class="stat-number">5.5M</div><div class="stat-label">2024</div></div>
    <div class="stat-card"><div class="stat-number">10M+</div><div class="stat-label">2025</div></div>
  </div>
  <div class="stat-row-label">ASSOCIATED CHIP COST</div>
  <div class="card-row">
    <div class="stat-card"><div class="stat-number">$11B</div><div class="stat-label">2022</div></div>
    <div class="stat-card"><div class="stat-number">$37B</div><div class="stat-label">2023</div></div>
    <div class="stat-card"><div class="stat-number">$113B</div><div class="stat-label">2024</div></div>
    <div class="stat-card"><div class="stat-number">$143B</div><div class="stat-label">2025</div></div>
  </div>
  <div class="source-line" style="margin-top:8px;">5.96 GW shipped chip power draw in 2025 (assuming ~600W per accelerator) &mdash; roughly six large nuclear plants. Source: company filings and SemiAnalysis estimates.</div>
  <div class="chart-area" id="hardware-chart-container" style="flex: 1; min-height: 120px; margin-top: 12px;">
    <button class="chart-download-btn" onclick="downloadChart('hardwareChart','MI_hardware_shipments.png')" title="Download as PNG">&darr;</button>
    <canvas id="hardwareChart"></canvas>
  </div>
</div>

<div class="slide" id="slide-36">
  <div class="section-label">THESIS B &mdash; AI INFRASTRUCTURE</div>
  <div class="slide-title">Hyperscaler capex is entering escape velocity</div>
  <div class="slide-subtitle">Microsoft, Meta, Alphabet and Amazon are expected to spend &gt;$600B this year &mdash; up from roughly $360B spent in 2025</div>
  <div class="chart-area"><canvas id="chart-hyperscaler-capex"></canvas></div>
  <div class="source-line">Source: Company earnings (Q4 2025 / Q2 FY2026); 2026E = company guidance (META, GOOGL, AMZN) &amp; Bloomberg consensus (MSFT)</div>
</div>


<div class="slide" id="slide-37">
  <div class="section-label">THESIS B &mdash; INFRASTRUCTURE</div>
  <div class="slide-title">The datacenter buildout is at megaproject scale</div>
  <div class="stat-row-label" style="margin-top:14px;">TOTAL AI DATACENTER OPERATIONAL POWER (GW)</div>
  <div class="card-row">
    <div class="stat-card"><div class="stat-number">4.3</div><div class="stat-label">2023</div></div>
    <div class="stat-card"><div class="stat-number">21</div><div class="stat-label">2025</div></div>
    <div class="stat-card"><div class="stat-number">120</div><div class="stat-label">2029 (projected)</div></div>
  </div>
  <div class="chart-area" id="frontier-power-container">
    <button class="chart-download-btn" onclick="downloadChart('frontierPowerChart','MI_frontier_datacenter_power.png')" title="Download as PNG">&darr;</button>
    <canvas id="frontierPowerChart"></canvas>
  </div>
  <div class="source-line">Source: RAND / SemiAnalysis / Epoch AI</div>
</div>

<div class="slide" id="slide-38">
  <div class="section-label">THESIS B &mdash; POWER</div>
  <div class="slide-title">US datacenter load doubles to 130 GW by 2030</div>
  <div class="slide-subtitle">62 GW consumed in 2025 &mdash; PJM capacity market prices up 10&times; in two years ($29 &rarr; $329 / MW-day)</div>
  <div class="chart-area">
    <canvas id="datacenterCapacityChart"></canvas>
  </div>
  <div class="source-line">Source: Energy Institute, JPMAM, PJM Interconnection</div>
</div>

<div class="slide" id="slide-39">
  <div class="section-label">THESIS B &mdash; ECONOMICS</div>
  <div class="slide-title">Inference is 45% of compute spend and growing</div>
  <div class="slide-subtitle">Agentic workloads turn every task into hours of sustained reasoning</div>
  <div class="body-text">Models get cheaper to run, but usage grows faster &mdash; a Jevons dynamic. As AI shifts from single queries to autonomous multi-step agents, total inference compute is compounding. Every hour of agentic reasoning is hundreds of API calls &mdash; each requiring chips, power, and cooling. The physical layer scales with deployment, not just training.</div>
  <div class="chart-area" id="training-inference-container" style="height:220px;">
    <button class="chart-download-btn" onclick="downloadChart('trainingInferenceChart','MI_training_vs_inference.png')" title="Download as PNG">&darr;</button>
    <canvas id="trainingInferenceChart"></canvas>
  </div>
  <div class="source-line">Source: Semi Analysis, company disclosures, Epoch AI</div>
</div>

<div class="slide" id="slide-40">
  <div class="slide-divider">
    <div class="divider-title">WHY THESE FORCES COMPOUND</div>
    <div class="divider-subtitle">The intersection of macro shift and AI infrastructure</div>
  </div>
</div>

<div class="slide" id="slide-62">
  <div class="section-label">INTERSECTION</div>
  <div class="slide-title">AI is deflationary in cognition. Inflationary in everything it needs to run.</div>
  <div class="body-text" style="margin-top:12px;">Electricity. Copper. Grid hardware. Aluminum. Advanced packaging. Specialized memory. All in a system where permitting, geopolitics, and supply chain concentration constrain elasticity.</div>
  <div class="chart-area" id="ai-demand-container">
    <button class="chart-download-btn" onclick="downloadChart('aiDemandChart','MI_ai_demand_inputs.png')" title="Download as PNG">&darr;</button>
    <canvas id="aiDemandChart"></canvas>
  </div>
  <div class="source-line">Source: IEA, McKinsey, Goldman Sachs commodity research</div>
</div>

<div class="slide" id="slide-42">
  <div class="section-label">INTERSECTION &mdash; LABOR</div>
  <div class="slide-title">Labor exposure is broad and automation plans are accelerating</div>
  <div style="flex:1;display:flex;flex-direction:column;justify-content:center;">
    <div class="slide-subtitle" style="font-size:18px;">Sourced values only: 2025 labor exposure and 2030 employer labor-planning signals</div>
    <div class="body-text">ILO's 2025 index puts exposure at 25% globally (34% in high-income economies; 11% in low-income). WEF reports 73% of employers plan task automation and 41% expect workforce reductions by 2030.</div>
    <div class="chart-area" id="labor-signals-container" style="height:240px;">
      <button class="chart-download-btn" onclick="downloadChart('laborSignalsChart','MI_labor_ai_signals.png')" title="Download as PNG">&darr;</button>
      <canvas id="laborSignalsChart"></canvas>
    </div>
    <div class="source-line">Source: ILO-NASK Generative AI and Jobs Index (2025); World Economic Forum Future of Jobs Report 2025</div>
  </div>
</div>

<div class="slide" id="slide-43">
  <div class="section-label">INTERSECTION &mdash; FISCAL</div>
  <div class="slide-title" style="font-size:32px; line-height:1.2;">There is no fiscally neutral path through AI displacement</div>
  <div style="font-family:Inter; font-size:15px; color:var(--gray); line-height:1.55; margin-top:6px; max-width:90%;">60% of advanced-economy jobs are exposed to AI. UBI-style responses are possible in theory, but the U.S. still relies on labor-heavy taxes and has not enacted a replacement tax base at comparable scale.</div>

  <div style="flex:1; min-height:0; display:flex; gap:32px; margin-top:18px;">
    <!-- Left: OECD ALMP chart -->
    <div style="flex:1.3; display:flex; flex-direction:column; min-height:0;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; letter-spacing:2px; color:var(--teal); margin-bottom:10px;">PUBLIC SPENDING ON ACTIVE LABOR MARKET POLICIES (% OF GDP, 2019)</div>
      <div class="chart-area" style="flex:1; min-height:0; max-height:none; background:var(--light-blue); border-radius:8px; padding:6px;">
        <canvas id="fiscalALMPChart"></canvas>
      </div>
      <div class="source-line" style="margin-top:6px;">Source: OECD Social Expenditure Database (SOCX), 2019 pre-pandemic baseline</div>
    </div>

    <!-- Right: Three stacked cards -->
    <div style="flex:0.7; display:flex; flex-direction:column; gap:14px;">
      <div style="flex:1; background:var(--light-blue); border-left:4px solid var(--teal); border-radius:6px; padding:20px 24px; display:flex; flex-direction:column; justify-content:center;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; letter-spacing:2px; color:var(--teal); margin-bottom:6px;">REVENUE CONCENTRATION</div>
        <div style="display:flex; align-items:baseline; gap:10px;">
          <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--navy); line-height:1;">84%</div>
          <div style="font-family:Inter; font-size:13px; color:var(--gray);">of FY2024 receipts tied to labor taxes</div>
        </div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); margin-top:8px; line-height:1.5;">Individual income + social insurance receipts were $4.136T of $4.919T. VAT, AI-rent, and automation-tax ideas are still exploratory in U.S. federal policy.</div>
        <div class="source-line" style="margin-top:6px;">Sources: U.S. Treasury FY2024 Table 2 (Receipts by Source); RAND, &ldquo;Federal Revenue When AI Replaces Labor,&rdquo; 2025</div>
      </div>
      <div style="flex:1; background:var(--light-blue); border-left:4px solid var(--teal); border-radius:6px; padding:20px 24px; display:flex; flex-direction:column; justify-content:center;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; letter-spacing:2px; color:var(--teal); margin-bottom:6px;">SAFETY NET IS POLICY-SENSITIVE</div>
        <div style="display:flex; align-items:baseline; gap:10px;">
          <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--navy); line-height:1;">$187B</div>
          <div style="font-family:Inter; font-size:13px; color:var(--gray);">SNAP cuts (2025-2034 est.)</div>
        </div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); margin-top:8px; line-height:1.5;">P.L. 119-21 tightened eligibility/work rules and shifted costs to states. CBO estimates 2.4M fewer SNAP participants in an average month.</div>
        <div class="source-line" style="margin-top:6px;">Sources: CRS R48552 (Aug 15, 2025), summarizing CBO estimates (Jul 21 and Aug 11, 2025)</div>
      </div>
      <div style="flex:1; background:rgba(13,33,55,0.04); border-left:4px solid var(--navy); border-radius:6px; padding:20px 24px; display:flex; flex-direction:column; justify-content:center;">
        <div style="font-family:Inter; font-size:10px; font-weight:700; letter-spacing:2px; color:var(--navy); margin-bottom:6px;">WORKFORCE ADJUSTMENT UNDERFUNDED</div>
        <div style="display:flex; align-items:baseline; gap:10px;">
          <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--navy); line-height:1;">~$20B</div>
          <div style="font-family:Inter; font-size:13px; color:var(--gray);">federal workforce programs today</div>
        </div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); margin-top:8px; line-height:1.5;">Down from roughly <strong>$60B</strong> (inflation-adjusted) in 1979 while the labor force grew ~50%. Core WIOA Titles I/II are about $6B.</div>
        <div class="source-line" style="margin-top:6px;">Sources: Brookings (May 23, 2023), citing GAO-19-200</div>
      </div>
    </div>
  </div>
</div>

<div class="slide" id="slide-63">
  <div class="section-label" style="font-size:12px; letter-spacing:3px;">INTERSECTION &mdash; ENDGAME</div>
  <div class="slide-title" style="font-size:32px; margin-bottom:8px;">Financial repression is the proven playbook for sovereign deleveraging</div>
  <div class="body-text" style="font-size:15px; margin-bottom:0; line-height:1.55;">Real rates held below nominal growth for decades, silently transferring wealth from holders of nominal claims to the government. The same real assets that capture value from the AI buildout are the natural hedge.</div>
  <div class="slide-hr" style="margin:10px 0;"></div>

  <div style="flex:1; display:flex; gap:32px; min-height:0; margin-top:4px;">

    <!-- LEFT: Chart -->
    <div style="flex:1.3; display:flex; flex-direction:column; min-height:0;">
      <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:2px; margin-bottom:10px;">REAL ANNUALIZED RETURNS DURING FINANCIAL REPRESSION (1946&ndash;1980)</div>
      <div style="flex:1; position:relative; min-height:0;">
        <canvas id="repressionChart"></canvas>
      </div>
      <div style="font-family:Inter; font-size:10px; color:var(--source-gray); margin-top:6px; line-height:1.4;">Nominal returns deflated by CPI. Treasury = long-term government bonds. Equities = S&amp;P 500 total return. Real estate = NCREIF-equivalent residential. Commodities = broad commodity index.</div>
    </div>

    <!-- RIGHT: Mechanism cards + Dalio quote -->
    <div style="flex:0.75; display:flex; flex-direction:column; gap:14px; justify-content:center;">

      <!-- Card: The Precedent -->
      <div style="background:var(--light-blue); border-radius:10px; padding:22px 24px; border-left:4px solid var(--teal);">
        <div style="font-family:Inter; font-size:10px; font-weight:700; letter-spacing:2.5px; color:var(--teal); margin-bottom:10px;">THE PRECEDENT</div>
        <div style="display:flex; align-items:baseline; gap:10px; margin-bottom:6px;">
          <span style="font-family:'Playfair Display',serif; font-size:42px; font-weight:900; color:var(--navy); line-height:1;">119%</span>
          <span style="font-family:Inter; font-size:22px; color:var(--source-gray);">&rarr;</span>
          <span style="font-family:'Playfair Display',serif; font-size:42px; font-weight:900; color:var(--teal); line-height:1;">32%</span>
        </div>
        <div style="font-family:Inter; font-size:13px; color:var(--gray); line-height:1.55;">Debt/GDP fell <strong>87 percentage points</strong> over 35 years of negative real rates &mdash; without default or hyperinflation.</div>
      </div>

      <!-- Card: Today -->
      <div style="background:rgba(13,33,55,0.04); border-radius:10px; padding:22px 24px; border-left:4px solid var(--navy);">
        <div style="font-family:Inter; font-size:10px; font-weight:700; letter-spacing:2.5px; color:var(--navy); margin-bottom:10px;">TODAY</div>
        <div style="font-family:'Playfair Display',serif; font-size:48px; font-weight:900; color:var(--navy); line-height:1; margin-bottom:6px;">123%</div>
        <div style="font-family:Inter; font-size:13px; color:var(--gray); line-height:1.55;">US federal Debt/GDP &mdash; surpassing the 1946 wartime peak for the first time in history.</div>
      </div>


    </div>
  </div>

  <div class="source-line" style="margin-top:8px;">Sources: Federal Reserve, BLS, Ibbotson SBBI, Dimson-Marsh-Staunton Global Returns; Dalio, <em>Principles for Navigating Big Debt Crises</em> (2018)</div>
</div>

<div class="slide" id="slide-45">
  <div class="slide-divider">
    <div class="divider-title">PORTFOLIO CONSTRUCTION</div>
    <div class="divider-subtitle">Built to compound through volatility</div>
  </div>
</div>

<div class="slide" id="slide-46">
  <div class="section-label">PORTFOLIO &mdash; RESEARCH INFRASTRUCTURE</div>
  <div class="slide-title">Proprietary research system powered by a long-horizon AI agent</div>
  <div class="slide-subtitle">A CLI-based autonomous agent ingests live data from financial APIs, semiconductor supply chain trackers, on-chain feeds, and independent research &mdash; then executes structured analytical skills to produce equity research, risk analysis, and supply chain intelligence. Every output is reviewed by a human expert before informing portfolio decisions.</div>
  <div style="flex:1; min-height:0; display:flex; align-items:center; justify-content:center; margin-top:8px;">
    <img src="research_system_diagram.png" alt="Research System Architecture" style="max-width:100%; max-height:100%; object-fit:contain; border-radius:8px;">
  </div>
</div>

<div class="slide" id="slide-47">
  <div class="section-label">PORTFOLIO &mdash; LEADING INDICATORS</div>
  <div class="slide-title">What we track</div>
  <div class="slide-subtitle" style="margin-bottom:14px;">Three signal towers feed one decision engine: buildout velocity, macro constraints, and market regime.</div>
  <div style="flex:1; min-height:0; display:grid; grid-template-rows:0.64fr 0.36fr; gap:12px; margin-top:6px;">
    <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; min-height:0;">
      <div class="card" style="margin-bottom:0; padding:16px; border-left-color:var(--teal); display:flex; flex-direction:column;">
        <div class="card-label" style="font-size:12px; color:var(--teal); margin-bottom:8px;">AI BUILDOUT</div>
        <div style="display:grid; gap:8px; flex:1;">
          <div style="padding:9px 10px; background:rgba(42,122,140,0.08); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Capex revision breadth</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Hyperscaler guidance revision momentum.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(42,122,140,0.08); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Power conversion pace</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Queue conversion and energization delay trend.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(42,122,140,0.08); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Packaging and HBM tightness</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">CoWoS and HBM lead-time slope.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(42,122,140,0.08); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Training-to-inference mix</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Inference mix shift and monetization quality.</div>
          </div>
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:16px; border-left-color:var(--navy); display:flex; flex-direction:column;">
        <div class="card-label" style="font-size:12px; color:var(--navy); margin-bottom:8px;">MACRO REGIME</div>
        <div style="display:grid; gap:8px; flex:1;">
          <div style="padding:9px 10px; background:rgba(13,33,55,0.04); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Term premium and curve structure</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Discount-rate regime and risk-premium repricing pressure.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(13,33,55,0.04); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Real-rate and breakeven split</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Growth shock versus inflation shock decomposition.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(13,33,55,0.04); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Debt-service and fiscal impulse</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Interest burden trajectory and policy room to absorb shocks.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(13,33,55,0.04); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Commodity supply response lag</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Energy and materials constraints feeding inflation persistence.</div>
          </div>
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:16px; border-left-color:#c05040; display:flex; flex-direction:column;">
        <div class="card-label" style="font-size:12px; color:#c05040; margin-bottom:8px;">MARKET REGIME &amp; POSITIONING</div>
        <div style="display:grid; gap:8px; flex:1;">
          <div style="padding:9px 10px; background:rgba(192,80,64,0.06); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Index valuation state</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">CAPE, trailing and forward P/E, earnings yield spread.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(192,80,64,0.06); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Volatility and policy uncertainty</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">VIX regime and policy/trade uncertainty composites.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(192,80,64,0.06); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Cross-asset stress transmission</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Rates, FX, metals, credit, and equity risk transfer.</div>
          </div>
          <div style="padding:9px 10px; background:rgba(192,80,64,0.06); border-radius:8px;">
            <div style="font-family:Inter; font-size:17px; font-weight:700; color:var(--navy);">Crowding and breadth</div>
            <div style="font-family:Inter; font-size:14px; color:var(--gray); margin-top:2px;">Concentration risk and factor crowding deterioration checks.</div>
          </div>
        </div>
      </div>
    </div>
    <div style="display:grid; grid-template-columns:1.4fr 0.6fr; gap:12px; min-height:0;">
      <div class="card" style="margin-bottom:0; padding:12px 14px;">
        <div class="card-label" style="font-size:12px; margin-bottom:8px;">MONITORING COVERAGE MAP</div>
        <div style="display:grid; grid-template-columns:160px 1fr 1fr 1fr 1.25fr; align-items:center; row-gap:7px; column-gap:8px;">
          <div style="font-family:Inter; font-size:11px; font-weight:700; color:#8a96a0; text-transform:uppercase; letter-spacing:1px;">Cadence</div>
          <div style="font-family:Inter; font-size:11px; font-weight:700; color:#8a96a0; text-transform:uppercase; letter-spacing:1px;">AI Buildout</div>
          <div style="font-family:Inter; font-size:11px; font-weight:700; color:#8a96a0; text-transform:uppercase; letter-spacing:1px;">Macro</div>
          <div style="font-family:Inter; font-size:11px; font-weight:700; color:#8a96a0; text-transform:uppercase; letter-spacing:1px;">Market</div>
          <div style="font-family:Inter; font-size:11px; font-weight:700; color:#8a96a0; text-transform:uppercase; letter-spacing:1px;">Portfolio Action</div>

          <div style="font-family:Inter; font-size:15px; font-weight:700; color:var(--teal); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Daily</div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(42,122,140,0.12); color:var(--teal); font-size:12px; font-weight:700;">Primary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(13,33,55,0.08); color:var(--navy); font-size:12px; font-weight:700;">Primary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(192,80,64,0.12); color:#a44335; font-size:12px; font-weight:700;">Primary</span></div>
          <div style="font-family:Inter; font-size:14px; color:var(--gray); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Size risk and update gross/net exposure.</div>

          <div style="font-family:Inter; font-size:15px; font-weight:700; color:var(--teal); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Weekly</div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(42,122,140,0.12); color:var(--teal); font-size:12px; font-weight:700;">Primary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(13,33,55,0.08); color:var(--navy); font-size:12px; font-weight:700;">Secondary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(192,80,64,0.12); color:#a44335; font-size:12px; font-weight:700;">Primary</span></div>
          <div style="font-family:Inter; font-size:14px; color:var(--gray); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Rotate conviction weights and tighten stops.</div>

          <div style="font-family:Inter; font-size:15px; font-weight:700; color:var(--teal); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Monthly + Event</div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(42,122,140,0.12); color:var(--teal); font-size:12px; font-weight:700;">Secondary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(13,33,55,0.08); color:var(--navy); font-size:12px; font-weight:700;">Primary</span></div>
          <div style="border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;"><span style="display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(192,80,64,0.12); color:#a44335; font-size:12px; font-weight:700;">Secondary</span></div>
          <div style="font-family:Inter; font-size:14px; color:var(--gray); border-top:1px solid rgba(0,0,0,0.06); padding-top:8px;">Re-underwrite, re-rank, and approve adds/exits.</div>
        </div>
      </div>
    </div>
  </div>
  <div class="source-line">Source: Internal investment committee dashboard schema and linked public data feeds (market, macro, and AI infrastructure series)</div>
</div>

<div class="slide" id="slide-48">
  <div class="slide-divider">
    <div class="divider-title">FUND TERMS</div>
    <div class="divider-subtitle">Structure, governance, and alignment</div>
  </div>
</div>

<div class="slide" id="slide-50">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">Scenario analysis</div>
  <div class="slide-subtitle">Adjust assumptions to model projected returns &middot; NOI escalates 2% annually (NNN lease) &middot; 10-year fund life</div>
  <div class="scenario-slider-group">
    <div class="scenario-slider">
      <label>Entry Cap Rate</label>
      <div class="slider-value" id="val-cap">6.0%</div>
      <input type="range" id="slider-cap" min="3" max="9" step="0.25" value="6">
    </div>
    <div class="scenario-slider">
      <label>Exit Cap Rate (Yr 10)</label>
      <div class="slider-value" id="val-re">6.0%</div>
      <input type="range" id="slider-re" min="4" max="10" step="0.25" value="6">
    </div>
    <div class="scenario-slider">
      <label>Loan Rate</label>
      <div class="slider-value" id="val-loan">5.5%</div>
      <input type="range" id="slider-loan" min="3" max="9" step="0.25" value="5.5">
    </div>
    <div class="scenario-slider">
      <label>Structural Long Portfolio Return</label>
      <div class="slider-value" id="val-alpha">15.0%</div>
      <input type="range" id="slider-alpha" min="0" max="25" step="0.5" value="15">
    </div>
  </div>
  <div class="chart-area" style="flex:1; min-height:0;"><canvas id="chart-scenario-nav"></canvas></div>
  <div class="card-row" style="margin-top:6px; gap:8px;">
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #2a7a8c;">
      <div class="stat-number" id="metric-gross-irr" style="font-size:26px;">--</div>
      <div class="stat-label">Gross IRR</div>
    </div>
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #2a7a8c;">
      <div class="stat-number" id="metric-gross-moic" style="font-size:26px;">--</div>
      <div class="stat-label">Gross MOIC</div>
    </div>
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #0d2137;">
      <div class="stat-number" id="metric-irr" style="font-size:26px;">--</div>
      <div class="stat-label">LP Net IRR</div>
    </div>
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #0d2137;">
      <div class="stat-number" id="metric-moic" style="font-size:26px;">--</div>
      <div class="stat-label">LP Net MOIC</div>
    </div>
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #0d2137;">
      <div class="stat-number" id="metric-profit" style="font-size:26px;">--</div>
      <div class="stat-label">LP Net Profit</div>
    </div>
    <div class="stat-card" style="padding:10px 10px; border-left:3px solid #e67e22;">
      <div class="stat-number" id="metric-carry" style="font-size:26px;">--</div>
      <div class="stat-label">GP Carry</div>
    </div>
  </div>
  <div class="source-line">Projections are illustrative &middot; 2% mgmt fee (Yr 1&ndash;5 on committed capital, Yr 6&ndash;10 on NAV) &middot; 20% carry above 9% preferred &middot; Past performance is not indicative of future results</div>
</div>

<div class="slide" id="slide-51">
  <div class="section-label">FUND TERMS</div>
  <div class="slide-title">Terms at a glance</div>
  <div style="display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr; gap:18px; flex:1; min-height:0; margin-top:12px;">
    <div class="card" style="margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 36px;">
      <div class="card-label" style="font-size:15px; margin-bottom:20px; letter-spacing:2.5px;">FEE STRUCTURE</div>
      <div class="card-text" style="font-size:19px; line-height:2.4;">
        <strong style="color:var(--navy);">Management Fee:</strong> 2.0% of committed capital (Yr 1&ndash;5), 2.0% of NAV (Yr 6&ndash;10)<br>
        <strong style="color:var(--navy);">Carried Interest:</strong> 20% above 9% preferred<br>
        <strong style="color:var(--navy);">Preferred Return:</strong> 9.0% cumulative<br>
        <strong style="color:var(--navy);">GP Catch-Up:</strong> 100% until 20% of profits<br>
        <strong style="color:var(--navy);">Formation Fee:</strong> 1.0% of LP capital
      </div>
    </div>
    <div class="card" style="margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 36px;">
      <div class="card-label" style="font-size:15px; margin-bottom:20px; letter-spacing:2.5px;">INVESTMENT GUIDELINES</div>
      <div class="card-text" style="font-size:19px; line-height:2.4;">
        <strong style="color:var(--navy);">Permitted:</strong> Equities, ETFs, bonds, commodities, FX, futures, options, crypto, Treasuries<br>
        <strong style="color:var(--navy);">Max Single Position:</strong> 10% of portfolio NAV<br>
        <strong style="color:var(--navy);">Margin / Borrowing:</strong> Prohibited<br>
        <strong style="color:var(--navy);">Outright Shorts:</strong> Prohibited<br>
        <strong style="color:var(--navy);">Derivatives Leverage:</strong> Permitted
      </div>
    </div>
    <div class="card" style="margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 36px;">
      <div class="card-label" style="font-size:15px; margin-bottom:20px; letter-spacing:2.5px;">LIQUIDITY</div>
      <div class="card-text" style="font-size:19px; line-height:2.4;">
        <strong style="color:var(--navy);">Years 1&ndash;5:</strong> Full lock-up, no redemptions<br>
        <strong style="color:var(--navy);">Years 6&ndash;10:</strong> GP discretionary liquidation window<br>
        <strong style="color:var(--navy);">Secondary Transfers:</strong> 90% NAV (seller) / 95% NAV (buyer); 5% spread accrues to the fund (all LPs)<br>
        <strong style="color:var(--navy);">ROFR:</strong> Existing LPs have first right of refusal<br>
        <strong style="color:var(--navy);">GP Capital:</strong> Locked until full dissolution
      </div>
    </div>
    <div class="card" style="margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:32px 36px;">
      <div class="card-label" style="font-size:15px; margin-bottom:20px; letter-spacing:2.5px;">REPORTING &amp; BENCHMARKS</div>
      <div class="card-text" style="font-size:19px; line-height:2.4;">
        <strong style="color:var(--navy);">Real Estate (~45%):</strong> NCREIF Property Index<br>
        <strong style="color:var(--navy);">Structural Long (~55%):</strong> S&P 500 Total Return<br>
        <strong style="color:var(--navy);">Fund Level:</strong> Weighted composite<br>
        <strong style="color:var(--navy);">Reporting:</strong> Quarterly NAV + annual letter<br>
        <strong style="color:var(--navy);">Access:</strong> Direct LP-to-GP communication
      </div>
    </div>
  </div>
  <div style="margin-top:10px; flex-shrink:0;">
    <div style="font-family:'Inter',sans-serif; font-size:11px; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:var(--teal); margin-bottom:8px;">FUND LIFECYCLE</div>
    <div style="display:flex; height:36px; border-radius:4px; overflow:hidden; font-family:'Inter',sans-serif; font-size:12px; font-weight:600;">
      <div style="flex:1; background:var(--navy); color:white; display:flex; align-items:center; justify-content:center;">Yr 1</div>
      <div style="flex:1; background:var(--navy); color:white; display:flex; align-items:center; justify-content:center;">Yr 2</div>
      <div style="flex:1; background:var(--navy); color:white; display:flex; align-items:center; justify-content:center;">Yr 3</div>
      <div style="flex:1; background:var(--navy); color:white; display:flex; align-items:center; justify-content:center;">Yr 4</div>
      <div style="flex:1; background:var(--navy); color:white; display:flex; align-items:center; justify-content:center; border-right:2px solid white;">Yr 5</div>
      <div style="flex:1; background:var(--teal); color:white; display:flex; align-items:center; justify-content:center;">Yr 6</div>
      <div style="flex:1; background:var(--teal); color:white; display:flex; align-items:center; justify-content:center;">Yr 7</div>
      <div style="flex:1; background:var(--teal); color:white; display:flex; align-items:center; justify-content:center;">Yr 8</div>
      <div style="flex:1; background:var(--teal); color:white; display:flex; align-items:center; justify-content:center;">Yr 9</div>
      <div style="flex:1; background:var(--teal); color:white; display:flex; align-items:center; justify-content:center;">Yr 10</div>
    </div>
    <div style="display:flex; font-family:'Inter',sans-serif; font-size:11px; color:var(--gray); margin-top:4px;">
      <div style="flex:5; text-align:center;"><strong style="color:var(--navy);">Full Lock-Up</strong> &middot; 2% fee on committed capital</div>
      <div style="flex:5; text-align:center;"><strong style="color:var(--teal);">GP Discretionary Window</strong> &middot; 2% fee on NAV</div>
    </div>
  </div>
  <div class="source-line">Source: Draft fund term sheet and LPA framework (internal working draft, Feb 2026)</div>
</div>

<div class="slide" id="slide-52">
  <div class="section-label">RISK MANAGEMENT</div>
  <div class="slide-title">Risk architecture</div>
  <div class="slide-subtitle">Every risk has a structural mitigation built into the fund design</div>
  <div style="flex:1; min-height:0; display:flex; gap:24px; margin-top:12px;">
    <div class="card" style="flex:1; margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:36px 38px;">
      <div class="card-label" style="font-size:15px; margin-bottom:22px; letter-spacing:2.5px;">RISK FACTORS</div>
      <div class="card-text" style="font-size:20px; line-height:2.5;">
        <strong style="color:var(--navy);">Property value decline</strong> &mdash; affecting refinancing ability<br>
        <strong style="color:var(--navy);">Tenant default</strong> &mdash; loss of contractual cash flow<br>
        <strong style="color:var(--navy);">Interest rate risk</strong> &mdash; balloon refinancing at Year 10<br>
        <strong style="color:var(--navy);">Market risk</strong> &mdash; across structural long portfolio positions<br>
        <strong style="color:var(--navy);">Crypto / FX volatility</strong> &mdash; position-level drawdowns<br>
        <strong style="color:var(--navy);">Structural leverage</strong> &mdash; through real estate debt
      </div>
    </div>
    <div class="card" style="flex:1; margin-bottom:0; display:flex; flex-direction:column; justify-content:center; padding:36px 38px; border-left-color:#0d2137;">
      <div class="card-label" style="font-size:15px; margin-bottom:22px; color:#0d2137; letter-spacing:2.5px;">STRUCTURAL MITIGANTS</div>
      <div class="card-text" style="font-size:20px; line-height:2.5;">
        <strong style="color:var(--navy);">55% LTV hard cap</strong> &mdash; 45% equity cushion at all times<br>
        <strong style="color:var(--navy);">AAA NNN tenants</strong> &mdash; investment-grade contractual cash flows<br>
        <strong style="color:var(--navy);">Full NOI surplus</strong> &mdash; accumulated in U.S. Treasuries<br>
        <strong style="color:var(--navy);">10% position limit</strong> &mdash; enforced diversification<br>
        <strong style="color:var(--navy);">No margin, no shorts</strong> &mdash; eliminates forced liquidation<br>
        <strong style="color:var(--navy);">30-year amortization</strong> &mdash; manageable debt service
      </div>
    </div>
  </div>
  <div style="margin-top:14px; flex-shrink:0;">
    <div style="font-family:'Inter',sans-serif; font-size:13px; font-weight:600; letter-spacing:2px; text-transform:uppercase; color:var(--teal); margin-bottom:10px;">STRESS SCENARIO &mdash; WHAT IF EVERYTHING GOES WRONG?</div>
    <div class="card-row" style="margin-bottom:0; gap:14px;">
      <div class="stat-card" style="padding:16px 18px; flex:1; border-left:3px solid #c05040;">
        <div class="stat-number" style="font-size:24px; color:#c05040;">&ndash;30% RE</div>
        <div class="stat-label" style="font-size:14px;">45% equity cushion absorbs decline before LTV breach</div>
      </div>
      <div class="stat-card" style="padding:16px 18px; flex:1; border-left:3px solid #c05040;">
        <div class="stat-number" style="font-size:24px; color:#c05040;">&ndash;50% Portfolio</div>
        <div class="stat-label" style="font-size:14px;">No margin = no forced liquidation, RE collar preserves capital</div>
      </div>
      <div class="stat-card" style="padding:16px 18px; flex:1; border-left:3px solid #c05040;">
        <div class="stat-number" style="font-size:24px; color:#c05040;">Tenant Default</div>
        <div class="stat-label" style="font-size:14px;">AAA NNN lease + T-bill reserve covers 2+ years debt service</div>
      </div>
      <div class="stat-card" style="padding:16px 18px; flex:1; border-left:3px solid #c05040;">
        <div class="stat-number" style="font-size:24px; color:#c05040;">Rate Spike</div>
        <div class="stat-label" style="font-size:14px;">10-year fixed term insulates from interim rate movements</div>
      </div>
    </div>
  </div>
  <div class="body-text" style="margin-top:12px; font-size:18px;"><strong class="bold-accent">The real estate collar creates a structural floor. The structural long portfolio creates the upside.</strong></div>
  <div class="source-line">Source: Internal underwriting policy and portfolio risk limits (v2026.02)</div>
</div>

<div class="slide" id="slide-53">
  <div class="section-label">PORTFOLIO CONSTRUCTION</div>
  <div class="slide-title">Traditional portfolio construction was designed for a regime that no longer exists.</div>
  <div class="slide-subtitle">At current starting valuations, historical forward real return base rates for broad equity beta are materially compressed.</div>
  <div style="flex:1; min-height:0; display:flex; gap:22px; margin-top:10px;">
    <div class="card" style="flex:1.25; margin-bottom:0; padding:16px 18px 12px 18px; display:flex; flex-direction:column;">
      <div class="card-label" style="margin-bottom:8px;">HISTORICAL BASE RATES BY STARTING CAPE</div>
      <div class="chart-area" style="flex:1; min-height:0; max-height:none; background:var(--light-blue); border-radius:8px; padding:6px;">
        <button class="chart-download-btn" onclick="downloadChart('sp500ValuationBucketsChart','MI_sp500_cape_forward_returns.png')" title="Download as PNG">&darr;</button>
        <canvas id="sp500ValuationBucketsChart"></canvas>
      </div>
      <div style="font-family:Inter; font-size:10px; color:var(--source-gray); margin-top:7px; line-height:1.35;">Bars show median next 10-year annualized real total return by starting CAPE bucket. Tooltips include interquartile range and sample count (monthly cohorts, 1881-2013 starts, n=1,593).</div>
    </div>
    <div style="flex:0.95; display:flex; flex-direction:column; gap:10px; min-height:0;">
      <div class="card" style="flex:1.1; margin-bottom:0; padding:14px 16px;">
        <div class="card-label" style="margin-bottom:8px;">S&amp;P 500 VALUATION SNAPSHOT (UPDATED MONDAY, FEBRUARY 9, 2026; LAST CASH CLOSE = FEBRUARY 6)</div>
        <table style="width:100%; border-collapse:collapse; font-family:Inter; font-size:12px;">
          <thead>
            <tr style="color:#8a96a0; font-size:10px; text-transform:uppercase; letter-spacing:0.9px;">
              <th style="text-align:left; padding:4px 0;">Metric</th>
              <th style="text-align:right; padding:4px 0;">Current</th>
              <th style="text-align:right; padding:4px 0;">Long-run Mean</th>
              <th style="text-align:right; padding:4px 0;">Signal</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-top:1px solid rgba(0,0,0,0.06);">
              <td style="padding:6px 0; color:var(--navy); font-weight:600;">Shiller CAPE</td>
              <td style="padding:6px 0; text-align:right;">40.38</td>
              <td style="padding:6px 0; text-align:right;">17.33</td>
              <td style="padding:6px 0; text-align:right; color:#c05040; font-weight:600;">98.8th pctile</td>
            </tr>
            <tr style="border-top:1px solid rgba(0,0,0,0.06);">
              <td style="padding:6px 0; color:var(--navy); font-weight:600;">Trailing P/E</td>
              <td style="padding:6px 0; text-align:right;">29.75</td>
              <td style="padding:6px 0; text-align:right;">16.19</td>
              <td style="padding:6px 0; text-align:right; color:#c05040; font-weight:600;">+84%</td>
            </tr>
            <tr style="border-top:1px solid rgba(0,0,0,0.06);">
              <td style="padding:6px 0; color:var(--navy); font-weight:600;">Earnings Yield</td>
              <td style="padding:6px 0; text-align:right;">3.36%</td>
              <td style="padding:6px 0; text-align:right;">7.21%</td>
              <td style="padding:6px 0; text-align:right; color:#c05040; font-weight:600;">-53%</td>
            </tr>
            <tr style="border-top:1px solid rgba(0,0,0,0.06);">
              <td style="padding:6px 0; color:var(--navy); font-weight:600;">Dividend Yield</td>
              <td style="padding:6px 0; text-align:right;">1.13%</td>
              <td style="padding:6px 0; text-align:right;">4.22%</td>
              <td style="padding:6px 0; text-align:right; color:#c05040; font-weight:600;">-73%</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card" style="flex:0.85; margin-bottom:0; padding:14px 16px; border-left-color:#c05040;">
        <div class="card-label" style="margin-bottom:8px; color:#c05040;">WHERE WE ARE NOW</div>
        <div style="font-family:'Playfair Display',serif; font-size:34px; font-weight:900; color:#c05040; line-height:1;">CAPE 40.38</div>
        <div style="font-family:Inter; font-size:12px; color:var(--gray); margin-top:4px; line-height:1.4;">40+ bucket historically mapped to a <strong style="color:#0d2137;">-3.45%</strong> median next-10Y annualized real return.</div>
        <div style="font-family:Inter; font-size:12px; color:var(--gray); margin-top:6px; line-height:1.35;">Equivalent to roughly the <strong style="color:#0d2137;">98.8th percentile</strong> of historical CAPE readings.</div>
      </div>
      <div class="card" style="flex:0.9; margin-bottom:0; padding:14px 16px; border-left-color:#0d2137;">
        <div class="card-label" style="margin-bottom:8px; color:#0d2137;">PORTFOLIO CONSTRUCTION IMPLICATION</div>
        <div class="card-text" style="font-size:13px; line-height:1.45;">In high-starting-valuation regimes, index beta carries weaker long-horizon base rates. Allocation edge shifts to manager selection, dispersion capture, and non-index exposures that do not rely on multiple expansion.</div>
      </div>
    </div>
  </div>
  <div class="source-line">Source: Robert Shiller online data (Yale, sheet updated Sep 2023; monthly 1881-2013 start cohorts for realized 10Y forward real returns) and multpl.com valuation series (captured Monday, February 9, 2026 at 9:02 AM ET; latest close-based print 4:00 PM EST, Friday, February 6, 2026)</div>
</div>

<div class="slide" id="slide-54">
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; text-align:center; max-width:900px; margin:0 auto;">
    <div style="font-family:'Inter',sans-serif; font-size:11px; font-weight:600; letter-spacing:2.5px; text-transform:uppercase; color:var(--teal); margin-bottom:24px;">CLOSING</div>
    <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--navy); margin-bottom:48px; line-height:1.2;">What if we are right?</div>
    <div style="font-family:'Playfair Display',serif; font-size:19px; color:var(--gray); line-height:1.9; font-style:italic; border-left:4px solid var(--teal); padding:28px 36px; text-align:left; background:var(--light-blue); border-radius:4px;">
      &ldquo;I remember the spring of 1941 to this day. I realized then that a nuclear bomb was not only possible &mdash; it was inevitable. Sooner or later these ideas could not be peculiar to us. Everybody would think about them before long, and some country would put them into action. [&hellip;]<br><br>
      And there was nobody to talk to about it, I had many sleepless nights. But I did realize how very very serious it could be. And I had then to start taking sleeping pills. It was the only remedy, I&rsquo;ve never stopped since then. It&rsquo;s 28 years, and I don&rsquo;t think I&rsquo;ve missed a single night in all those 28 years.&rdquo;
    </div>
    <div style="font-family:'Inter',sans-serif; font-size:14px; color:var(--navy); margin-top:28px; font-weight:500;">James Chadwick</div>
    <div style="font-family:'Inter',sans-serif; font-size:12px; color:var(--gray); margin-top:6px; line-height:1.5; max-width:600px;">Physics Nobel Laureate and author of the 1941 British government report on the inevitability of an atomic bomb, which finally spurred the Manhattan Project into action</div>
  </div>
</div>


<div class="slide" id="slide-55">
  <div class="slide-divider">
    <div class="divider-title">APPENDIX</div>
    <div class="divider-subtitle">Supporting detail and technical reference</div>
  </div>
</div>

<div class="slide" id="slide-56">
  <div class="section-label">APPENDIX &mdash; AI INFRASTRUCTURE</div>
  <div class="slide-title">Each GPU generation unlocks a new frontier of training scale</div>
  <div class="slide-subtitle">GPT-5.3-Codex (Feb 2026) is the first frontier model fully trained on NVIDIA GB200 NVL72</div>
  <div class="chart-area"><canvas id="chart-gpu-generations"></canvas></div>
  <div class="source-line">Source: OpenAI, NVIDIA, SemiAnalysis, The Information; cluster sizes are best public estimates</div>
</div>

<div class="slide" id="slide-57">
  <div class="section-label">APPENDIX &mdash; POWER</div>
  <div class="slide-title">Interconnection queues stretch 5&ndash;7 years</div>
  <div class="slide-subtitle">The grid cannot accommodate the demand without massive new investment</div>
  <div class="chart-area" id="interconnection-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('interconnectionChart','MI_interconnection_queue.png')" title="Download as PNG">&darr;</button>
    <canvas id="interconnectionChart"></canvas>
  </div>
  <div class="source-line">Source: Lawrence Berkeley National Lab, PJM, EIA</div>
</div>

<div class="slide" id="slide-58">
  <div class="section-label">APPENDIX &mdash; SUPPLY CHAIN</div>
  <div class="slide-title">GPU supply is a packaging story, not just a wafer story</div>
  <div class="slide-subtitle">CoWoS + HBM = the second chokepoint</div>
  <div style="flex:1; min-height:0; display:flex; flex-direction:column; gap:14px; margin-top:8px;">
    <!-- GPU Package Anatomy Diagram -->
    <div style="flex:2; background:linear-gradient(135deg, #f8fafb 0%, #edf4f7 100%); border-radius:14px; padding:24px 32px; display:flex; flex-direction:column; justify-content:center; position:relative; border:1px solid rgba(42,122,140,0.12);">
      <div style="display:flex; align-items:center; justify-content:center; gap:0; position:relative;">
        <div style="position:absolute; bottom:0; left:50%; transform:translateX(-50%); width:88%; height:32px; background:linear-gradient(90deg,#b8c4ce,#8a96a0); border-radius:0 0 8px 8px; display:flex; align-items:center; justify-content:center;">
          <span style="font-family:Inter; font-size:10px; font-weight:600; color:#fff; letter-spacing:1.5px;">ORGANIC SUBSTRATE</span>
        </div>
        <div style="position:absolute; bottom:32px; left:50%; transform:translateX(-50%); width:80%; height:24px; background:linear-gradient(90deg,#2a7a8c,#3a9aac); border-radius:4px 4px 0 0; display:flex; align-items:center; justify-content:center;">
          <span style="font-family:Inter; font-size:10px; font-weight:600; color:#fff; letter-spacing:1.5px;">SILICON INTERPOSER (CoWoS)</span>
        </div>
        <div style="display:flex; align-items:flex-end; gap:8px; margin-bottom:56px; position:relative; z-index:2;">
          <div style="width:48px; height:56px; background:linear-gradient(135deg,#0d2137,#1a3a5c); border-radius:6px 6px 2px 2px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid rgba(42,122,140,0.4);">
            <span style="font-family:Inter; font-size:7px; font-weight:700; color:#fff; letter-spacing:0.5px;">HBM3e</span>
            <span style="font-family:Inter; font-size:6px; color:rgba(255,255,255,0.6);">SK Hynix</span>
          </div>
          <div style="width:48px; height:56px; background:linear-gradient(135deg,#0d2137,#1a3a5c); border-radius:6px 6px 2px 2px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid rgba(42,122,140,0.4);">
            <span style="font-family:Inter; font-size:7px; font-weight:700; color:#fff; letter-spacing:0.5px;">HBM3e</span>
            <span style="font-family:Inter; font-size:6px; color:rgba(255,255,255,0.6);">SK Hynix</span>
          </div>
          <div style="width:120px; height:80px; background:linear-gradient(135deg,#76b900,#5a9000); border-radius:8px 8px 2px 2px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid rgba(118,185,0,0.5); box-shadow:0 2px 12px rgba(118,185,0,0.15);">
            <span style="font-family:Inter; font-size:11px; font-weight:800; color:#fff; letter-spacing:1px;">GPU DIE</span>
            <span style="font-family:Inter; font-size:8px; color:rgba(255,255,255,0.8);">NVIDIA Blackwell</span>
            <span style="font-family:Inter; font-size:7px; color:rgba(255,255,255,0.6);">TSMC 4nm</span>
          </div>
          <div style="width:48px; height:56px; background:linear-gradient(135deg,#0d2137,#1a3a5c); border-radius:6px 6px 2px 2px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid rgba(42,122,140,0.4);">
            <span style="font-family:Inter; font-size:7px; font-weight:700; color:#fff; letter-spacing:0.5px;">HBM3e</span>
            <span style="font-family:Inter; font-size:6px; color:rgba(255,255,255,0.6);">SK Hynix</span>
          </div>
          <div style="width:48px; height:56px; background:linear-gradient(135deg,#0d2137,#1a3a5c); border-radius:6px 6px 2px 2px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:2px solid rgba(42,122,140,0.4);">
            <span style="font-family:Inter; font-size:7px; font-weight:700; color:#fff; letter-spacing:0.5px;">HBM3e</span>
            <span style="font-family:Inter; font-size:6px; color:rgba(255,255,255,0.6);">SK Hynix</span>
          </div>
        </div>
      </div>
      <div style="position:absolute; top:10px; left:24px; font-family:Inter; font-size:10px; font-weight:600; color:#2a7a8c; letter-spacing:1.5px;">GPU PACKAGE ANATOMY</div>
      <div style="position:absolute; top:10px; right:24px; font-family:Inter; font-size:9px; color:#8a96a0;">TSMC CoWoS-S &middot; ~100 wafer starts/mo capacity</div>
    </div>
    <div style="flex:1; display:flex; gap:14px;">
      <div class="card" style="flex:2; margin-bottom:0; padding:16px 20px;">
        <div class="card-label" style="font-size:10px;">HBM CAPACITY PER GPU &mdash; EACH GENERATION REQUIRES MORE</div>
        <div style="display:flex; align-items:center; gap:16px; margin-top:10px;">
          <div style="text-align:center; flex:1;">
            <div style="font-family:Inter; font-size:22px; font-weight:700; color:#0d2137;">80 GB</div>
            <div style="font-family:Inter; font-size:11px; color:#8a96a0; margin-top:2px;">H100 (Hopper)</div>
            <div style="font-family:Inter; font-size:9px; color:#2a7a8c;">5 &times; HBM3</div>
          </div>
          <div style="font-size:18px; color:#8a96a0;">&rarr;</div>
          <div style="text-align:center; flex:1;">
            <div style="font-family:Inter; font-size:22px; font-weight:700; color:#0d2137;">192 GB</div>
            <div style="font-family:Inter; font-size:11px; color:#8a96a0; margin-top:2px;">B200 (Blackwell)</div>
            <div style="font-family:Inter; font-size:9px; color:#2a7a8c;">8 &times; HBM3e</div>
          </div>
          <div style="font-size:18px; color:#8a96a0;">&rarr;</div>
          <div style="text-align:center; flex:1;">
            <div style="font-family:Inter; font-size:22px; font-weight:700; color:#c05040;">288 GB</div>
            <div style="font-family:Inter; font-size:11px; color:#8a96a0; margin-top:2px;">R100 (Rubin)</div>
            <div style="font-family:Inter; font-size:9px; color:#c05040;">12 &times; HBM4</div>
          </div>
        </div>
      </div>
      <div style="flex:1; display:flex; flex-direction:column; gap:10px;">
        <div class="stat-card" style="flex:1; padding:12px 16px; margin:0;">
          <div class="stat-number" style="font-size:20px;">~90%</div>
          <div class="stat-label">SK Hynix HBM3e share</div>
        </div>
        <div class="stat-card" style="flex:1; padding:12px 16px; margin:0;">
          <div class="stat-number" style="font-size:20px;">12&ndash;18 mo</div>
          <div class="stat-label">HBM allocation lead time</div>
        </div>
      </div>
    </div>
  </div>
  <div class="source-line">Source: TSMC earnings, SK Hynix disclosures, SemiAnalysis</div>
</div>


<div class="slide" id="slide-59">
  <div class="section-label">APPENDIX</div>
  <div class="slide-title">How large language models work</div>
  <div class="slide-subtitle">A simplified view of the architecture behind frontier AI systems</div>
  <div style="flex:1; display:flex; flex-direction:column; gap:14px; margin-top:10px; min-height:0;">

    <!-- Pipeline flow -->
    <div style="display:flex; gap:0; align-items:stretch; flex:0 0 auto;">
      <div style="flex:1; background:var(--light-blue); border-radius:8px 0 0 8px; padding:16px 18px; border-left:4px solid var(--teal); text-align:center;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:6px;">1. TRAINING DATA</div>
        <div style="font-family:Inter; font-size:12px; color:var(--navy); line-height:1.5;">Trillions of tokens from the internet, books, code, and licensed datasets. The model learns statistical patterns in language.</div>
      </div>
      <div style="width:2px; background:rgba(42,122,140,0.2);"></div>
      <div style="flex:1; background:var(--light-blue); padding:16px 18px; text-align:center;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:6px;">2. TRANSFORMER</div>
        <div style="font-family:Inter; font-size:12px; color:var(--navy); line-height:1.5;">Self-attention layers process all tokens in parallel, learning which words relate to which. Hundreds of billions of parameters.</div>
      </div>
      <div style="width:2px; background:rgba(42,122,140,0.2);"></div>
      <div style="flex:1; background:var(--light-blue); padding:16px 18px; text-align:center;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:6px;">3. PRE-TRAINING</div>
        <div style="font-family:Inter; font-size:12px; color:var(--navy); line-height:1.5;">Thousands of GPUs run for weeks&ndash;months. The model predicts the next token, adjusting weights across every layer. This is where the compute cost lives.</div>
      </div>
      <div style="width:2px; background:rgba(42,122,140,0.2);"></div>
      <div style="flex:1; background:var(--light-blue); padding:16px 18px; text-align:center;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:#c05040; letter-spacing:1px; margin-bottom:6px;">4. FINE-TUNING</div>
        <div style="font-family:Inter; font-size:12px; color:var(--navy); line-height:1.5;">RLHF and instruction tuning align the model to be helpful and safe. Smaller compute cost but critical for usability.</div>
      </div>
      <div style="width:2px; background:rgba(42,122,140,0.2);"></div>
      <div style="flex:1; background:var(--light-blue); border-radius:0 8px 8px 0; padding:16px 18px; text-align:center;">
        <div style="font-family:Inter; font-size:11px; font-weight:700; color:#c05040; letter-spacing:1px; margin-bottom:6px;">5. INFERENCE</div>
        <div style="font-family:Inter; font-size:12px; color:var(--navy); line-height:1.5;">Every API call or chat message runs the model forward. Generates one token at a time. This is where ongoing compute demand compounds.</div>
      </div>
    </div>

    <!-- Key concepts -->
    <div style="display:flex; gap:16px; flex:0 0 auto;">
      <div style="flex:1; background:rgba(42,122,140,0.06); border-radius:8px; padding:16px 20px; border:1px solid rgba(42,122,140,0.12);">
        <div style="font-family:Inter; font-size:12px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:6px;">SCALING LAWS</div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); line-height:1.6;">Performance improves predictably with more data, more parameters, and more compute. This is why labs keep building bigger &mdash; it keeps working.</div>
      </div>
      <div style="flex:1; background:rgba(42,122,140,0.06); border-radius:8px; padding:16px 20px; border:1px solid rgba(42,122,140,0.12);">
        <div style="font-family:Inter; font-size:12px; font-weight:700; color:var(--teal); letter-spacing:1px; margin-bottom:6px;">TRAINING vs. INFERENCE</div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); line-height:1.6;">Training happens once (massive burst). Inference happens billions of times per day and is growing. Both require GPUs, power, and cooling &mdash; but inference is the long-term demand driver.</div>
      </div>
      <div style="flex:1; background:rgba(192,80,64,0.05); border-radius:8px; padding:16px 20px; border:1px solid rgba(192,80,64,0.12);">
        <div style="font-family:Inter; font-size:12px; font-weight:700; color:#c05040; letter-spacing:1px; margin-bottom:6px;">PHYSICAL FOOTPRINT</div>
        <div style="font-family:Inter; font-size:13px; color:var(--navy); line-height:1.6;">A single frontier training run consumes enough electricity to power 10,000 US homes for a year. Inference at scale requires purpose-built data centers drawing hundreds of MW.</div>
      </div>
    </div>

    <!-- Bottom connection -->
    <div style="background:rgba(42,122,140,0.06); border-radius:8px; padding:14px 22px; border:1px solid rgba(42,122,140,0.12); flex:0 0 auto;">
      <div style="font-family:Inter; font-size:14px; color:var(--navy); line-height:1.65;">
        <strong style="color:var(--teal);">For this portfolio:</strong> You don&rsquo;t need to bet on which model wins. Every model &mdash; from every lab &mdash; needs the same physical inputs: semiconductors, copper, power, cooling. The value accrues to the supply chain, not the application layer.
      </div>
    </div>

  </div>
  <div class="source-line">Source: Vaswani et al. (2017); Kaplan et al. (2020); Epoch AI</div>
</div>

<div class="slide" id="slide-60">
  <div class="section-label">APPENDIX &mdash; COMPUTE SPEND</div>
  <div class="slide-title">AI lab compute spend is doubling every year</div>
  <div class="slide-subtitle">Every dollar here flows into chips, power, and cooling &mdash; the physical layer of the AI stack</div>
  <div class="chart-area"><canvas id="chart-ai-compute-spend"></canvas></div>
  <div class="source-line">Source: Epoch AI; The Information; company disclosures</div>
</div>

<div class="slide" id="slide-61">
  <div class="section-label">APPENDIX &mdash; COPPER</div>
  <div class="slide-title">Even if every announced project proceeds, copper faces a ~27% supply deficit by 2035</div>
  <div class="chart-area" id="copper-chart-container">
    <button class="chart-download-btn" onclick="downloadChart('copperChart','MI_copper_supply_demand.png')" title="Download as PNG">&darr;</button>
    <canvas id="copperChart"></canvas>
  </div>
  <div class="source-line">Source: IEA Global Critical Minerals Outlook 2025 (STEPS); BloombergNEF</div>
</div>

<div class="slide" id="slide-61">
  <div class="section-label">APPENDIX &mdash; UNDERWRITING</div>
  <div class="slide-title">How we underwrite</div>
  <div class="slide-subtitle">Institutional gate-based underwriting with explicit failure conditions, kill-switches, and non-negotiable risk rails.</div>
  <div style="flex:1; min-height:0; display:grid; grid-template-columns:1.2fr 0.8fr; gap:14px; margin-top:10px;">
    <div style="display:grid; grid-template-rows:repeat(4,1fr); gap:10px; min-height:0;">
      <div class="card" style="margin-bottom:0; padding:13px 15px; display:grid; grid-template-columns:74px 1fr; gap:12px; align-items:center;">
        <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--teal); line-height:1; text-align:center;">1</div>
        <div>
          <div style="font-family:Inter; font-size:20px; font-weight:700; color:var(--navy);">Structural Demand Quality</div>
          <div style="font-family:Inter; font-size:15px; color:var(--gray); margin-top:2px;">End-market growth must remain durable through an entire cycle.</div>
          <div style="font-family:Inter; font-size:14px; color:#c05040; margin-top:4px;">Fail if demand depends on one-off policy, subsidy, or single-buyer concentration.</div>
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:13px 15px; display:grid; grid-template-columns:74px 1fr; gap:12px; align-items:center;">
        <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--teal); line-height:1; text-align:center;">2</div>
        <div>
          <div style="font-family:Inter; font-size:20px; font-weight:700; color:var(--navy);">Supply-Constraint Persistence</div>
          <div style="font-family:Inter; font-size:15px; color:var(--gray); margin-top:2px;">Scarcity duration must exceed what current valuation already discounts.</div>
          <div style="font-family:Inter; font-size:14px; color:#c05040; margin-top:4px;">Fail if supply response can normalize before demand compounding peaks.</div>
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:13px 15px; display:grid; grid-template-columns:74px 1fr; gap:12px; align-items:center;">
        <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--teal); line-height:1; text-align:center;">3</div>
        <div>
          <div style="font-family:Inter; font-size:20px; font-weight:700; color:var(--navy);">Balance-Sheet &amp; Liquidity Integrity</div>
          <div style="font-family:Inter; font-size:15px; color:var(--gray); margin-top:2px;">No plausible forced-seller path under adverse rates, spreads, or volumes.</div>
          <div style="font-family:Inter; font-size:14px; color:#c05040; margin-top:4px;">Fail if covenant stress, refinancing fragility, or liquidity mismatch is material.</div>
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:13px 15px; display:grid; grid-template-columns:74px 1fr; gap:12px; align-items:center;">
        <div style="font-family:'Playfair Display',serif; font-size:44px; font-weight:900; color:var(--teal); line-height:1; text-align:center;">4</div>
        <div>
          <div style="font-family:Inter; font-size:20px; font-weight:700; color:var(--navy);">Entry Multiple &amp; Exit Optionality</div>
          <div style="font-family:Inter; font-size:15px; color:var(--gray); margin-top:2px;">Return profile must clear hurdle rates without multiple expansion heroics.</div>
          <div style="font-family:Inter; font-size:14px; color:#c05040; margin-top:4px;">Fail if the thesis requires precise timing to crystallize value.</div>
        </div>
      </div>
    </div>
    <div style="display:grid; grid-template-rows:1fr 1fr 1fr; gap:10px; min-height:0;">
      <div class="card" style="margin-bottom:0; padding:14px 15px; border-left-color:#2a7a8c;">
        <div class="card-label" style="font-size:12px; color:var(--teal); margin-bottom:8px;">IC DECISION STATES</div>
        <div style="font-family:Inter; font-size:16px; color:var(--navy); line-height:1.55;">
          <strong>Go:</strong> all gates pass and no trigger is active.<br>
          <strong>Watch:</strong> thesis intact, but one gate is degrading.<br>
          <strong>Pass / Exit:</strong> gate break persists beyond tolerance.
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:14px 15px; border-left-color:#c05040;">
        <div class="card-label" style="font-size:12px; color:#c05040; margin-bottom:8px;">KILL-SWITCH PROTOCOL</div>
        <div style="font-family:Inter; font-size:15px; color:var(--navy); line-height:1.55;">
          Structural demand downgrade.<br>
          Scarcity unwind faster than underwriting case.<br>
          Balance-sheet stress above approved limits.
        </div>
      </div>
      <div class="card" style="margin-bottom:0; padding:14px 15px; border-left-color:#0d2137;">
        <div class="card-label" style="font-size:12px; color:#0d2137; margin-bottom:8px;">NON-NEGOTIABLE RISK RAILS</div>
        <div style="font-family:Inter; font-size:15px; color:var(--navy); line-height:1.55;">
          Max single position: <strong>10% NAV</strong>.<br>
          Margin / borrowing: <strong>prohibited</strong>.<br>
          Outright shorts: <strong>prohibited</strong>.<br>
          Mandatory re-underwrite on material signal break.
        </div>
      </div>
    </div>
  </div>
  <div class="source-line">Source: Internal IC underwriting playbook (v2026.02)</div>
</div>

</div><!-- end .presentation -->

<!-- Progress bar -->
<div class="progress-bar" id="progressBar" style="width:1.82%;"></div>

<!-- Section navigation -->
<div class="section-nav" id="sectionNav">
  <button class="section-nav-btn active-section" onclick="showSlide(1)" data-from="1" data-to="5">Overview</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(6)" data-from="6" data-to="6">Thesis</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(7)" data-from="7" data-to="16">Macro Shift</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(17)" data-from="17" data-to="26">Real Assets</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(27)" data-from="27" data-to="40">AI Infra</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(42)" data-from="42" data-to="46">Compounding</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(47)" data-from="47" data-to="50">Portfolio</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(51)" data-from="51" data-to="55">Fund Terms</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(56)" data-from="56" data-to="56">Close</button>
  <div class="section-nav-sep"></div>
  <button class="section-nav-btn" onclick="showSlide(57)" data-from="57" data-to="63">Appendix</button>
</div>

<!-- Controls -->
<div class="controls">
  <button class="fs-btn" onclick="toggleFullscreen()" title="Press F">&#9723; Fullscreen</button>
  <div class="slide-counter" id="slideCounter">1 / 63</div>
</div>

<script>
// ==========================
// PRESENTATION ENGINE
// ==========================
const TOTAL_SLIDES = 63;
let currentSlide = 1;
let isAnimating = false;

function showSlide(n) {
  if (n < 1 || n > TOTAL_SLIDES || isAnimating) return;
  if (n === currentSlide) return;
  isAnimating = true;

  const oldSlide = document.getElementById('slide-' + currentSlide);
  const newSlide = document.getElementById('slide-' + n);

  oldSlide.classList.remove('active');
  oldSlide.classList.add('fade-out');

  newSlide.style.display = 'flex';
  newSlide.classList.add('fade-in');

  setTimeout(() => {
    oldSlide.classList.remove('fade-out');
    oldSlide.style.display = 'none';
    oldSlide.style.opacity = '0';

    newSlide.classList.remove('fade-in');
    newSlide.classList.add('active');
    newSlide.style.opacity = '1';

    currentSlide = n;
    document.getElementById('slideCounter').textContent = currentSlide + ' / ' + TOTAL_SLIDES;
    // Update progress bar
    document.getElementById('progressBar').style.width = ((currentSlide / TOTAL_SLIDES) * 100) + '%';
    // Update section nav highlighting
    var btns = document.querySelectorAll('.section-nav-btn');
    btns.forEach(function(btn) {
      var from = parseInt(btn.getAttribute('data-from'));
      var to = parseInt(btn.getAttribute('data-to'));
      if (currentSlide >= from && currentSlide <= to) {
        btn.classList.add('active-section');
      } else {
        btn.classList.remove('active-section');
      }
    });
    isAnimating = false;
  }, 400);
}

function nextSlide() {
  var n = currentSlide + 1;
  while (n <= TOTAL_SLIDES && !document.getElementById('slide-' + n)) n++;
  showSlide(n);
}
function prevSlide() {
  var n = currentSlide - 1;
  while (n >= 1 && !document.getElementById('slide-' + n)) n--;
  showSlide(n);
}

function toggleFullscreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
}

document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') { e.preventDefault(); nextSlide(); }
  else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') { e.preventDefault(); prevSlide(); }
  else if (e.key === 'f' || e.key === 'F') { toggleFullscreen(); }
});

// Show section nav when mouse near bottom
var navTimer;
document.addEventListener('mousemove', function(e) {
  var nav = document.getElementById('sectionNav');
  if (e.clientY > window.innerHeight - 80) {
    nav.classList.add('visible');
    clearTimeout(navTimer);
  } else {
    clearTimeout(navTimer);
    navTimer = setTimeout(function() { nav.classList.remove('visible'); }, 800);
  }
});

// ==========================
// CHART DOWNLOAD
// ==========================
function downloadChart(canvasId, filename) {
  const canvas = document.getElementById(canvasId);
  const link = document.createElement('a');
  link.download = filename;
  link.href = canvas.toDataURL('image/png');
  link.click();
}

// ==========================
// CHARTS: POLICY UNCERTAINTY 2x2 GRID (SLIDE 15)
// ==========================
(function() {
  var qLabels = ['2000-Q1','2000-Q2','2000-Q3','2000-Q4','2001-Q1','2001-Q2','2001-Q3','2001-Q4','2002-Q1','2002-Q2','2002-Q3','2002-Q4','2003-Q1','2003-Q2','2003-Q3','2003-Q4','2004-Q1','2004-Q2','2004-Q3','2004-Q4','2005-Q1','2005-Q2','2005-Q3','2005-Q4','2006-Q1','2006-Q2','2006-Q3','2006-Q4','2007-Q1','2007-Q2','2007-Q3','2007-Q4','2008-Q1','2008-Q2','2008-Q3','2008-Q4','2009-Q1','2009-Q2','2009-Q3','2009-Q4','2010-Q1','2010-Q2','2010-Q3','2010-Q4','2011-Q1','2011-Q2','2011-Q3','2011-Q4','2012-Q1','2012-Q2','2012-Q3','2012-Q4','2013-Q1','2013-Q2','2013-Q3','2013-Q4','2014-Q1','2014-Q2','2014-Q3','2014-Q4','2015-Q1','2015-Q2','2015-Q3','2015-Q4','2016-Q1','2016-Q2','2016-Q3','2016-Q4','2017-Q1','2017-Q2','2017-Q3','2017-Q4','2018-Q1','2018-Q2','2018-Q3','2018-Q4','2019-Q1','2019-Q2','2019-Q3','2019-Q4','2020-Q1','2020-Q2','2020-Q3','2020-Q4','2021-Q1','2021-Q2','2021-Q3','2021-Q4','2022-Q1','2022-Q2','2022-Q3','2022-Q4','2023-Q1','2023-Q2','2023-Q3','2023-Q4','2024-Q1','2024-Q2','2024-Q3','2024-Q4','2025-Q1','2025-Q2','2025-Q3','2025-Q4','2026-Q1'];

  var tpuData = [70.1,121.1,60.9,102.6,55.5,51.8,85.8,112.1,70.7,49.0,76.5,42.4,58.4,35.5,49.4,91.2,86.1,50.5,32.8,45.6,20.8,65.5,60.0,24.9,28.9,29.4,33.4,27.9,31.1,21.5,34.1,37.8,80.5,59.4,33.3,62.0,49.8,25.3,18.9,20.9,54.8,40.8,62.2,89.0,60.9,58.0,106.4,70.0,51.9,33.1,51.4,42.5,28.0,37.3,56.9,20.1,131.9,20.8,21.6,18.7,25.7,77.1,30.6,36.5,39.4,130.3,121.6,299.7,292.3,109.2,86.6,109.6,280.5,478.2,565.8,509.4,436.8,832.2,1155.5,764.0,434.9,152.8,112.4,219.8,57.5,52.0,20.1,39.6,73.9,73.4,90.8,63.5,70.9,60.6,21.4,23.2,103.3,80.4,159.2,971.8,3407.2,5757.7,3288.7,2921.4,2204.7];

  var gprData = [59.4,64.3,50.4,55.6,54.6,61.0,207.9,351.8,156.9,156.7,141.6,169.0,268.3,187.9,130.4,118.6,122.4,136.0,141.8,117.5,100.1,88.8,128.6,88.6,94.4,92.3,132.0,97.5,93.8,89.1,96.7,95.4,80.0,77.3,88.9,78.5,75.2,85.5,83.2,88.5,82.1,91.4,77.2,86.0,102.1,93.6,83.1,81.6,86.9,84.0,75.7,79.3,82.7,87.3,88.5,73.7,88.9,91.8,135.6,84.9,109.4,88.1,96.0,130.3,110.6,87.9,106.0,90.3,105.3,116.3,119.0,88.9,89.6,117.6,99.3,87.7,88.9,97.4,95.8,81.7,98.6,69.7,70.8,70.1,76.7,85.1,76.2,90.3,224.6,154.7,127.3,123.7,110.2,108.6,102.4,165.6,146.7,135.9,121.2,134.0,141.4,175.9,131.9,130.6,163.7];

  var fiscalData = [55.3,43.7,35.9,92.0,143.2,86.4,125.2,191.8,114.0,76.6,98.9,133.9,249.7,146.4,97.0,79.5,105.3,63.4,59.2,83.0,65.7,50.6,41.1,46.5,47.5,46.8,32.0,40.5,42.3,44.3,36.8,52.0,132.8,79.5,91.8,191.1,226.9,109.5,89.0,103.4,143.4,114.4,211.8,255.8,139.7,128.8,294.7,163.5,129.4,141.9,203.2,337.5,237.4,82.1,94.4,148.5,85.4,60.3,53.9,68.0,69.8,57.7,52.1,48.2,66.3,54.4,59.0,125.7,132.0,101.9,92.3,118.8,104.5,99.9,85.6,103.5,115.8,101.0,106.2,87.5,165.1,364.4,249.9,243.5,184.5,134.1,125.9,130.3,121.8,113.5,95.9,108.8,124.1,159.0,71.3,88.7,91.4,83.5,91.7,181.3,428.0,600.6,381.7,378.8,438.2];

  var vixData = [24.2,23.5,22.0,27.6,27.1,24.8,33.6,28.7,22.1,24.3,33.6,30.2,28.8,22.8,19.7,17.5,16.6,17.4,15.8,14.4,13.3,13.7,12.7,12.8,12.7,14.8,13.0,11.6,13.1,14.9,20.3,22.5,26.2,21.1,26.3,55.3,44.8,30.5,25.1,22.3,20.9,28.4,24.6,19.4,18.2,17.2,33.1,28.8,17.5,20.2,15.8,17.1,13.5,15.1,14.5,13.7,14.4,11.6,13.1,15.7,15.6,13.5,20.5,16.1,19.0,15.6,12.8,13.7,11.7,10.8,10.6,10.2,17.8,14.2,12.9,21.8,15.9,15.4,16.2,13.8,40.1,31.1,26.2,24.8,22.3,18.3,19.2,19.8,25.6,28.1,25.4,23.1,18.7,15.1,15.4,14.8,13.7,13.2,17.1,17.8,22.5,28.3,24.1,21.4,22.0];

  function miniChart(canvasId, data, color, bgAlpha, baselineVal, baselineLabel) {
    var c = document.getElementById(canvasId);
    if (!c) return;
    var annotations = {};
    if (baselineVal) {
      annotations.baseline = {
        type: 'line', yMin: baselineVal, yMax: baselineVal,
        borderColor: 'rgba(90,106,120,0.35)', borderWidth: 1, borderDash: [4, 3],
        label: { display: true, content: baselineLabel || '', position: 'start',
          font: { family: 'Inter', size: 8 }, backgroundColor: 'transparent', color: '#8a96a0', padding: { top: 0, bottom: 0 } }
      };
    }
    new Chart(c, {
      type: 'line',
      data: {
        labels: qLabels,
        datasets: [{
          data: data,
          borderColor: color,
          backgroundColor: 'rgba(' + bgAlpha + ')',
          borderWidth: 1.5,
          pointRadius: 0,
          pointHoverRadius: 4,
          pointBackgroundColor: color,
          pointBorderColor: '#fff',
          pointBorderWidth: 1,
          pointHitRadius: 6,
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true, maintainAspectRatio: false,
        layout: { padding: { top: 2, right: 4, bottom: 0, left: 0 } },
        interaction: { mode: 'index', intersect: false },
        scales: {
          x: {
            grid: { display: false },
            ticks: {
              font: { family: 'Inter', size: 9 }, color: '#8a96a0', maxTicksLimit: 6,
              callback: function(v) { var l = this.getLabelForValue(v); return l ? l.substring(0, 4) : ''; }
            }
          },
          y: {
            grid: { color: 'rgba(0,0,0,0.04)', drawBorder: false },
            ticks: { font: { family: 'Inter', size: 9 }, color: '#8a96a0', maxTicksLimit: 5 },
            beginAtZero: true
          }
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#0d2137',
            titleFont: { family: 'Inter', size: 10 },
            bodyFont: { family: 'Inter', size: 11, weight: '600' },
            callbacks: {
              title: function(items) { return items[0].label; },
              label: function(ctx) { return ctx.parsed.y.toLocaleString(); }
            }
          },
          annotation: { annotations: annotations }
        }
      }
    });
  }

  miniChart('tpuChart', tpuData, '#c05040', '192,80,64,0.1', 100, 'Avg (100)');
  miniChart('gprChart', gprData, '#0d2137', '13,33,55,0.1', 100, 'Avg (100)');
  miniChart('fiscalChart', fiscalData, '#2a7a8c', '42,122,140,0.1', 100, 'Avg (100)');
  miniChart('vixChart', vixData, '#8b6914', '139,105,20,0.1', 20, 'Avg (20)');
})();

// ==========================
// CHART: FLORIDA NET DOMESTIC MIGRATION (SLIDE 5)
// ==========================
(function() {
  var c = document.getElementById('floridaMigrationChart');
  if (!c) return;
  new Chart(c, {
    type: 'bar',
    data: {
      labels: ['2015','2016','2017','2018','2019','2020','2021','2022','2023','2024'],
      datasets: [{
        label: 'Net domestic migration (thousands)',
        data: [235, 250, 290, 322, 290, 210, 330, 444, 406, 380],
        backgroundColor: function(ctx) {
          return ctx.dataIndex >= 7 ? 'rgba(42,122,140,0.85)' : 'rgba(42,122,140,0.45)';
        },
        borderColor: '#2a7a8c',
        borderWidth: 1,
        borderRadius: 4,
        barPercentage: 0.7
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: { padding: { top: 8, right: 4, bottom: 0, left: 4 } },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 12, weight: '600' },
          callbacks: { label: function(ctx) { return '+' + ctx.parsed.y + 'K net migrants'; } }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#8a96a0' }
        },
        y: {
          grid: { color: 'rgba(0,0,0,0.04)' },
          ticks: {
            font: { family: 'Inter', size: 10 }, color: '#8a96a0',
            callback: function(v) { return v + 'K'; }
          },
          beginAtZero: true
        }
      }
    }
  });
})();

// ==========================
// CHART: NOI SURPLUS vs BALLOON (SLIDE 5)
// ==========================
(function() {
  var c = document.getElementById('noiDebtChart');
  if (!c) return;

  // $20M property, 6% cap rate, 55% LTV refi, 5.5% rate, 30-yr amort, 1.5% NOI escalation
  var propVal = 20000000;
  var capRate = 0.06;
  var ltv = 0.55;
  var loanAmt = propVal * ltv; // $11M
  var rate = 0.055;
  var monthlyRate = rate / 12;
  var amortMonths = 360;
  var annualPayment = loanAmt * (monthlyRate * Math.pow(1 + monthlyRate, amortMonths)) / (Math.pow(1 + monthlyRate, amortMonths) - 1) * 12;
  var treasuryYield = 0.035;

  var labels = [];
  var noiData = [];
  var debtServiceData = [];
  var cumulativeSurplus = [];
  var cumSurplus = 0;

  for (var yr = 1; yr <= 10; yr++) {
    labels.push('Yr ' + yr);
    var noi = propVal * capRate * Math.pow(1.015, yr - 1);
    var surplus = noi - annualPayment;
    cumSurplus = cumSurplus * (1 + treasuryYield) + surplus;
    noiData.push(Math.round(noi / 1000));
    debtServiceData.push(Math.round(annualPayment / 1000));
    cumulativeSurplus.push(Math.round(cumSurplus / 1000));
  }

  // Balloon balance after 120 months of 30-yr amort
  var balloon = loanAmt * (Math.pow(1 + monthlyRate, amortMonths) - Math.pow(1 + monthlyRate, 120)) / (Math.pow(1 + monthlyRate, amortMonths) - 1);
  var balloonK = Math.round(balloon / 1000);

  new Chart(c, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'NOI',
          data: noiData,
          backgroundColor: 'rgba(42,122,140,0.7)',
          borderColor: '#2a7a8c',
          borderWidth: 1,
          borderRadius: 3,
          barPercentage: 0.4,
          categoryPercentage: 0.8,
          order: 2
        },
        {
          label: 'Debt Service',
          data: debtServiceData,
          backgroundColor: 'rgba(192,80,64,0.5)',
          borderColor: '#c05040',
          borderWidth: 1,
          borderRadius: 3,
          barPercentage: 0.4,
          categoryPercentage: 0.8,
          order: 3
        },
        {
          label: 'Cumulative Surplus (at 3.5%)',
          data: cumulativeSurplus,
          type: 'line',
          borderColor: '#0d2137',
          backgroundColor: 'transparent',
          borderWidth: 2.5,
          pointRadius: 3,
          pointBackgroundColor: '#0d2137',
          pointBorderColor: '#fff',
          pointBorderWidth: 1.5,
          tension: 0.3,
          yAxisID: 'y1',
          order: 1
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: { padding: { top: 8, right: 8, bottom: 0, left: 4 } },
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          display: true, position: 'top', align: 'end',
          labels: { usePointStyle: true, pointStyle: 'circle', font: { family: 'Inter', size: 9 }, color: '#5a6a78', padding: 8, boxWidth: 8 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 10 },
          bodyFont: { family: 'Inter', size: 11, weight: '600' },
          callbacks: { label: function(ctx) { return ctx.dataset.label + ': $' + ctx.parsed.y + 'K'; } }
        },
        annotation: {
          annotations: {
            balloonLine: {
              type: 'line', yMin: balloonK, yMax: balloonK, yScaleID: 'y1',
              borderColor: 'rgba(192,80,64,0.5)', borderWidth: 1.5, borderDash: [6, 4],
              label: {
                display: true, content: 'Balloon: $' + (balloon / 1000000).toFixed(1) + 'M',
                position: 'start', backgroundColor: 'rgba(192,80,64,0.08)', color: '#c05040',
                font: { family: 'Inter', size: 9, weight: '600' }, padding: { top: 2, bottom: 2, left: 6, right: 6 }
              }
            }
          }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#8a96a0' }
        },
        y: {
          position: 'left',
          grid: { color: 'rgba(0,0,0,0.04)' },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#8a96a0', callback: function(v) { return '$' + v + 'K'; } },
          title: { display: false }
        },
        y1: {
          position: 'right',
          grid: { display: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: 'rgba(13,33,55,0.5)', callback: function(v) { return '$' + v + 'K'; } },
          title: { display: false },
          min: 0
        }
      }
    }
  });
})();

// ==========================
// CHART: CAPITAL STRUCTURE DONUT (SLIDE 2)
// ==========================
(function() {
  var c = document.getElementById('chart-capital-split');
  if (!c) return;
  new Chart(c, {
    type: 'doughnut',
    data: {
      labels: ['Real Estate (~45%)', 'Structural Long Portfolio (~55%)'],
      datasets: [{
        data: [45, 55],
        backgroundColor: ['#2a7a8c', '#0d2137'],
        borderColor: '#ffffff',
        borderWidth: 3,
        hoverOffset: 6
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: true,
      cutout: '55%',
      plugins: {
        legend: {
          position: 'bottom',
          labels: { font: { family: 'Inter', size: 14 }, color: '#0d2137', padding: 16, usePointStyle: true, pointStyle: 'circle' }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 },
          callbacks: { label: function(ctx) { return ctx.label + ': ' + ctx.parsed + '%'; } }
        }
      }
    },
    plugins: [{
      id: 'donutCenter',
      beforeDraw: function(chart) {
        var w = chart.width, h = chart.height, ctx2 = chart.ctx;
        ctx2.save();
        ctx2.font = '700 38px Playfair Display';
        ctx2.fillStyle = '#0d2137';
        ctx2.textAlign = 'center';
        ctx2.textBaseline = 'middle';
        var centerY = (chart.chartArea.top + chart.chartArea.bottom) / 2;
        ctx2.fillText('$20M', w / 2, centerY - 14);
        ctx2.font = '400 15px Inter';
        ctx2.fillStyle = '#5a6a78';
        ctx2.fillText('LP Capital', w / 2, centerY + 20);
        ctx2.restore();
      }
    }]
  });
})();

// ==========================
// CHART: INTERACTIVE SCENARIO ANALYSIS (SLIDE 4)
// ==========================
(function() {
  var canvas = document.getElementById('chart-scenario-nav');
  if (!canvas) return;
  var sRE = document.getElementById('slider-re');
  var sAlpha = document.getElementById('slider-alpha');
  var sLoan = document.getElementById('slider-loan');
  var sCap = document.getElementById('slider-cap');
  if (!sRE || !sAlpha || !sLoan || !sCap) return;

  function calc(exitCap, slReturn, loanR, entryCap) {
    var lp = 20, prop = 20, loan = prop * 0.55, costs = 0.82;
    var sl0 = loan - costs, feeRate = 0.02, tRate = 0.04, noiGr = 0.02;
    var noi0 = prop * entryCap; // Year 1 NOI from entry cap rate
    var mr = loanR / 12, np = 360;
    var mp = loan * mr * Math.pow(1 + mr, np) / (Math.pow(1 + mr, np) - 1);
    var aDS = mp * 12;
    var navH = [], reH = [], slH = [];
    var slV = sl0, cash = 0, lb = loan;
    navH.push(prop + slV + cash - lb);
    reH.push(prop - lb);
    slH.push(slV + cash);
    for (var y = 1; y <= 10; y++) {
      var noiY = noi0 * Math.pow(1 + noiGr, y); // NOI escalates 2%/yr
      var exNOI = Math.max(0, noiY - aDS);
      cash = cash * (1 + tRate) + exNOI;
      var py = y * 12;
      lb = loan * (Math.pow(1 + mr, np) - Math.pow(1 + mr, py)) / (Math.pow(1 + mr, np) - 1);
      // Interim RE value = current NOI / entry cap rate
      var reV = noiY / entryCap;
      var bNAV = reV + slV + cash - lb;
      var fee = (y <= 5) ? (lp * feeRate) : (Math.max(0, bNAV) * feeRate);
      slV = slV * (1 + slReturn) - fee;
      if (slV < 0) slV = 0;
      // Year 10: use exit cap rate for property sale valuation
      var chartReV = (y === 10) ? (noiY / exitCap) : reV;
      navH.push(chartReV + slV + cash - lb);
      reH.push(chartReV - lb);
      slH.push(slV + cash);
    }
    // Exit proceeds at Year 10
    var noi10 = noi0 * Math.pow(1 + noiGr, 10);
    var exitReV = noi10 / exitCap;
    var total = exitReV + slV + cash - lb;
    var profit = total - lp;
    var hurdle = lp * (Math.pow(1.09, 10) - 1);
    var carry = 0;
    if (profit > hurdle) {
      var ex = profit - hurdle;
      var cu = Math.min(ex, hurdle * 0.25);
      carry = cu + Math.max(0, ex - cu) * 0.20;
    }
    var grossMoic = total / lp;
    var grossIrr = Math.pow(Math.max(0.01, total) / lp, 0.1) - 1;
    var dist = total - carry;
    var lProfit = dist - lp;
    var moic = dist / lp;
    var irr = Math.pow(Math.max(0.01, dist) / lp, 0.1) - 1;
    return { navH: navH, reH: reH, alphaH: slH, irr: irr, moic: moic, dist: dist, profit: lProfit, grossMoic: grossMoic, grossIrr: grossIrr, carry: carry };
  }

  var chart = new Chart(canvas, {
    type: 'line',
    data: {
      labels: ['Yr 0','Yr 1','Yr 2','Yr 3','Yr 4','Yr 5','Yr 6','Yr 7','Yr 8','Yr 9','Yr 10'],
      datasets: [
        { label: 'Total NAV', data: [], borderColor: '#0d2137', backgroundColor: 'rgba(13,33,55,0.06)', borderWidth: 2.5, tension: 0.3, fill: true, pointRadius: 4, pointBackgroundColor: '#0d2137' },
        { label: 'RE Equity', data: [], borderColor: '#2a7a8c', backgroundColor: 'rgba(42,122,140,0.04)', borderWidth: 2, tension: 0.3, fill: true, pointRadius: 3, pointBackgroundColor: '#2a7a8c' },
        { label: 'Structural Long + Cash', data: [], borderColor: '#e67e22', backgroundColor: 'rgba(230,126,34,0.04)', borderWidth: 2, tension: 0.3, fill: true, pointRadius: 3, pointBackgroundColor: '#e67e22' }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: { ticks: { font: { family: 'Inter', size: 11 }, color: '#5a6a78' }, grid: { display: false } },
        y: {
          beginAtZero: true,
          ticks: { callback: function(v) { return '$' + v.toFixed(0) + 'M'; }, font: { family: 'Inter', size: 11 }, color: '#5a6a78' },
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          title: { display: true, text: 'Value ($M)', font: { family: 'Inter', size: 11, weight: 500 }, color: '#5a6a78' }
        }
      },
      plugins: {
        legend: { position: 'top', align: 'end', labels: { usePointStyle: true, pointStyle: 'circle', font: { family: 'Inter', size: 11 }, padding: 16, color: '#0d2137' } },
        tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 },
          callbacks: { label: function(ctx) { return ctx.dataset.label + ': $' + ctx.parsed.y.toFixed(1) + 'M'; } }
        }
      }
    }
  });

  function update() {
    var exitCap = parseFloat(sRE.value) / 100;
    var sl = parseFloat(sAlpha.value) / 100;
    var lo = parseFloat(sLoan.value) / 100;
    var entryCap = parseFloat(sCap.value) / 100;
    document.getElementById('val-re').textContent = parseFloat(sRE.value).toFixed(1) + '%';
    document.getElementById('val-alpha').textContent = parseFloat(sAlpha.value).toFixed(1) + '%';
    document.getElementById('val-loan').textContent = parseFloat(sLoan.value).toFixed(1) + '%';
    document.getElementById('val-cap').textContent = parseFloat(sCap.value).toFixed(1) + '%';
    var r = calc(exitCap, sl, lo, entryCap);
    chart.data.datasets[0].data = r.navH;
    chart.data.datasets[1].data = r.reH;
    chart.data.datasets[2].data = r.alphaH;
    chart.update('none');
    document.getElementById('metric-gross-irr').textContent = (r.grossIrr * 100).toFixed(1) + '%';
    document.getElementById('metric-gross-moic').innerHTML = r.grossMoic.toFixed(2) + '&times;';
    document.getElementById('metric-irr').textContent = (r.irr * 100).toFixed(1) + '%';
    document.getElementById('metric-moic').innerHTML = r.moic.toFixed(2) + '&times;';
    document.getElementById('metric-profit').textContent = '$' + r.profit.toFixed(1) + 'M';
    document.getElementById('metric-carry').textContent = '$' + r.carry.toFixed(1) + 'M';
  }

  sRE.addEventListener('input', update);
  sAlpha.addEventListener('input', update);
  sLoan.addEventListener('input', update);
  sCap.addEventListener('input', update);
  update();
})();

// ==========================
// CHART: CAPITAL DEPLOYMENT WATERFALL (SLIDE 3)
// ==========================
(function() {
  var c = document.getElementById('chart-capital-waterfall');
  if (!c) return;

  var labels = ['LP Capital', 'Property\nAcquisition', 'Cash-Out\nRefi (55%)', 'Upfront\nCosts', 'Structural\nLong Portfolio'];

  // Waterfall: base (transparent spacer) + increase (teal) + decrease (coral) + total (navy)
  new Chart(c, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'base',
          data: [0, 0, 0, 10.18, 0],
          backgroundColor: 'transparent',
          borderWidth: 0,
          barPercentage: 0.55
        },
        {
          label: 'increase',
          data: [20, 0, 11, 0, 0],
          backgroundColor: '#2a7a8c',
          borderColor: '#2a7a8c',
          borderWidth: 0,
          barPercentage: 0.55,
          borderRadius: 3
        },
        {
          label: 'decrease',
          data: [0, 20, 0, 0.82, 0],
          backgroundColor: '#c05040',
          borderColor: '#c05040',
          borderWidth: 0,
          barPercentage: 0.55,
          borderRadius: 3
        },
        {
          label: 'total',
          data: [0, 0, 0, 0, 10.18],
          backgroundColor: '#0d2137',
          borderColor: '#0d2137',
          borderWidth: 0,
          barPercentage: 0.55,
          borderRadius: 3
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 30, right: 20, bottom: 4, left: 10}},
      scales: {
        x: {
          stacked: true,
          ticks: {
            font: {family: 'Inter', size: 12, weight: 500},
            color: '#0d2137',
            maxRotation: 0,
            callback: function(value, index) {
              var labels = ['LP Capital', ['Property', 'Acquisition'], ['Cash-Out', 'Refi (55%)'], ['Upfront', 'Costs'], ['Structural', 'Long Portfolio']];
              return labels[index];
            }
          },
          grid: {display: false}
        },
        y: {
          stacked: true,
          beginAtZero: true,
          max: 24,
          ticks: {
            callback: function(v) { return '$' + v + 'M'; },
            stepSize: 4,
            font: {family: 'Inter', size: 11},
            color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Capital ($M)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      },
      plugins: {
        legend: {display: false},
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: {family: 'Inter', size: 11},
          bodyFont: {family: 'Inter', size: 11},
          filter: function(item) { return item.dataset.label !== 'base'; },
          callbacks: {
            label: function(ctx) {
              if (ctx.dataset.label === 'base') return null;
              var v = ctx.parsed.y;
              var lbl = ctx.dataset.label === 'decrease' ? 'Outflow' : (ctx.dataset.label === 'increase' ? 'Inflow' : 'Net');
              return lbl + ': $' + v.toFixed(2) + 'M';
            }
          }
        }
      }
    },
    plugins: [{
      id: 'waterfallLabels',
      afterDatasetsDraw: function(chart) {
        var ctx2 = chart.ctx;
        ctx2.save();
        ctx2.font = '600 13px Inter';
        ctx2.textAlign = 'center';
        ctx2.textBaseline = 'bottom';

        var vals = [
          {ds: 1, idx: 0, v: '$20.0M', color: '#2a7a8c'},
          {ds: 2, idx: 1, v: '($20.0M)', color: '#c05040'},
          {ds: 1, idx: 2, v: '+$11.0M', color: '#2a7a8c'},
          {ds: 2, idx: 3, v: '($0.82M)', color: '#c05040'},
          {ds: 3, idx: 4, v: '$10.18M', color: '#0d2137'}
        ];

        vals.forEach(function(item) {
          var meta = chart.getDatasetMeta(item.ds);
          var bar = meta.data[item.idx];
          if (!bar) return;
          ctx2.fillStyle = item.color;
          ctx2.fillText(item.v, bar.x, bar.y - 6);
        });

        ctx2.restore();
      }
    }]
  });
})();

// ==========================
// CHART: TERM PREMIUM (SLIDE 7)
// ==========================
(function() {
  const rawData = {
    2000: [1.6246,1.5368,1.3973,1.2581,1.4373,1.2737,1.1886,1.0665,1.0635,0.9808,0.9407,0.7762],
    2001: [0.8731,0.9315,0.9222,1.1409,1.3282,1.3201,1.2849,1.1985,1.2002,1.222,1.3372,1.6529],
    2002: [1.626,1.5514,1.7344,1.6933,1.6379,1.4987,1.3467,1.1278,0.9052,0.9421,1.0708,1.0772],
    2003: [1.0733,0.9915,0.9308,1.0097,0.7824,0.6613,1.0156,1.3159,1.2096,1.2033,1.2234,1.2105],
    2004: [1.1353,1.0965,0.94,1.2435,1.452,1.4044,1.2448,1.1007,0.9661,0.923,0.9157,0.8994],
    2005: [0.8722,0.8068,0.9567,0.8538,0.7343,0.6378,0.679,0.6847,0.6396,0.735,0.7542,0.7046],
    2006: [0.6126,0.6686,0.7262,0.8297,0.8666,0.8448,0.7989,0.6892,0.6345,0.6239,0.5441,0.5393],
    2007: [0.6331,0.6106,0.5261,0.6041,0.6543,0.8777,0.7921,0.7279,0.6958,0.7072,0.6276,0.6524],
    2008: [0.5028,0.6598,0.676,0.7918,0.8623,0.9536,0.9157,0.829,0.8035,1.0292,0.998,0.496],
    2009: [0.5336,0.6958,0.6442,0.6536,0.8529,1.1386,1.0274,1.0586,0.9523,0.9302,0.9195,0.9812],
    2010: [1.0681,1.0207,1.0244,1.0862,0.8671,0.7559,0.6147,0.4225,0.3939,0.2986,0.3972,0.7314],
    2011: [0.7807,0.9066,0.8249,0.8658,0.6912,0.5593,0.5623,0.1898,0.0428,0.1371,0.0541,0.0323],
    2012: [0.0091,-0.0135,0.1055,0.0377,-0.09,-0.1712,-0.2278,-0.1485,-0.1494,-0.138,-0.1753,-0.1455],
    2013: [-0.0487,-0.011,-0.0265,-0.1227,-0.033,0.1951,0.3589,0.4489,0.5016,0.3691,0.4011,0.515],
    2014: [0.5288,0.4406,0.4711,0.489,0.4079,0.4374,0.4241,0.3742,0.4464,0.3189,0.3403,0.289],
    2015: [0.1211,0.1751,0.2042,0.1249,0.2687,0.3567,0.3238,0.23,0.2321,0.1763,0.2804,0.2432],
    2016: [0.1491,-0.0309,0.0375,-0.0104,-0.0064,-0.0944,-0.1741,-0.1441,-0.1075,-0.0476,0.1415,0.3425],
    2017: [0.3067,0.2961,0.2867,0.1594,0.1426,0.0562,0.1111,0.0598,0.0488,0.1264,0.1068,0.1265],
    2018: [0.2006,0.321,0.2883,0.2883,0.3344,0.2913,0.2672,0.2471,0.2857,0.3363,0.2966,0.1312],
    2019: [0.0547,0.0348,-0.0232,-0.0412,-0.1061,-0.2489,-0.2398,-0.4218,-0.3743,-0.3275,-0.2368,-0.2076],
    2020: [-0.2654,-0.4037,-0.473,-0.5591,-0.5735,-0.5666,-0.6144,-0.6078,-0.5979,-0.5468,-0.499,-0.4785],
    2021: [-0.4149,-0.3209,-0.1092,-0.0843,-0.0983,-0.1325,-0.227,-0.2438,-0.1927,-0.0596,-0.0406,-0.0761],
    2022: [0.0668,0.1254,0.2098,0.4809,0.5111,0.5321,0.2274,0.1421,0.3781,0.515,0.3666,0.1521],
    2023: [0.0487,0.1462,0.1191,-0.0472,-0.0507,0.0467,0.1139,0.2371,0.3515,0.5765,0.4384,0.1798],
    2024: [0.191,0.2799,0.2741,0.4475,0.416,0.3168,0.2892,0.1199,0.1007,0.3608,0.5358,0.5759],
    2025: [0.723,0.6216,0.5254,0.5088,0.5683,0.538,0.5328,0.489,0.4615,0.4642,0.485,0.5498],
    2026: [0.6011]
  };

  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const labels = [];
  const values = [];

  for (let yr = 2000; yr <= 2026; yr++) {
    const arr = rawData[yr];
    for (let m = 0; m < arr.length; m++) {
      labels.push(m === 0 ? String(yr) : '');
      values.push(arr[m]);
    }
  }

  // Recession periods (index ranges)
  function monthIndex(yr, mo) {
    let idx = 0;
    for (let y = 2000; y < yr; y++) { idx += rawData[y].length; }
    idx += (mo - 1);
    return idx;
  }

  const recessions = [
    { xMin: monthIndex(2001, 3), xMax: monthIndex(2001, 11) },
    { xMin: monthIndex(2007, 12), xMax: monthIndex(2009, 6) },
    { xMin: monthIndex(2020, 2), xMax: monthIndex(2020, 4) }
  ];

  const recessionAnnotations = {};
  recessions.forEach((r, i) => {
    recessionAnnotations['recession' + i] = {
      type: 'box',
      xMin: r.xMin - 0.5,
      xMax: r.xMax + 0.5,
      yMin: -1.0,
      yMax: 2.0,
      backgroundColor: 'rgba(42, 122, 140, 0.08)',
      borderWidth: 0,
      drawTime: 'beforeDatasetsDraw'
    };
  });

  recessionAnnotations['zeroLine'] = {
    type: 'line',
    yMin: 0,
    yMax: 0,
    borderColor: '#0d2137',
    borderWidth: 1.5,
    borderDash: [],
    drawTime: 'beforeDatasetsDraw'
  };

  // Split into positive and negative for fill colors
  const positiveData = values.map(v => v >= 0 ? v : 0);
  const negativeData = values.map(v => v < 0 ? v : 0);

  const ctx = document.getElementById('termPremiumChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Term Premium (positive)',
          data: values.map((v, i) => ({x: i, y: v})),
          borderColor: '#2a7a8c',
          borderWidth: 1.5,
          pointRadius: 0,
          pointHoverRadius: 4,
          fill: {
            target: {value: 0},
            above: 'rgba(42, 122, 140, 0.15)',
            below: 'rgba(220, 80, 80, 0.12)'
          },
          tension: 0.3
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      interaction: {
        mode: 'index',
        intersect: false
      },
      scales: {
        x: {
          type: 'category',
          labels: labels,
          ticks: {
            maxRotation: 0,
            autoSkip: false,
            callback: function(value, index) {
              return labels[index] || null;
            },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: -1.0,
          max: 2.0,
          ticks: {
            stepSize: 0.5,
            callback: function(value) { return value.toFixed(1) + '%'; },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: {
            color: 'rgba(0,0,0,0.06)',
            drawBorder: false
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            title: function(items) {
              const idx = items[0].dataIndex;
              let yr = 2000;
              let count = 0;
              for (yr = 2000; yr <= 2026; yr++) {
                if (count + rawData[yr].length > idx) {
                  const mo = idx - count;
                  return months[mo] + ' ' + yr;
                }
                count += rawData[yr].length;
              }
              return '';
            },
            label: function(item) {
              return 'Term Premium: ' + item.parsed.y.toFixed(4) + '%';
            }
          }
        },
        annotation: {
          annotations: recessionAnnotations
        }
      }
    }
  });
})();

// ==========================
// CHART: CB GOLD PURCHASES (SLIDE 14)
// ==========================
(function() {
  const years = [];
  for (let y = 2000; y <= 2025; y++) years.push(String(y));

  const values = [-478,-520,-547,-617,-479,-663,-365,-484,-236,-34,77,457,544,409,584,577,416,375,656,650,255,463,1136,1037,1045,863];

  const boldYears = ['2022','2023','2024'];

  const barColors = values.map(v => v >= 0 ? 'rgba(42, 122, 140, 0.85)' : 'rgba(42, 122, 140, 0.35)');

  const ctx = document.getElementById('cbGoldChart').getContext('2d');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: years,
      datasets: [{
        data: values,
        backgroundColor: barColors,
        borderColor: barColors.map(c => c.replace(/[\d.]+\)$/, '1)')),
        borderWidth: 1,
        borderRadius: 2,
        barPercentage: 0.7,
        categoryPercentage: 0.85
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 30, bottom: 4, left: 8 } },
      scales: {
        x: {
          min: -800,
          max: 1200,
          ticks: {
            stepSize: 200,
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: {
            color: 'rgba(0,0,0,0.06)',
            drawBorder: false
          }
        },
        y: {
          ticks: {
            font: function(context) {
              const label = years[context.index];
              const isBold = boldYears.includes(label);
              return {
                family: 'Inter',
                size: 10,
                weight: isBold ? '700' : '400'
              };
            },
            color: function(context) {
              const label = years[context.index];
              return boldYears.includes(label) ? '#0d2137' : '#8a96a0';
            }
          },
          grid: { display: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            label: function(item) {
              return item.parsed.x + ' tonnes';
            }
          }
        },
        annotation: {
          annotations: {
            zeroLine: {
              type: 'line',
              xMin: 0,
              xMax: 0,
              borderColor: '#0d2137',
              borderWidth: 1.5,
              drawTime: 'beforeDatasetsDraw'
            },
            thousandLine: {
              type: 'line',
              xMin: 1000,
              xMax: 1000,
              borderColor: '#2a7a8c',
              borderWidth: 1.5,
              borderDash: [6, 4],
              drawTime: 'beforeDatasetsDraw',
              label: {
                display: true,
                content: '1,000t',
                position: 'start',
                backgroundColor: 'rgba(42,122,140,0.1)',
                color: '#2a7a8c',
                font: { family: 'Inter', size: 10, weight: '600' },
                padding: 4
              }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: FEDERAL DEBT AS % OF GDP (SLIDE 4)
// ==========================
(function() {
  var allYears = [1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053];
  var allValues = [10,11,11,10,10,9,8,8,9,8,8,7,7,6,6,5,4,8,20,30,28,30,29,26,24,23,21,20,19,15,17,22,33,40,40,39,40,39,42,43,45,42,49,73,91,104,106,96,84,79,80,68,63,59,59,57,53,51,50,48,45,45,43,42,40,38,35,33,34,30,28,28,27,26,24,25,27,27,27,25,26,25,29,33,34,36,39,40,41,40,42,45,48,49,49,49,48,46,43,40,35,33,34,36,37,36,36,35,40,55,62,65,70,72,74,73,77,76,78,79,100,97,97,97,99,100,102,104,106,108,110,112,114,116,118,120,123,126,129,132,135,138,141,144,147,150,152,154,156,158,160,162,163,166];

  var splitIdx = 126;
  var actualValues = allValues.map(function(v, i) { return i < splitIdx ? v : null; });
  var projectedValues = allValues.map(function(v, i) { return i >= splitIdx - 1 ? v : null; });
  projectedValues[splitIdx - 1] = allValues[splitIdx - 1];

  var labels = allYears.map(String);
  function yearIdx(yr) { return yr - 1900; }

  var ctxDebt = document.getElementById('debtChart').getContext('2d');

  new Chart(ctxDebt, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Actual',
          data: actualValues,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42, 122, 140, 0.25)',
          borderWidth: 1.8,
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: true,
          tension: 0.2,
          spanGaps: false
        },
        {
          label: 'Projected',
          data: projectedValues,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13, 33, 55, 0.18)',
          borderWidth: 1.8,
          borderDash: [5, 3],
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: true,
          tension: 0.2,
          spanGaps: false
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 28, right: 16, bottom: 4, left: 8 } },
      interaction: { mode: 'index', intersect: false },
      scales: {
        x: {
          ticks: {
            maxRotation: 0,
            autoSkip: false,
            callback: function(value, index) {
              var yr = allYears[index];
              return yr % 10 === 0 ? String(yr) : null;
            },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: 0,
          max: 180,
          ticks: {
            stepSize: 20,
            callback: function(value) { return value + '%'; },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: {
          display: true, position: 'top', align: 'end',
          labels: { usePointStyle: true, pointStyle: 'line', font: { family: 'Inter', size: 10 }, color: '#5a6a78', padding: 12, boxWidth: 24 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            title: function(items) { return items[0].label; },
            label: function(item) { if (item.raw === null) return null; return item.dataset.label + ': ' + item.raw + '% of GDP'; }
          }
        },
        annotation: {
          annotations: {
            ww1: { type: 'label', xValue: yearIdx(1918), yValue: 38, content: ['World War I'], font: { family: 'Inter', size: 9, weight: '600' }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.8)', padding: 3 },
            depression: { type: 'label', xValue: yearIdx(1933), yValue: 56, content: ['Great Depression'], font: { family: 'Inter', size: 9, weight: '600' }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.8)', padding: 3 },
            ww2: { type: 'label', xValue: yearIdx(1944), yValue: 122, content: ['World War II', '(Historical high 106% in 1946)'], font: { family: 'Inter', size: 9, weight: '600' }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.8)', padding: 3 },
            gfcLine: { type: 'line', xMin: yearIdx(2009), xMax: yearIdx(2009), yMin: 55, yMax: 78, borderColor: '#0d2137', borderWidth: 1, borderDash: [3, 2] },
            gfc: { type: 'label', xValue: yearIdx(2009), yValue: 86, content: ['Financial Crisis', 'QE begins (2009)'], font: { family: 'Inter', size: 9, weight: '600' }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.8)', padding: 4 },
            covid: { type: 'label', xValue: yearIdx(2020), yValue: 118, content: ['COVID-19'], font: { family: 'Inter', size: 9, weight: '600' }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.8)', padding: 3 }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: SPENDING + INTEREST + REVENUE (SLIDE 5)
// ==========================
(function() {
  var sYears = [2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053];
  var programSpending = [15.9,16.5,17.8,18.4,18.1,18.4,18.0,17.6,19.1,22.7,22.7,22.0,21.0,19.8,19.3,19.1,19.5,19.1,19.0,19.0,29.4,27.0,21.4,19.5,20.3,19.9,19.8,19.7,19.8,19.9,20.0,20.2,20.3,20.4,20.5,20.7,20.8,20.9,21.0,21.1,21.2,21.3,21.4,21.5,21.6,21.7,21.8,21.9,22.0,22.0,22.1,22.2,22.3,22.4];
  var netInterest = [2.3,2.1,1.7,1.5,1.4,1.5,1.7,1.7,1.7,1.3,1.4,1.5,1.4,1.3,1.3,1.3,1.3,1.4,1.6,2.0,1.8,1.6,1.9,2.5,3.1,3.2,3.2,3.3,3.4,3.5,3.6,3.7,3.8,3.9,3.9,4.1,4.2,4.3,4.4,4.5,4.6,4.7,4.8,4.9,5.0,5.1,5.2,5.3,5.4,5.5,5.6,5.7,5.8,5.9];
  var revenue = [20.0,19.8,17.6,16.2,16.1,17.3,18.2,18.0,17.5,14.6,14.9,15.0,15.2,16.7,17.2,18.0,17.6,17.2,16.4,16.3,16.3,17.7,19.6,16.5,17.1,17.2,18.0,18.2,18.3,18.1,18.0,18.2,18.3,18.4,18.5,18.6,18.6,18.6,18.7,18.7,18.7,18.7,18.8,18.8,18.8,18.8,18.8,18.9,18.9,18.9,18.9,18.9,19.0,19.0];

  var sLabels = sYears.map(String);
  var sDividerIdx = sYears.indexOf(2025);
  var totalSI = programSpending.map(function(v, i) { return +(v + netInterest[i]).toFixed(1); });

  var ctxSpend = document.getElementById('spendingChart').getContext('2d');

  new Chart(ctxSpend, {
    type: 'line',
    data: {
      labels: sLabels,
      datasets: [
        {
          label: 'Program Spending',
          data: programSpending,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42, 122, 140, 0.22)',
          borderWidth: 1.5,
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: true,
          tension: 0.25,
          order: 2
        },
        {
          label: 'Net Interest',
          data: totalSI,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13, 33, 55, 0.22)',
          borderWidth: 1.5,
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: '-1',
          tension: 0.25,
          order: 1
        },
        {
          label: 'Revenue',
          data: revenue,
          borderColor: '#c05040',
          backgroundColor: 'transparent',
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: false,
          tension: 0.25,
          order: 0
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      interaction: { mode: 'index', intersect: false },
      scales: {
        x: {
          ticks: {
            maxRotation: 0, autoSkip: false,
            callback: function(value, index) { var yr = sYears[index]; return yr % 5 === 0 ? String(yr) : null; },
            font: { family: 'Inter', size: 10 }, color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: 0, max: 35,
          ticks: { stepSize: 5, callback: function(value) { return value + '%'; }, font: { family: 'Inter', size: 10 }, color: '#8a96a0' },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: {
          display: true, position: 'top', align: 'end',
          labels: { usePointStyle: true, pointStyle: 'line', font: { family: 'Inter', size: 10 }, color: '#5a6a78', padding: 12, boxWidth: 24 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            title: function(items) { return items[0].label; },
            label: function(item) {
              if (item.datasetIndex === 0) return 'Program Spending: ' + item.raw.toFixed(1) + '% of GDP';
              if (item.datasetIndex === 1) return 'Spending + Interest: ' + item.raw.toFixed(1) + '% of GDP';
              return 'Revenue: ' + item.raw.toFixed(1) + '% of GDP';
            }
          }
        },
        annotation: {
          annotations: {
            sDivLine: { type: 'line', xMin: sDividerIdx + 0.5, xMax: sDividerIdx + 0.5, borderColor: 'rgba(0, 0, 0, 0.25)', borderWidth: 1.5, borderDash: [6, 4], drawTime: 'beforeDatasetsDraw' },
            sActLabel: { type: 'label', xValue: sDividerIdx - 4, yValue: 33, content: ['ACTUAL'], font: { family: 'Inter', size: 9, weight: '700' }, color: '#8a96a0', backgroundColor: 'transparent', padding: 2 },
            sProjLabel: { type: 'label', xValue: sDividerIdx + 8, yValue: 33, content: ['PROJECTED'], font: { family: 'Inter', size: 9, weight: '700' }, color: '#8a96a0', backgroundColor: 'transparent', padding: 2 }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: INTEREST PAYMENTS AS % OF REVENUES (SLIDE 6)
// ==========================
(function() {
  var iYears = [1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035];
  var iValues = [7.3,7.0,7.2,7.5,7.8,8.5,8.4,8.0,8.4,9.5,10.5,10.8,10.7,10.9,11.6,13.1,14.8,16.5,15.8,16.5,17.5,17.2,16.4,16.1,16.4,16.5,16.8,15.8,14.8,14.0,15.3,15.4,14.6,13.2,11.8,11.5,10.6,9.6,9.3,8.7,8.7,9.3,9.4,9.7,8.9,9.4,10.0,9.2,7.8,7.6,7.2,7.4,8.1,9.8,12.3,11.0,9.0,9.7,15.2,18.1,19.0,17.8,18.1,18.6,19.3,20.0,20.3,20.8,21.2,21.1,22.0];
  var isRecession = [0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

  var iLabels = iYears.map(String);
  var iSplitIdx = iYears.indexOf(2025);

  var iActualData = iValues.map(function(v, i) { return i <= iSplitIdx ? v : null; });
  var iProjectedData = iValues.map(function(v, i) { return i >= iSplitIdx ? v : null; });

  var recAnns = {};
  var rs = null;
  for (var j = 0; j < isRecession.length; j++) {
    if (isRecession[j] === 1 && rs === null) { rs = j; }
    if ((isRecession[j] === 0 || j === isRecession.length - 1) && rs !== null) {
      var re = isRecession[j] === 1 ? j : j - 1;
      recAnns['rec_' + rs] = { type: 'box', xMin: rs - 0.5, xMax: re + 0.5, yMin: 4, yMax: 24, backgroundColor: 'rgba(42, 122, 140, 0.08)', borderWidth: 0, drawTime: 'beforeDatasetsDraw' };
      rs = null;
    }
  }
  recAnns['iDivLine'] = { type: 'line', xMin: iSplitIdx + 0.5, xMax: iSplitIdx + 0.5, borderColor: 'rgba(0, 0, 0, 0.25)', borderWidth: 1.5, borderDash: [6, 4], drawTime: 'beforeDatasetsDraw' };
  recAnns['iActLabel'] = { type: 'label', xValue: iSplitIdx - 6, yValue: 23, content: ['ACTUAL'], font: { family: 'Inter', size: 9, weight: '700' }, color: '#8a96a0', backgroundColor: 'transparent', padding: 2 };
  recAnns['iProjLabel'] = { type: 'label', xValue: iSplitIdx + 5, yValue: 23, content: ['PROJECTED'], font: { family: 'Inter', size: 9, weight: '700' }, color: '#8a96a0', backgroundColor: 'transparent', padding: 2 };

  var ctxInt = document.getElementById('interestChart').getContext('2d');

  new Chart(ctxInt, {
    type: 'line',
    data: {
      labels: iLabels,
      datasets: [
        {
          label: 'Actual',
          data: iActualData,
          borderColor: '#2a7a8c',
          backgroundColor: 'transparent',
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: false,
          tension: 0.25,
          spanGaps: false
        },
        {
          label: 'Projected',
          data: iProjectedData,
          borderColor: '#2a7a8c',
          backgroundColor: 'transparent',
          borderWidth: 2,
          borderDash: [5, 3],
          pointRadius: 0,
          pointHoverRadius: 3,
          fill: false,
          tension: 0.25,
          spanGaps: false
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      interaction: { mode: 'index', intersect: false },
      scales: {
        x: {
          ticks: {
            maxRotation: 0, autoSkip: false,
            callback: function(value, index) { var yr = iYears[index]; return yr % 5 === 0 ? String(yr) : null; },
            font: { family: 'Inter', size: 10 }, color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: 5, max: 24,
          ticks: { stepSize: 5, callback: function(value) { return value + '%'; }, font: { family: 'Inter', size: 10 }, color: '#8a96a0' },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: {
          display: true, position: 'top', align: 'end',
          labels: { usePointStyle: true, pointStyle: 'line', font: { family: 'Inter', size: 10 }, color: '#5a6a78', padding: 12, boxWidth: 24 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            title: function(items) { return items[0].label; },
            label: function(item) { if (item.raw === null) return null; return 'Interest / Revenue: ' + item.raw.toFixed(1) + '%'; }
          }
        },
        annotation: { annotations: recAnns }
      }
    }
  });
})();

// ==========================
// CHART 1: DM Core Inflation (Slide 8)
// ==========================
(function() {
  var labels = [];
  for (var y = 2019; y <= 2027; y++) {
    for (var m = 1; m <= 12; m++) {
      labels.push(y + '-' + (m < 10 ? '0' + m : m));
    }
  }
  // 2019-01 to 2027-12 = 9 years * 12 = 108 months
  // But we need exactly 106 data points based on the provided data (2019-01 to 2027-10)
  // Actually the data has 110 entries each (corrected: 108 + 2 extra = 110? Let me count)
  // The labels should match the data length. Data has 110 values per series (from spec).
  // Actually re-counting: each series has exactly 110 values. 2019-01 to 2028-02? No.
  // Let me just generate 110 labels: 2019-01 through 2028-02
  // Wait - 9 years * 12 = 108. Let me trust that and trim data if needed.
  // Re-checking: the US data provided has 110 entries. So labels = 2019-01 to 2028-02.
  labels = [];
  for (var y = 2019; y <= 2027; y++) {
    for (var m = 1; m <= 12; m++) {
      labels.push(y + '-' + (m < 10 ? '0' + m : m));
    }
  }
  // That gives 108. But data has 110 values. Add 2028-01 and 2028-02.
  labels.push('2028-01');
  labels.push('2028-02');

  var usData = [2.2,2.1,2.0,2.1,2.0,2.1,2.2,2.4,2.4,2.3,2.3,2.3, 2.3,2.4,2.1,1.4,1.2,1.2,1.6,1.7,1.7,1.6,1.6,1.6, 1.4,1.3,1.6,3.0,3.8,4.5,4.3,4.0,4.0,4.6,4.9,5.5, 6.0,6.4,6.5,6.2,6.0,5.9,5.9,6.3,6.6,6.3,6.0,5.7, 5.6,5.5,5.6,5.5,5.3,4.8,4.7,4.3,4.1,4.0,4.0,3.9, 3.9,3.8,3.8,3.6,3.4,3.3,3.2,3.2,3.3,3.3,3.3,3.2, 3.3,3.1,2.8,2.8,2.8,2.8,2.8,2.7,3.0,null,2.6,2.6, 2.5,2.5,2.5,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7, 2.7,2.7,2.7,2.6,2.6,2.6,2.6,2.6,2.5,2.5];
  var euroData = [1.1,1.0,0.8,1.3,0.8,1.1,0.9,0.9,1.0,1.1,1.3,1.3, 1.1,1.2,1.0,0.9,0.9,0.8,1.2,0.4,0.2,0.2,0.4,0.2, 1.4,1.1,0.9,0.7,0.9,0.9,0.7,1.6,1.9,2.0,2.6,2.6, 2.3,2.7,2.9,3.5,3.8,3.7,4.0,4.3,4.8,5.0,5.0,5.2, 5.2,5.6,5.7,5.6,5.3,5.5,5.5,5.3,4.5,4.2,3.6,3.4, 3.3,3.1,2.9,2.7,2.9,2.9,2.9,2.8,2.7,2.7,2.7,2.7, 2.7,2.6,2.4,2.4,2.3,2.5,2.5,2.5,2.7,2.6,2.4,2.3, 2.2,2.2,2.2,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5, 2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5];
  var ukData = [1.8,1.8,1.8,1.8,1.7,1.8,1.9,1.5,1.7,1.7,1.7,1.4, 1.6,1.7,1.6,1.4,1.2,1.4,1.8,0.9,1.3,1.5,1.1,1.4, 1.4,0.9,1.1,1.3,1.5,2.3,1.8,3.1,2.9,3.4,4.0,4.2, 4.4,5.2,5.7,6.2,5.9,5.8,6.2,6.3,6.5,6.5,6.3,6.3, 5.8,6.2,6.2,6.8,7.1,6.9,6.9,6.2,6.1,5.7,5.1,5.1, 5.1,4.5,4.2,3.9,3.5,3.5,3.3,3.6,3.2,3.3,3.5,3.2, 3.0,3.0,3.4,3.8,3.5,3.7,3.5,3.6,3.5,3.4,3.2,3.2, 3.0,2.9,2.8,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8, 2.8,2.8,2.7,2.7,2.7,2.7,2.7,2.6,2.6,2.6];
  var canadaData = [1.9,1.9,2.0,2.1,2.1,2.1,2.1,2.0,2.0,2.1,2.0,2.0, 2.0,1.9,1.7,1.6,1.5,1.5,1.5,1.5,1.5,1.6,1.5,1.5, 1.5,1.5,1.7,2.0,2.2,2.5,2.7,2.9,3.1,3.2,3.3,3.3, 3.5,3.6,3.8,4.1,4.5,5.0,5.5,5.3,5.2,5.0,4.8,4.7, 4.9,4.8,4.6,4.4,4.1,3.6,3.5,3.6,3.5,3.4,3.4,3.4, 3.3,3.1,2.9,2.7,2.6,2.6,2.7,2.6,2.5,2.5,2.5,2.6, 2.7,2.8,2.9,3.1,3.0,2.9,2.8,2.7,2.7,3.0,2.6,2.5, 2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.6,2.6, 2.6,2.6,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5];
  var ausData = [1.7,1.7,1.6,1.5,1.5,1.6,1.6,1.6,1.6,1.6,1.6,1.6, 1.6,1.6,1.8,1.5,1.3,1.2,1.3,1.3,1.2,1.3,1.3,1.2, 1.2,1.2,1.1,1.6,1.7,1.6,2.1,2.2,2.1,2.6,2.7,2.6, 2.8,3.0,3.7,4.0,4.3,4.9,5.3,5.6,6.1,6.5,6.7,6.8, 6.6,6.4,6.6,6.2,5.9,5.9,5.6,5.3,5.2,4.8,4.5,4.2, 3.9,3.7,3.6,3.5,3.5,3.4,3.3,3.3,3.2,3.2,3.2,3.2, 3.1,3.0,2.7,2.6,2.5,2.7,2.8,2.9,3.0,3.3,3.2,3.3, 3.1,3.0,2.9,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8, 2.8,2.8,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7];

  // Forecast divider: 2025-10 is index 81 (2019-01=0, so 2025-10 = 6*12+9 = 81)
  var forecastIndex = 81;

  var ctx = document.getElementById('inflationChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        { label: 'US', data: usData, borderColor: '#2a7a8c', backgroundColor: '#2a7a8c', borderWidth: 1.8, tension: 0.25, pointRadius: 0, pointHoverRadius: 3, spanGaps: true },
        { label: 'Euro Area', data: euroData, borderColor: '#0d2137', backgroundColor: '#0d2137', borderWidth: 1.8, tension: 0.25, pointRadius: 0, pointHoverRadius: 3 },
        { label: 'UK', data: ukData, borderColor: '#c05040', backgroundColor: '#c05040', borderWidth: 1.8, tension: 0.25, pointRadius: 0, pointHoverRadius: 3 },
        { label: 'Canada', data: canadaData, borderColor: '#e8a838', backgroundColor: '#e8a838', borderWidth: 1.8, tension: 0.25, pointRadius: 0, pointHoverRadius: 3 },
        { label: 'Australia', data: ausData, borderColor: '#6b5b95', backgroundColor: '#6b5b95', borderWidth: 1.8, tension: 0.25, pointRadius: 0, pointHoverRadius: 3 }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          ticks: {
            font: { family: 'Inter', size: 10 },
            maxRotation: 0,
            callback: function(value, index) {
              var lbl = labels[index];
              if (lbl && lbl.endsWith('-01')) return lbl.substring(0, 4);
              return '';
            },
            autoSkip: false
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        },
        y: {
          min: 0, max: 8,
          ticks: {
            stepSize: 1,
            font: { family: 'Inter', size: 10 },
            callback: function(value) { return value + '%'; }
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: { display: true, position: 'top', align: 'end', labels: { font: { family: 'Inter', size: 10 }, boxWidth: 12, padding: 10 } },
        tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(ctx) { return ctx.dataset.label + ': ' + ctx.parsed.y + '%'; } } },
        annotation: {
          annotations: {
            forecastLine: {
              type: 'line',
              xMin: forecastIndex,
              xMax: forecastIndex,
              borderColor: '#5a6a78',
              borderWidth: 1.5,
              borderDash: [5, 4],
              label: { display: true, content: 'Forecast', position: 'start', font: { family: 'Inter', size: 9 }, color: '#5a6a78', backgroundColor: 'rgba(255,255,255,0.8)' }
            },
            targetLine: {
              type: 'line',
              yMin: 2.0,
              yMax: 2.0,
              borderColor: '#8a96a0',
              borderWidth: 1,
              borderDash: [4, 3],
              label: { display: true, content: '2% Target', position: 'end', font: { family: 'Inter', size: 9 }, color: '#8a96a0', backgroundColor: 'rgba(255,255,255,0.85)' }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 2: Price Changes 2000-2025 (Slide 9)
// ==========================
(function() {
  var categories = ['Hospital Services','College Tuition','College Textbooks','Childcare','Medical Care','Avg Hourly Wages','Housing','Food & Beverages','Overall CPI','New Cars','Home Furnishings','Clothing','Cell Phone Services','Computer Software','Toys','TVs'];
  var values = [281.4, 196.7, 176.9, 158.8, 142.0, 131.1, 111.4, 105.7, 92.6, 25.8, 1.4, 1.3, -44.1, -73.0, -74.2, -98.1];
  var cpiValue = 92.6;

  var colors = values.map(function(v, i) {
    if (categories[i] === 'Overall CPI') return '#0d2137';
    if (v < 0) return '#c05040';
    if (v > cpiValue) return '#2a7a8c';
    return '#8a96a0';
  });

  var ctx = document.getElementById('priceChangesChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: categories,
      datasets: [{
        data: values,
        backgroundColor: colors,
        borderColor: colors,
        borderWidth: 0,
        barThickness: 16
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          min: -120, max: 300,
          ticks: {
            font: { family: 'Inter', size: 10 },
            callback: function(value) { return value + '%'; }
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        },
        y: {
          ticks: { font: { family: 'Inter', size: 9 } },
          grid: { display: false, drawBorder: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(ctx) { return ctx.parsed.x + '%'; } } },
        annotation: {
          annotations: {
            cpiLine: {
              type: 'line',
              xMin: cpiValue,
              xMax: cpiValue,
              borderColor: '#0d2137',
              borderWidth: 1.5,
              borderDash: [5, 4],
              label: { display: true, content: 'Overall CPI', position: 'start', font: { family: 'Inter', size: 9 }, color: '#0d2137', backgroundColor: 'rgba(255,255,255,0.85)' }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: MINE LEAD TIMES (SLIDE 20)
// ==========================
(function() {
  var ctx = document.getElementById('chart-mine-lead');
  if (!ctx) return;
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['1990\u20131999', '2005\u20132009', '2020\u20132024', 'Non-Operating\n(Projected)'],
      datasets: [{
        label: 'Avg. Years from Discovery to Production',
        data: [6, 12.7, 17.9, 28],
        backgroundColor: ['rgba(42,122,140,0.7)', 'rgba(42,122,140,0.8)', 'rgba(42,122,140,0.9)', 'rgba(192,80,64,0.85)'],
        borderColor: ['#2a7a8c', '#2a7a8c', '#2a7a8c', '#c05040'],
        borderWidth: 2,
        borderRadius: 6,
        barPercentage: 0.65
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: { padding: { top: 20, right: 16, bottom: 4, left: 8 } },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 13, weight: '600' },
          callbacks: { label: function(ctx) { return ctx.parsed.y + ' years'; } }
        },
        annotation: {
          annotations: {
            tripled: { type: 'label', xValue: 1, yValue: 20, content: ['3\u00d7 increase'], font: { family: 'Inter', size: 12, weight: '600' }, color: '#c05040' },
            arrow1: { type: 'line', xMin: 0, xMax: 2, yMin: 7.5, yMax: 19.4, borderColor: 'rgba(192,80,64,0.3)', borderWidth: 1.5, borderDash: [4,3] }
          }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: { font: { family: 'Inter', size: 12, weight: '500' }, color: '#0d2137' }
        },
        y: {
          grid: { color: 'rgba(0,0,0,0.05)' },
          ticks: { font: { family: 'Inter', size: 11 }, color: '#8a96a0', callback: function(v) { return v + ' yrs'; } },
          title: { display: true, text: 'Years from Discovery to Production', font: { family: 'Inter', size: 11 }, color: '#8a96a0' }
        }
      }
    }
  });
})();

(function() {
  // IEA Global Critical Minerals Outlook 2025 (STEPS) + BNEF supply projections
  // Demand: IEA STEPS — 27 Mt (2024), 31.3 Mt (2030), 33 Mt (2035), 34.1 Mt (2040)
  // Supply: IEA — mined peaks ~24 Mt late 2020s, total refined (incl. recycling) declines
  // BNEF: total supply 29 Mt by 2035 vs 35 Mt demand = 6 Mt deficit
  var years = [2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040];
  var supply = [27.0,27.2,27.3,27.5,27.6,27.4,27.0,26.4,25.8,25.2,24.6,24.0,23.5,23.0,22.6,22.3,22.0];
  var demand = [27.0,27.5,28.0,28.6,29.2,29.8,31.3,31.7,32.0,32.3,32.7,33.0,33.3,33.5,33.7,33.9,34.1];

  var ctx = document.getElementById('copperChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: years.map(String),
      datasets: [
        {
          label: 'Total Supply',
          data: supply,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42, 122, 140, 0.15)',
          fill: true,
          borderWidth: 2,
          tension: 0.25,
          pointRadius: 0,
          pointHoverRadius: 3,
          order: 2
        },
        {
          label: 'Demand',
          data: demand,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13, 33, 55, 0.06)',
          fill: true,
          borderWidth: 2,
          tension: 0.25,
          pointRadius: 0,
          pointHoverRadius: 3,
          order: 1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          ticks: { font: { family: 'Inter', size: 10 }, maxRotation: 0 },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        },
        y: {
          min: 18, max: 40,
          ticks: {
            stepSize: 5,
            font: { family: 'Inter', size: 10 },
            callback: function(value) { return value + ' Mt'; }
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: { display: true, position: 'top', align: 'end', labels: { font: { family: 'Inter', size: 10 }, boxWidth: 12, padding: 10 } },
        tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(ctx) { return ctx.dataset.label + ': ' + ctx.parsed.y + ' Mt'; } } },
        filler: { propagate: false },
        annotation: {
          annotations: {
            deficitLabel: {
              type: 'label',
              xValue: '2037',
              yValue: 28,
              content: ['DEFICIT'],
              font: { family: 'Inter', size: 13, weight: 'bold' },
              color: 'rgba(192, 80, 64, 0.7)',
              backgroundColor: 'rgba(255,255,255,0)'
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 4: Critical Minerals Import Reliance (Slide 19)
// ==========================
(function() {
  var minerals = ['Cesium','Rubidium','Scandium','Graphite','Manganese','Niobium','Tantalum','Gallium','Indium','Yttrium','Chromium','Fluorspar','Titanium Sponge','Dysprosium','Germanium','Al. Oxide Abrasives','Ti. Concentrates','Bismuth','Antimony','Cobalt'];
  var values = [100,100,100,100,100,100,100,100,100,100,100,100,95,95,90,95,85,89,80,75];

  var colors = values.map(function(v) {
    return v === 100 ? '#2a7a8c' : 'rgba(42, 122, 140, 0.72)';
  });

  var ctx = document.getElementById('mineralsChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: minerals,
      datasets: [{
        data: values,
        backgroundColor: colors,
        borderColor: colors,
        borderWidth: 0,
        barThickness: 13
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          min: 0, max: 100,
          ticks: {
            font: { family: 'Inter', size: 10 },
            callback: function(value) { return value + '%'; }
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        },
        y: {
          ticks: { font: { family: 'Inter', size: 8.5 } },
          grid: { display: false, drawBorder: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(ctx) { return ctx.parsed.x + '% import reliance'; } } },
        annotation: {
          annotations: {
            fullReliance: {
              type: 'line',
              xMin: 100,
              xMax: 100,
              borderColor: 'rgba(13, 33, 55, 0.3)',
              borderWidth: 1,
              borderDash: [4, 3]
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 5: IEA Mineral Demand Projections (Slide 20)
// ==========================
(function() {
  var minerals = ['Lithium', 'Graphite', 'Cobalt', 'Rare Earths', 'Nickel', 'Copper'];
  var actual2024 = [100, 100, 100, 100, 100, 100];
  var steps2030 = [222, 172, 142, 135, 130, 117];
  var steps2035 = [337, 201, 146, 150, 149, 124];
  var steps2040 = [453, 231, 149, 165, 169, 128];

  // Absolute values in kt (IEA Global Critical Minerals Outlook 2025, STEPS)
  var kt2024 = [205, 4766, 221, 91, 3371, 26717];
  var kt2030 = [455, 8219, 314, 123, 4389, 31348];
  var kt2035 = [690, 9600, 322, 137, 5039, 33000];
  var kt2040 = [928, 11010, 330, 150, 5689, 34137];

  var ctx = document.getElementById('mineralDemandChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: minerals,
      datasets: [
        { label: '2024 Actual', data: actual2024, backgroundColor: '#8a96a0', borderColor: '#8a96a0', borderWidth: 0, barPercentage: 0.85, categoryPercentage: 0.8 },
        { label: '2030 STEPS', data: steps2030, backgroundColor: '#5ba3b0', borderColor: '#5ba3b0', borderWidth: 0, barPercentage: 0.85, categoryPercentage: 0.8 },
        { label: '2035 STEPS', data: steps2035, backgroundColor: '#2a7a8c', borderColor: '#2a7a8c', borderWidth: 0, barPercentage: 0.85, categoryPercentage: 0.8 },
        { label: '2040 STEPS', data: steps2040, backgroundColor: '#0d2137', borderColor: '#0d2137', borderWidth: 0, barPercentage: 0.85, categoryPercentage: 0.8 }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          ticks: { font: { family: 'Inter', size: 10 } },
          grid: { display: false, drawBorder: false }
        },
        y: {
          min: 0, max: 500,
          ticks: {
            font: { family: 'Inter', size: 10 },
            callback: function(value) { return value; }
          },
          grid: { color: 'rgba(0, 0, 0, 0.045)', drawBorder: false }
        }
      },
      plugins: {
        legend: { display: true, position: 'top', align: 'end', labels: { font: { family: 'Inter', size: 10 }, boxWidth: 12, padding: 10 } },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(context) {
              var idx = context.dataIndex;
              var dsIdx = context.datasetIndex;
              var kt = dsIdx === 0 ? kt2024[idx] : (dsIdx === 1 ? kt2030[idx] : (dsIdx === 2 ? kt2035[idx] : kt2040[idx]));
              return context.dataset.label + ': ' + context.parsed.y + ' (index) / ' + kt.toLocaleString() + ' kt';
            }
          }
        },
        annotation: {
          annotations: {
            baselineLine: {
              type: 'line',
              yMin: 100,
              yMax: 100,
              borderColor: '#8a96a0',
              borderWidth: 1.5,
              borderDash: [5, 4],
              label: { display: true, content: '2024 Baseline', position: 'start', font: { family: 'Inter', size: 9 }, color: '#8a96a0', backgroundColor: 'rgba(255,255,255,0.85)' }
            }
          }
        }
      }
    }
  });
})();

// Initialize first slide display
document.getElementById('slide-1').style.opacity = '1';
</script>

<script>
// ==========================
// CHART: OECD ALMP SPENDING — % OF GDP (SLIDE 45)
// Data: OECD Social Expenditure Database (SOCX), 2019 pre-pandemic baseline
// Programme type TP60 (Active Labour Market Programmes), measure PT_B1GQ (% of GDP)
// ==========================
(function() {
  var ctx = document.getElementById('fiscalALMPChart').getContext('2d');

  // Countries sorted by spending (ascending) — US at bottom for visual impact
  var countries = [
    'United States', 'Japan', 'United Kingdom', 'South Korea',
    'Canada', 'Netherlands', 'Germany', 'France',
    'Austria', 'Finland', 'Sweden', 'Denmark'
  ];
  // All values are 2019 from OECD SOCX database
  var values = [0.10, 0.15, 0.15, 0.35, 0.41, 0.55, 0.58, 0.70, 0.70, 0.92, 1.04, 1.89];

  var colors = countries.map(function(c) {
    return c === 'United States' ? '#c0392b' : '#2a7a8c';
  });

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: countries,
      datasets: [{
        data: values,
        backgroundColor: colors,
        borderRadius: 4,
        barPercentage: 0.65,
        categoryPercentage: 0.82
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 6, right: 40, bottom: 4, left: 4 } },
      scales: {
        x: {
          min: 0,
          max: 2.2,
          ticks: {
            stepSize: 0.5,
            font: { family: 'Inter', size: 11 },
            color: '#8a96a0',
            callback: function(v) { return v.toFixed(1) + '%'; }
          },
          grid: { color: 'rgba(13,33,55,0.06)' },
          title: {
            display: true,
            text: '% of GDP',
            font: { family: 'Inter', size: 11, weight: '500' },
            color: '#8a96a0'
          }
        },
        y: {
          ticks: {
            font: { family: 'Inter', size: 12, weight: '500' },
            color: function(ctx) {
              return ctx.tick.label === 'United States' ? '#c0392b' : '#0d2137';
            }
          },
          grid: { display: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12, weight: '600' },
          bodyFont: { family: 'Inter', size: 12 },
          padding: 12,
          cornerRadius: 6,
          callbacks: {
            label: function(ctx) { return ' ' + ctx.raw.toFixed(2) + '% of GDP'; }
          }
        },
        annotation: {
          annotations: {
            oecdAvg: {
              type: 'line',
              xMin: 0.50,
              xMax: 0.50,
              borderColor: 'rgba(13,33,55,0.35)',
              borderWidth: 1.5,
              borderDash: [6, 4],
              label: {
                display: true,
                content: 'OECD avg: 0.5%',
                position: 'end',
                backgroundColor: 'rgba(13,33,55,0.75)',
                color: '#fff',
                font: { family: 'Inter', size: 10, weight: '600' },
                padding: { x: 8, y: 4 },
                borderRadius: 4
              }
            }
          }
        }
      }
    }
  });
})();
</script>

<script>
// ==========================
// CHART: GOLD vs TREASURIES IN CB RESERVES (SLIDE 13)
// ==========================
(function() {
  const labels = [
    'Q1 2020','Q2 2020','Q3 2020','Q4 2020',
    'Q1 2021','Q2 2021','Q3 2021','Q4 2021',
    'Q1 2022','Q2 2022','Q3 2022','Q4 2022',
    'Q1 2023','Q2 2023','Q3 2023','Q4 2023',
    'Q1 2024','Q2 2024','Q3 2024','Q4 2024',
    'Q1 2025','Q2 2025','Q3 2025','Q4 2025'
  ];

  const goldData = [1.80,1.90,2.10,2.05,1.95,1.98,1.95,1.92,2.00,2.05,1.85,1.80,2.05,2.20,2.60,2.80,3.00,3.40,3.80,4.20,4.10,4.50,4.80,5.10];
  const treasuryData = [4.05,3.98,4.08,4.10,4.10,4.08,4.05,4.02,3.98,3.92,3.85,3.82,3.80,3.78,3.76,3.75,3.73,3.72,3.71,3.70,3.68,3.70,3.65,3.60];

  // Crossover between Q2 2024 (idx 17: gold=3.40, tsy=3.72) and Q3 2024 (idx 18: gold=3.80, tsy=3.71)
  const crossIdx = 17.6;

  const ctx = document.getElementById('goldTreasuriesChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Gold Holdings',
          data: goldData,
          borderColor: '#d4a843',
          backgroundColor: 'rgba(212, 168, 67, 0.08)',
          borderWidth: 2.5,
          pointRadius: 3,
          pointBackgroundColor: '#d4a843',
          pointBorderColor: '#fff',
          pointBorderWidth: 1.5,
          pointHoverRadius: 5,
          tension: 0.3,
          fill: false
        },
        {
          label: 'Treasury Holdings',
          data: treasuryData,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13, 33, 55, 0.08)',
          borderWidth: 2.5,
          pointRadius: 3,
          pointBackgroundColor: '#0d2137',
          pointBorderColor: '#fff',
          pointBorderWidth: 1.5,
          pointHoverRadius: 5,
          tension: 0.3,
          fill: false
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 14, right: 20, bottom: 4, left: 8 } },
      interaction: {
        mode: 'index',
        intersect: false
      },
      scales: {
        x: {
          ticks: {
            maxRotation: 0,
            autoSkip: true,
            maxTicksLimit: 12,
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: 0,
          max: 6,
          ticks: {
            stepSize: 1,
            callback: function(value) { return '$' + value + 'T'; },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: {
            color: 'rgba(0,0,0,0.06)',
            drawBorder: false
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'end',
          labels: {
            usePointStyle: true,
            pointStyle: 'circle',
            padding: 16,
            font: { family: 'Inter', size: 11 },
            color: '#5a6a78'
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            label: function(item) {
              return item.dataset.label + ': $' + item.parsed.y.toFixed(2) + 'T';
            }
          }
        },
        annotation: {
          annotations: {
            crossover: {
              type: 'line',
              xMin: crossIdx,
              xMax: crossIdx,
              borderColor: 'rgba(212, 168, 67, 0.6)',
              borderWidth: 1.5,
              borderDash: [6, 4],
              drawTime: 'afterDatasetsDraw',
              label: {
                display: true,
                content: 'Gold overtakes Treasuries',
                position: 'start',
                backgroundColor: 'rgba(212, 168, 67, 0.12)',
                color: '#0d2137',
                font: { family: 'Inter', size: 10, weight: '600' },
                padding: { top: 4, bottom: 4, left: 8, right: 8 },
                yAdjust: -8
              }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: S&P 500 PRICED IN GOLD (SLIDE 15)
// ==========================
(function() {
  const labels = [
    'Q1 2006','Q2 2006','Q3 2006','Q4 2006',
    'Q1 2007','Q2 2007','Q3 2007','Q4 2007',
    'Q1 2008','Q2 2008','Q3 2008','Q4 2008',
    'Q1 2009','Q2 2009','Q3 2009','Q4 2009',
    'Q1 2010','Q2 2010','Q3 2010','Q4 2010',
    'Q1 2011','Q2 2011','Q3 2011','Q4 2011',
    'Q1 2012','Q2 2012','Q3 2012','Q4 2012',
    'Q1 2013','Q2 2013','Q3 2013','Q4 2013',
    'Q1 2014','Q2 2014','Q3 2014','Q4 2014',
    'Q1 2015','Q2 2015','Q3 2015','Q4 2015',
    'Q1 2016','Q2 2016','Q3 2016','Q4 2016',
    'Q1 2017','Q2 2017','Q3 2017','Q4 2017',
    'Q1 2018','Q2 2018','Q3 2018','Q4 2018',
    'Q1 2019','Q2 2019','Q3 2019','Q4 2019',
    'Q1 2020','Q2 2020','Q3 2020','Q4 2020',
    'Q1 2021','Q2 2021','Q3 2021','Q4 2021',
    'Q1 2022','Q2 2022','Q3 2022','Q4 2022',
    'Q1 2023','Q2 2023','Q3 2023','Q4 2023',
    'Q1 2024','Q2 2024','Q3 2024','Q4 2024',
    'Q1 2025','Q2 2025','Q3 2025','Q4 2025',
    'Q1 2026'
  ];

  const values = [
    100.0,90.5,94.9,96.8,
    92.5,99.4,90.5,79.3,
    58.6,64.9,63.1,46.3,
    35.3,42.2,45.1,42.1,
    44.6,37.8,38.0,38.4,
    39.5,36.2,28.5,32.6,
    35.7,35.6,35.6,36.4,
    41.9,51.9,53.9,63.7,
    60.1,65.5,69.4,73.7,
    76.0,76.5,74.4,82.2,
    69.9,70.3,70.0,83.6,
    82.8,83.2,81.7,90.7,
    87.9,92.5,104.3,88.4,
    92.8,91.6,85.0,92.5,
    71.7,77.2,75.4,85.6,
    98.0,99.5,107.8,112.4,
    97.1,91.4,98.6,93.7,
    89.3,96.3,99.1,99.6,
    103.2,100.2,94.2,97.7,
    82.0,77.4,73.4,68.4,
    60.3
  ];

  // Lehman = Q4 2008 = index 11
  // US downgrade = Q3 2011 = index 22
  // Covid-19 = Q2 2020 = index 57
  // Liberation Day = Q2 2025 = index 77

  const ctx = document.getElementById('spGoldChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [{
        label: 'S&P 500 / Gold',
        data: values,
        borderColor: '#2a7a8c',
        backgroundColor: 'rgba(42, 122, 140, 0.10)',
        borderWidth: 2,
        pointRadius: 0,
        pointHoverRadius: 4,
        tension: 0.3,
        fill: true
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 14, right: 20, bottom: 4, left: 8 } },
      interaction: {
        mode: 'index',
        intersect: false
      },
      scales: {
        x: {
          ticks: {
            maxRotation: 0,
            autoSkip: true,
            maxTicksLimit: 11,
            callback: function(value, index) {
              var lbl = labels[index];
              if (lbl && lbl.startsWith('Q1')) {
                return lbl.replace('Q1 ', '');
              }
              return null;
            },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { display: false }
        },
        y: {
          min: 20,
          max: 120,
          ticks: {
            stepSize: 20,
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: {
            color: 'rgba(0,0,0,0.06)',
            drawBorder: false
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            label: function(item) {
              return 'S&P/Gold: ' + item.parsed.y.toFixed(1);
            }
          }
        },
        annotation: {
          annotations: {
            lehman: {
              type: 'label',
              xValue: 11,
              yValue: 56,
              content: ['Lehman'],
              color: '#0d2137',
              font: { family: 'Inter', size: 10, weight: '600' },
              backgroundColor: 'rgba(255,255,255,0.85)',
              borderColor: '#0d2137',
              borderWidth: 1,
              borderRadius: 3,
              padding: { top: 3, bottom: 3, left: 6, right: 6 }
            },
            lehmanLine: {
              type: 'line',
              xMin: 11,
              xMax: 11,
              yMin: 47,
              yMax: 54,
              borderColor: '#0d2137',
              borderWidth: 1
            },
            downgrade: {
              type: 'label',
              xValue: 22,
              yValue: 40,
              content: ['US downgrade'],
              color: '#0d2137',
              font: { family: 'Inter', size: 10, weight: '600' },
              backgroundColor: 'rgba(255,255,255,0.85)',
              borderColor: '#0d2137',
              borderWidth: 1,
              borderRadius: 3,
              padding: { top: 3, bottom: 3, left: 6, right: 6 }
            },
            downgradeLine: {
              type: 'line',
              xMin: 22,
              xMax: 22,
              yMin: 29,
              yMax: 38,
              borderColor: '#0d2137',
              borderWidth: 1
            },
            covid: {
              type: 'label',
              xValue: 56,
              yValue: 62,
              content: ['Covid-19'],
              color: '#0d2137',
              font: { family: 'Inter', size: 10, weight: '600' },
              backgroundColor: 'rgba(255,255,255,0.85)',
              borderColor: '#0d2137',
              borderWidth: 1,
              borderRadius: 3,
              padding: { top: 3, bottom: 3, left: 6, right: 6 }
            },
            covidLine: {
              type: 'line',
              xMin: 56,
              xMax: 56,
              yMin: 65,
              yMax: 71,
              borderColor: '#0d2137',
              borderWidth: 1
            },
            liberation: {
              type: 'label',
              xValue: 77,
              yValue: 67,
              content: ['Liberation Day'],
              color: '#0d2137',
              font: { family: 'Inter', size: 10, weight: '600' },
              backgroundColor: 'rgba(255,255,255,0.85)',
              borderColor: '#0d2137',
              borderWidth: 1,
              borderRadius: 3,
              padding: { top: 3, bottom: 3, left: 6, right: 6 }
            },
            liberationLine: {
              type: 'line',
              xMin: 77,
              xMax: 77,
              yMin: 70,
              yMax: 77,
              borderColor: '#0d2137',
              borderWidth: 1
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: GOLD PRICE vs REAL 10Y YIELD (SLIDE 16)
// ==========================
(function() {
  const labels = [
    'Q1 2003','Q2 2003','Q3 2003','Q4 2003',
    'Q1 2004','Q2 2004','Q3 2004','Q4 2004',
    'Q1 2005','Q2 2005','Q3 2005','Q4 2005',
    'Q1 2006','Q2 2006','Q3 2006','Q4 2006',
    'Q1 2007','Q2 2007','Q3 2007','Q4 2007',
    'Q1 2008','Q2 2008','Q3 2008','Q4 2008',
    'Q1 2009','Q2 2009','Q3 2009','Q4 2009',
    'Q1 2010','Q2 2010','Q3 2010','Q4 2010',
    'Q1 2011','Q2 2011','Q3 2011','Q4 2011',
    'Q1 2012','Q2 2012','Q3 2012','Q4 2012',
    'Q1 2013','Q2 2013','Q3 2013','Q4 2013',
    'Q1 2014','Q2 2014','Q3 2014','Q4 2014',
    'Q1 2015','Q2 2015','Q3 2015','Q4 2015',
    'Q1 2016','Q2 2016','Q3 2016','Q4 2016',
    'Q1 2017','Q2 2017','Q3 2017','Q4 2017',
    'Q1 2018','Q2 2018','Q3 2018','Q4 2018',
    'Q1 2019','Q2 2019','Q3 2019','Q4 2019',
    'Q1 2020','Q2 2020','Q3 2020','Q4 2020',
    'Q1 2021','Q2 2021','Q3 2021','Q4 2021',
    'Q1 2022','Q2 2022','Q3 2022','Q4 2022',
    'Q1 2023','Q2 2023','Q3 2023','Q4 2023',
    'Q1 2024','Q2 2024','Q3 2024','Q4 2024',
    'Q1 2025','Q2 2025','Q3 2025','Q4 2025',
    'Q1 2026'
  ];

  const goldLn = [
    5.88,5.87,5.89,5.95,
    6.03,6.01,6.00,6.05,
    6.05,6.06,6.06,6.13,
    6.15,6.21,6.19,6.17,
    6.21,6.23,6.22,6.34,
    6.47,6.50,6.49,6.38,
    6.42,6.46,6.47,6.57,
    6.60,6.63,6.69,6.82,
    6.84,6.89,7.01,7.08,
    7.06,7.04,7.02,7.08,
    7.06,6.95,6.89,6.88,
    6.87,6.86,6.86,6.78,
    6.79,6.77,6.74,6.74,
    6.75,6.82,6.87,6.84,
    6.80,6.83,6.84,6.85,
    6.89,6.88,6.81,6.81,
    6.85,6.85,6.93,7.01,
    7.05,7.09,7.16,7.22,
    7.22,7.20,7.19,7.17,
    7.21,7.24,7.16,7.12,
    7.22,7.24,7.27,7.27,
    7.32,7.42,7.47,7.55,
    7.57,7.78,7.90,8.01,
    8.41
  ];

  const realYield = [
    2.06,1.87,2.11,1.93,
    1.70,1.84,1.95,1.65,
    1.60,1.68,1.80,2.08,
    2.00,2.22,2.30,2.20,
    2.28,2.32,2.40,2.05,
    1.53,1.32,1.59,2.62,
    1.80,1.73,1.71,1.47,
    1.34,1.49,1.17,0.60,
    0.97,0.78,0.45,0.15,
    -0.07,-0.14,-0.46,-0.72,
    -0.53,-0.26,0.34,0.52,
    0.35,0.32,0.25,0.39,
    0.18,0.14,0.48,0.53,
    0.56,0.20,-0.02,0.33,
    0.47,0.40,0.43,0.47,
    0.60,0.72,0.77,1.05,
    0.90,0.60,0.32,0.10,
    0.00,-0.42,-0.86,-0.94,
    -1.04,-0.76,-1.02,-1.06,
    -0.63,0.00,0.56,1.53,
    1.38,1.24,1.62,2.25,
    1.78,2.09,2.03,1.88,
    2.10,1.85,1.92,1.98,
    1.90
  ];

  // Mar 2022 = Q1 2022 = index 76
  const breakIdx = 76;

  const ctx = document.getElementById('goldYieldChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Gold Price (ln $/oz)',
          data: goldLn,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13, 33, 55, 0.05)',
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 4,
          tension: 0.3,
          fill: false,
          yAxisID: 'yLeft'
        },
        {
          label: 'Real 10Y Yield (%)',
          data: realYield,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42, 122, 140, 0.08)',
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 4,
          tension: 0.3,
          fill: false,
          borderDash: [5, 3],
          yAxisID: 'yRight'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 14, right: 8, bottom: 4, left: 8 } },
      interaction: {
        mode: 'index',
        intersect: false
      },
      scales: {
        x: {
          ticks: {
            maxRotation: 0,
            autoSkip: true,
            maxTicksLimit: 12,
            callback: function(value, index) {
              var lbl = labels[index];
              if (lbl && lbl.startsWith('Q1')) {
                return lbl.replace('Q1 ', '');
              }
              return null;
            },
            font: { family: 'Inter', size: 10 },
            color: '#8a96a0'
          },
          grid: { display: false }
        },
        yLeft: {
          type: 'linear',
          position: 'left',
          min: 5.5,
          max: 8.5,
          ticks: {
            stepSize: 0.5,
            callback: function(value) { return value.toFixed(1); },
            font: { family: 'Inter', size: 10 },
            color: '#0d2137'
          },
          grid: {
            color: 'rgba(0,0,0,0.06)',
            drawBorder: false
          },
          title: {
            display: true,
            text: 'Gold Price (ln $/oz)',
            color: '#0d2137',
            font: { family: 'Inter', size: 11, weight: '600' }
          }
        },
        yRight: {
          type: 'linear',
          position: 'right',
          min: -3,
          max: 4,
          reverse: true,
          ticks: {
            stepSize: 1,
            callback: function(value) { return value.toFixed(0) + '%'; },
            font: { family: 'Inter', size: 10 },
            color: '#2a7a8c'
          },
          grid: { display: false },
          title: {
            display: true,
            text: 'Real 10Y Yield (%, inverted)',
            color: '#2a7a8c',
            font: { family: 'Inter', size: 11, weight: '600' }
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'end',
          labels: {
            usePointStyle: true,
            pointStyle: 'line',
            padding: 16,
            font: { family: 'Inter', size: 11 },
            color: '#5a6a78'
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          callbacks: {
            label: function(item) {
              if (item.datasetIndex === 0) {
                return 'Gold (ln): ' + item.parsed.y.toFixed(2);
              } else {
                return 'Real Yield: ' + item.parsed.y.toFixed(2) + '%';
              }
            }
          }
        },
        annotation: {
          annotations: {
            breakLine: {
              type: 'line',
              xMin: breakIdx,
              xMax: breakIdx,
              borderColor: 'rgba(13, 33, 55, 0.4)',
              borderWidth: 2,
              borderDash: [8, 5],
              drawTime: 'afterDatasetsDraw',
              label: {
                display: true,
                content: "Mar '22",
                position: 'start',
                backgroundColor: 'rgba(13, 33, 55, 0.08)',
                color: '#0d2137',
                font: { family: 'Inter', size: 10, weight: '600' },
                padding: { top: 4, bottom: 4, left: 8, right: 8 },
                yAdjust: -4
              }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 1: FRONTIER DATACENTER POWER (SLIDE 26)
// ==========================
(function() {
  var years = ['2020','2021','2022','2023','2024','2025','2026','2027','2028','2029'];
  var actualValues = [0.4, 0.8, 1.8, 4.3, 11, 21, null, null, null, null];
  var projectedValues = [null, null, null, null, null, 21, 40, 68, 90, 120];

  new Chart(document.getElementById('frontierPowerChart').getContext('2d'), {
    type: 'line',
    data: {
      labels: years,
      datasets: [
        {
          label: 'Actual',
          data: actualValues,
          borderColor: '#2a7a8c',
          backgroundColor: 'rgba(42,122,140,0.25)',
          pointRadius: 5,
          pointHoverRadius: 7,
          pointBackgroundColor: '#2a7a8c',
          borderWidth: 2.5,
          tension: 0.3,
          fill: true,
          spanGaps: false
        },
        {
          label: 'Projected',
          data: projectedValues,
          borderColor: '#0d2137',
          backgroundColor: 'rgba(13,33,55,0.12)',
          pointRadius: 5,
          pointHoverRadius: 7,
          pointBackgroundColor: '#0d2137',
          pointStyle: 'triangle',
          borderWidth: 2.5,
          borderDash: [6, 4],
          tension: 0.3,
          fill: true,
          spanGaps: false
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: { font: { family: 'Inter', size: 11 }, color: '#5a6a78', maxRotation: 0 }
        },
        y: {
          beginAtZero: true,
          max: 140,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 11 },
            color: '#5a6a78',
            stepSize: 20,
            callback: function(value) { return value + ' GW'; }
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'end',
          labels: { font: { family: 'Inter', size: 10 }, color: '#5a6a78', usePointStyle: true, pointStyle: 'line', padding: 12, boxWidth: 24 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) { return ctx.dataset.label + ': ' + ctx.parsed.y + ' GW'; }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 2: DATACENTER CAPACITY ESTIMATES (SLIDE 27)
// ==========================
(function() {
  var analysts = ['IEA','Goldman Sachs','McKinsey','Morgan Stanley','Bain','BCG','BloombergNEF','JLL','Macquarie','S&P Global'];
  var currentGW = [100,59,80,80,82,80,50,103,81,62];
  var projectedGW = [200,122,220,230,163,170,106,200,222,134];

  new Chart(document.getElementById('datacenterCapacityChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: analysts,
      datasets: [
        {
          label: 'Current (2024-25)',
          data: currentGW,
          backgroundColor: '#8a96a0',
          borderRadius: 2,
          barPercentage: 0.7,
          categoryPercentage: 0.8
        },
        {
          label: 'Projected (2030-35)',
          data: projectedGW,
          backgroundColor: '#2a7a8c',
          borderRadius: 2,
          barPercentage: 0.7,
          categoryPercentage: 0.8
        }
      ]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          min: 0,
          max: 250,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value + ' GW'; }
          }
        },
        y: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 9 }, color: '#5a6a78' }
        }
      },
      plugins: {
        legend: {
          display: true,
          labels: { font: { family: 'Inter', size: 10 }, color: '#5a6a78', usePointStyle: true, pointStyle: 'rect' }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) { return ctx.dataset.label + ': ' + ctx.parsed.x + ' GW'; }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 3: INTERCONNECTION QUEUE (SLIDE 28)
// ==========================
(function() {
  var years = [2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024];
  var totalGW = [350,380,420,480,570,700,950,1400,2000,2600,2300];
  var barColors = years.map(function(y) { return y === 2024 ? '#c05040' : '#2a7a8c'; });

  new Chart(document.getElementById('interconnectionChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: years,
      datasets: [{
        label: 'Active Queue Capacity (GW)',
        data: totalGW,
        backgroundColor: barColors,
        borderRadius: 3,
        barPercentage: 0.75
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      scales: {
        x: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#5a6a78' }
        },
        y: {
          min: 0,
          max: 3000,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value.toLocaleString() + ' GW'; }
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) { return ctx.parsed.y.toLocaleString() + ' GW'; }
          }
        },
        annotation: {
          annotations: {
            declineLabel: {
              type: 'label',
              xValue: 10,
              yValue: 2750,
              content: ['First decline','gas projects +72%'],
              color: '#c05040',
              font: { family: 'Inter', size: 9, weight: '600' },
              textAlign: 'center'
            },
            declineArrow: {
              type: 'line',
              xMin: 10,
              xMax: 10,
              yMin: 2600,
              yMax: 2350,
              borderColor: '#c05040',
              borderWidth: 1.5,
              borderDash: [4, 3]
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 4: TRAINING VS INFERENCE (SLIDE 30)
// ==========================
(function() {
  var years = [2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030];
  var training = [90,85,80,75,67,67,55,50,33,30,28,25,30];
  var inference = [10,15,20,25,33,33,45,50,67,70,72,75,70];

  new Chart(document.getElementById('trainingInferenceChart').getContext('2d'), {
    type: 'line',
    data: {
      labels: years,
      datasets: [
        {
          label: 'Training',
          data: training,
          backgroundColor: 'rgba(13, 33, 55, 0.7)',
          borderColor: '#0d2137',
          borderWidth: 2,
          fill: 'origin',
          tension: 0.25,
          pointRadius: 0,
          pointHoverRadius: 3,
          order: 2
        },
        {
          label: 'Inference',
          data: inference,
          backgroundColor: 'rgba(42, 122, 140, 0.5)',
          borderColor: '#2a7a8c',
          borderWidth: 2,
          fill: { target: '-1', above: 'rgba(42, 122, 140, 0.5)' },
          tension: 0.25,
          pointRadius: 0,
          pointHoverRadius: 3,
          order: 1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 16, bottom: 4, left: 8 } },
      interaction: { mode: 'index', intersect: false },
      scales: {
        x: {
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#5a6a78' }
        },
        y: {
          min: 0,
          max: 100,
          stacked: false,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value + '%'; }
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          labels: { font: { family: 'Inter', size: 10 }, color: '#5a6a78', usePointStyle: true }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) { return ctx.dataset.label + ': ' + ctx.parsed.y + '%'; }
          }
        },
        annotation: {
          annotations: {
            projectedLine: {
              type: 'line',
              xMin: 7,
              xMax: 7,
              borderColor: 'rgba(13, 33, 55, 0.4)',
              borderWidth: 1.5,
              borderDash: [6, 4],
              label: {
                display: true,
                content: 'Projected',
                position: 'start',
                backgroundColor: 'rgba(13, 33, 55, 0.08)',
                color: '#0d2137',
                font: { family: 'Inter', size: 9, weight: '600' },
                padding: { top: 3, bottom: 3, left: 6, right: 6 }
              }
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 5: AI DEMAND PHYSICAL INPUTS (SLIDE 33)
// ==========================
(function() {
  var inputLabels = ['Electricity (TWh)','Copper (kt)','Natural Gas (Bcf/d)','Aluminum (kt)','Rare Earths (kt)','Gallium (kt)'];
  var growthPct = [128,129,167,175,76,133];
  var val2024 = [415,250,3,400,8.5,0.3];
  var val2030 = [945,572,8,1100,15,0.7];

  new Chart(document.getElementById('aiDemandChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: inputLabels,
      datasets: [{
        label: 'Growth 2024-2030 (%)',
        data: growthPct,
        backgroundColor: '#2a7a8c',
        borderRadius: 3,
        barPercentage: 0.7
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 80, bottom: 4, left: 8 } },
      scales: {
        x: {
          min: 0,
          max: 200,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value + '%'; }
          }
        },
        y: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#5a6a78' }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) {
              var i = ctx.dataIndex;
              return [
                'Growth: ' + growthPct[i] + '%',
                '2024: ' + val2024[i] + ' | 2030: ' + val2030[i]
              ];
            }
          }
        }
      }
    },
    plugins: [{
      id: 'absoluteLabels',
      afterDatasetsDraw: function(chart) {
        var ctx = chart.ctx;
        var meta = chart.getDatasetMeta(0);
        ctx.save();
        ctx.font = '500 9px Inter';
        ctx.fillStyle = '#5a6a78';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'middle';
        var units = ['TWh','kt','Bcf/d','kt','kt','kt'];
        meta.data.forEach(function(bar, i) {
          var text = val2024[i] + ' \u2192 ' + val2030[i];
          ctx.fillText(text, bar.x + 6, bar.y);
        });
        ctx.restore();
      }
    }]
  });
})();

// ==========================
// CHART 6: LABOR EXPOSURE + EMPLOYER RESPONSE (SLIDE 44)
// ==========================
(function() {
  var metrics = [
    'ILO 2025: Global jobs exposed',
    'ILO 2025: High-income jobs exposed',
    'ILO 2025: Low-income jobs exposed',
    'WEF 2030: Employers planning task automation',
    'WEF 2030: Employers expecting workforce reduction'
  ];
  var values = [25,34,11,73,41];
  var colors = ['#2a7a8c','#5ba3b5','#8a96a0','#0d2137','#c05040'];
  var sourceNotes = [
    'ILO-NASK Generative AI and Jobs Index (2025)',
    'ILO-NASK Generative AI and Jobs Index (2025)',
    'ILO-NASK Generative AI and Jobs Index (2025)',
    'WEF Future of Jobs Report 2025 (2030 survey endpoint)',
    'WEF Future of Jobs Report 2025 (2030 survey endpoint)'
  ];

  new Chart(document.getElementById('laborSignalsChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: metrics,
      datasets: [
        {
          label: 'Share',
          data: values,
          backgroundColor: colors,
          borderColor: colors,
          borderWidth: 1,
          borderRadius: 3,
          barPercentage: 0.68,
          categoryPercentage: 0.8
        }
      ]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 10, right: 26, bottom: 4, left: 8 } },
      scales: {
        y: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 9 }, color: '#5a6a78' }
        },
        x: {
          min: 0,
          max: 80,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value + '%'; },
            stepSize: 10
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) { return 'Share: ' + ctx.parsed.x + '%'; },
            afterLabel: function(ctx) { return sourceNotes[ctx.dataIndex]; }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART 7: CAPE BUCKETS VS FORWARD REAL RETURNS (SLIDE 55)
// ==========================
(function() {
  var c = document.getElementById('sp500ValuationBucketsChart');
  if (!c) return;

  var buckets = ['Below 10', '10-15', '15-20', '20-25', '25-30', '30-40', '40+'];
  var medians = [10.99, 7.83, 6.21, 4.71, 5.23, 0.45, -3.45];
  var p25 = [8.54, 3.58, 3.38, -0.07, 4.49, -0.62, -4.41];
  var p75 = [13.67, 11.8, 8.8, 7.85, 5.69, 1.41, -3.03];
  var counts = [229, 461, 514, 249, 83, 36, 21];
  var colors = ['#2f8ba0', '#3f98ab', '#57a8b7', '#7ab9c4', '#9ccbd1', '#c17a70', '#c05040'];
  var currentCAPE = 40.38;

  new Chart(c, {
    type: 'bar',
    data: {
      labels: buckets,
      datasets: [{
        label: 'Median next 10Y annualized real return',
        data: medians,
        backgroundColor: colors,
        borderColor: colors,
        borderWidth: [1, 1, 1, 1, 1, 1, 2],
        borderRadius: 3,
        barPercentage: 0.7,
        categoryPercentage: 0.86
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 6, right: 14, bottom: 2, left: 4 } },
      scales: {
        y: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#5a6a78' }
        },
        x: {
          min: -6,
          max: 12,
          grid: {
            drawBorder: false,
            color: function(ctx) {
              if (ctx.tick && ctx.tick.value === 0) return 'rgba(13,33,55,0.28)';
              return 'rgba(0,0,0,0.045)';
            }
          },
          ticks: {
            stepSize: 2,
            font: { family: 'Inter', size: 10 },
            color: '#5a6a78',
            callback: function(value) { return value + '%'; }
          },
          title: {
            display: true,
            text: 'Next 10-year annualized real total return',
            font: { family: 'Inter', size: 11, weight: 500 },
            color: '#5a6a78'
          }
        }
      },
      plugins: {
        legend: { display: false },
        annotation: {
          annotations: {
            currentBucketLabel: {
              type: 'label',
              xValue: 2.6,
              yValue: '40+',
              content: ['WE ARE HERE', 'Current CAPE: ' + currentCAPE.toFixed(2)],
              font: { family: 'Inter', size: 9, weight: '700' },
              color: '#0d2137',
              backgroundColor: 'rgba(255,255,255,0.85)',
              borderColor: 'rgba(13,33,55,0.25)',
              borderWidth: 1,
              borderRadius: 4,
              padding: { top: 3, right: 6, bottom: 3, left: 6 },
              yAdjust: -16
            },
            currentBucketArrow: {
              type: 'line',
              xMin: 1.3,
              xMax: -2.7,
              yMin: '40+',
              yMax: '40+',
              borderColor: '#0d2137',
              borderWidth: 1.2,
              borderDash: [5, 3]
            }
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) {
              var i = ctx.dataIndex;
              return 'Median: ' + medians[i].toFixed(2) + '%';
            },
            afterLabel: function(ctx) {
              var i = ctx.dataIndex;
              return [
                'IQR: ' + p25[i].toFixed(2) + '% to ' + p75[i].toFixed(2) + '%',
                'Observations: ' + counts[i]
              ];
            }
          }
        }
      }
    },
    plugins: [{
      id: 'bucketMedianLabels',
      afterDatasetsDraw: function(chart) {
        var ctx = chart.ctx;
        var meta = chart.getDatasetMeta(0);
        ctx.save();
        ctx.font = '600 9px Inter';
        ctx.fillStyle = '#0d2137';
        ctx.textBaseline = 'middle';
        meta.data.forEach(function(bar, i) {
          var val = medians[i];
          var text = (val > 0 ? '+' : '') + val.toFixed(1) + '%';
          var x = val >= 0 ? bar.x + 6 : bar.x - 34;
          if (x < chart.chartArea.left + 2) x = chart.chartArea.left + 2;
          ctx.fillText(text, x, bar.y);
        });
        ctx.restore();
      }
    }]
  });
})();

// ==========================
// CHART: AI HARDWARE SHIPMENTS + COST (SLIDE 25)
// ==========================
(function() {
  var years = ['2020','2021','2022','2023','2024','2025','2026','2027','2028'];
  var shipments = [0.05, 0.12, 0.31, 1.4, 5.5, 10, 16, 24, 35];
  var costs = [2, 5, 11, 37, 113, 143, 190, 260, 350];

  new Chart(document.getElementById('hardwareChart').getContext('2d'), {
    type: 'bar',
    data: {
      labels: years,
      datasets: [
        {
          label: 'Shipments (M units, H100-eq)',
          data: shipments,
          backgroundColor: '#2a7a8c',
          borderRadius: 3,
          barPercentage: 0.7,
          categoryPercentage: 0.8,
          yAxisID: 'y'
        },
        {
          label: 'Cost ($B)',
          data: costs,
          type: 'line',
          borderColor: '#0d2137',
          backgroundColor: '#0d2137',
          borderWidth: 2.5,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointBackgroundColor: '#0d2137',
          tension: 0.25,
          fill: false,
          yAxisID: 'y1'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 6, right: 16, bottom: 4, left: 8 } },
      interaction: { mode: 'index', intersect: false },
      scales: {
        x: {
          grid: { display: false, drawBorder: false },
          ticks: { font: { family: 'Inter', size: 10 }, color: '#5a6a78' }
        },
        y: {
          position: 'left',
          min: 0,
          max: 40,
          grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 9 },
            color: '#2a7a8c',
            callback: function(value) { return value + 'M'; }
          }
        },
        y1: {
          position: 'right',
          min: 0,
          max: 400,
          grid: { display: false, drawBorder: false },
          ticks: {
            font: { family: 'Inter', size: 9 },
            color: '#0d2137',
            callback: function(value) { return '$' + value + 'B'; }
          }
        }
      },
      plugins: {
        legend: {
          display: true,
          labels: { font: { family: 'Inter', size: 9 }, color: '#5a6a78', usePointStyle: true, padding: 10 }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 11 },
          bodyFont: { family: 'Inter', size: 11 },
          callbacks: {
            label: function(ctx) {
              if (ctx.datasetIndex === 0) return 'Shipments: ' + ctx.parsed.y + 'M units';
              return 'Cost: $' + ctx.parsed.y + 'B';
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHARTS: JAPAN & UK YIELDS + CURRENCY (SLIDE 13) — SIDE BY SIDE
// ==========================
(function() {
  var labels = ['2012-01','2012-02','2012-03','2012-04','2012-05','2012-06','2012-07','2012-08','2012-09','2012-10','2012-11','2012-12','2013-01','2013-02','2013-03','2013-04','2013-05','2013-06','2013-07','2013-08','2013-09','2013-10','2013-11','2013-12','2014-01','2014-02','2014-03','2014-04','2014-05','2014-06','2014-07','2014-08','2014-09','2014-10','2014-11','2014-12','2015-01','2015-02','2015-03','2015-04','2015-05','2015-06','2015-07','2015-08','2015-09','2015-10','2015-11','2015-12','2016-01','2016-02','2016-03','2016-04','2016-05','2016-06','2016-07','2016-08','2016-09','2016-10','2016-11','2016-12','2017-01','2017-02','2017-03','2017-04','2017-05','2017-06','2017-07','2017-08','2017-09','2017-10','2017-11','2017-12','2018-01','2018-02','2018-03','2018-04','2018-05','2018-06','2018-07','2018-08','2018-09','2018-10','2018-11','2018-12','2019-01','2019-02','2019-03','2019-04','2019-05','2019-06','2019-07','2019-08','2019-09','2019-10','2019-11','2019-12','2020-01','2020-02','2020-03','2020-04','2020-05','2020-06','2020-07','2020-08','2020-09','2020-10','2020-11','2020-12','2021-01','2021-02','2021-03','2021-04','2021-05','2021-06','2021-07','2021-08','2021-09','2021-10','2021-11','2021-12','2022-01','2022-02','2022-03','2022-04','2022-05','2022-06','2022-07','2022-08','2022-09','2022-10','2022-11','2022-12','2023-01','2023-02','2023-03','2023-04','2023-05','2023-06','2023-07','2023-08','2023-09','2023-10','2023-11','2023-12','2024-01','2024-02','2024-03','2024-04','2024-05','2024-06','2024-07','2024-08','2024-09','2024-10','2024-11','2024-12','2025-01','2025-02','2025-03','2025-04','2025-05','2025-06','2025-07','2025-08','2025-09','2025-10','2025-11','2025-12','2026-01'];
  var japan10y = [0.96,0.96,0.97,0.91,0.85,0.79,0.78,0.80,0.76,0.76,0.71,0.78,0.78,0.67,0.49,0.59,0.88,0.82,0.79,0.71,0.67,0.59,0.61,0.69,0.61,0.59,0.61,0.61,0.57,0.54,0.53,0.49,0.50,0.47,0.42,0.33,0.28,0.33,0.40,0.34,0.39,0.46,0.41,0.38,0.35,0.30,0.30,0.27,0.10,-0.07,-0.05,-0.09,-0.12,-0.23,-0.20,-0.07,-0.09,-0.05,0.02,0.04,0.09,0.05,0.07,0.02,0.04,0.08,0.08,0.01,0.06,0.07,0.04,0.05,0.08,0.05,0.05,0.05,0.03,0.03,0.06,0.11,0.13,0.13,0.09,-0.01,0.00,-0.02,-0.10,-0.05,-0.10,-0.17,-0.16,-0.28,-0.22,-0.15,-0.08,-0.03,-0.07,-0.16,0.01,-0.04,0.00,0.03,0.01,0.05,0.02,0.04,0.03,0.02,0.06,0.15,0.12,0.09,0.08,0.05,0.02,0.02,0.07,0.10,0.05,0.07,0.17,0.18,0.21,0.22,0.24,0.23,0.18,0.22,0.24,0.25,0.25,0.41,0.49,0.50,0.32,0.39,0.43,0.40,0.60,0.64,0.77,0.95,0.66,0.62,0.73,0.71,0.73,0.87,1.07,1.05,1.05,0.89,0.86,0.94,1.05,1.09,1.25,1.37,1.49,1.31,1.50,1.42,1.55,1.60,1.65,1.66,1.81,2.06,2.21];
  var uk10y = [2.11,2.22,2.32,2.21,1.94,1.77,1.65,1.67,1.72,1.77,1.77,1.85,2.08,2.18,1.98,1.78,1.95,2.31,2.47,2.71,2.84,2.68,2.76,2.95,2.91,2.81,2.78,2.74,2.70,2.78,2.73,2.53,2.49,2.25,2.16,1.93,1.59,1.74,1.79,1.76,2.02,2.17,2.14,1.98,1.88,1.85,1.98,1.92,1.78,1.50,1.54,1.57,1.54,1.31,0.96,0.74,0.82,1.08,1.38,1.43,1.42,1.31,1.19,1.08,1.12,1.08,1.27,1.12,1.24,1.38,1.33,1.28,1.39,1.60,1.51,1.51,1.50,1.42,1.37,1.40,1.50,1.55,1.45,1.31,1.32,1.24,1.19,1.19,1.13,0.92,0.83,0.58,0.60,0.64,0.77,0.83,0.72,0.63,0.46,0.36,0.27,0.28,0.21,0.27,0.27,0.31,0.38,0.32,0.37,0.62,0.85,0.85,0.91,0.85,0.70,0.64,0.80,1.08,0.94,0.84,1.21,1.49,1.55,1.84,1.91,2.38,2.15,2.33,3.50,4.11,3.42,3.50,3.51,3.56,3.56,3.65,3.96,4.37,4.44,4.53,4.42,4.57,4.27,3.86,3.93,4.12,4.03,4.22,4.22,4.16,4.14,3.94,3.91,4.20,4.42,4.43,4.66,4.51,4.64,4.58,4.60,4.52,4.59,4.64,4.69,4.57,4.50,4.48,4.48];
  var jpyusd = [76.96,78.47,82.47,81.25,79.67,79.32,78.93,78.69,78.14,79.01,81.03,83.79,89.06,93.00,94.77,97.76,100.92,97.24,99.67,97.81,99.21,97.77,100.07,103.46,103.76,102.13,102.34,102.46,101.77,102.06,101.74,102.94,107.43,108.03,116.30,119.32,118.25,118.76,120.39,119.51,120.80,123.72,123.31,123.00,120.15,120.05,122.64,121.64,118.23,114.62,112.93,109.55,108.85,105.35,104.19,101.24,101.78,103.91,108.44,116.00,114.87,112.91,112.92,110.09,112.24,110.91,112.42,109.83,110.78,112.91,112.82,112.94,110.87,107.97,106.05,107.66,109.69,110.06,111.52,111.00,112.10,112.72,113.34,112.20,108.96,110.44,111.14,111.64,109.97,108.07,108.29,106.19,107.54,108.14,108.86,109.10,109.27,110.03,107.67,107.74,107.20,107.58,106.68,106.01,105.59,105.21,104.41,103.80,103.79,105.38,108.70,109.04,109.11,110.11,110.21,109.85,110.16,113.12,113.97,113.83,114.83,115.28,118.58,126.37,128.85,133.96,136.71,135.28,143.28,147.05,142.45,134.91,130.45,133.05,133.66,133.47,137.05,141.36,140.94,144.78,147.85,149.59,149.68,143.98,146.29,149.62,149.82,153.89,155.87,157.86,157.52,146.26,142.95,149.89,153.71,153.81,156.48,151.57,149.06,144.13,144.88,144.48,147.20,147.48,147.86,151.35,155.14,155.92,156.65];
  var gbpusd = [1.55,1.58,1.58,1.60,1.59,1.56,1.56,1.57,1.61,1.61,1.60,1.61,1.60,1.55,1.51,1.53,1.53,1.55,1.52,1.55,1.59,1.61,1.61,1.64,1.65,1.66,1.66,1.67,1.68,1.69,1.71,1.67,1.63,1.61,1.58,1.56,1.51,1.53,1.50,1.50,1.55,1.56,1.56,1.56,1.53,1.53,1.52,1.50,1.44,1.43,1.42,1.43,1.45,1.42,1.31,1.31,1.31,1.23,1.24,1.25,1.24,1.25,1.23,1.26,1.29,1.28,1.30,1.30,1.33,1.32,1.32,1.34,1.38,1.40,1.40,1.41,1.35,1.33,1.32,1.29,1.31,1.30,1.29,1.27,1.29,1.30,1.32,1.30,1.29,1.27,1.25,1.22,1.24,1.27,1.29,1.31,1.31,1.30,1.24,1.24,1.23,1.25,1.27,1.31,1.29,1.30,1.32,1.34,1.36,1.39,1.39,1.38,1.41,1.40,1.38,1.38,1.37,1.37,1.35,1.33,1.36,1.35,1.32,1.29,1.24,1.23,1.20,1.20,1.13,1.13,1.17,1.22,1.22,1.21,1.21,1.24,1.25,1.26,1.29,1.27,1.24,1.22,1.24,1.27,1.27,1.26,1.27,1.25,1.26,1.27,1.29,1.29,1.32,1.30,1.27,1.26,1.24,1.25,1.29,1.31,1.34,1.36,1.35,1.35,1.35,1.34,1.31,1.34,1.35];

  function xTick(value, index) {
    var l = labels[index];
    return l && l.endsWith('-01') && parseInt(l.substring(0,4)) % 2 === 0 ? l.substring(0,4) : null;
  }

  // JAPAN CHART
  var cj = document.getElementById('japanChart');
  if (cj) {
    new Chart(cj, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          { label: '10Y Yield (%)', data: japan10y, borderColor: '#2a7a8c', backgroundColor: 'rgba(42,122,140,0.1)', borderWidth: 2, pointRadius: 0, pointHoverRadius: 3, tension: 0.25, fill: true, yAxisID: 'y' },
          { label: 'JPY/USD', data: jpyusd, borderColor: 'rgba(13,33,55,0.4)', backgroundColor: 'transparent', borderWidth: 1.5, borderDash: [5,3], pointRadius: 0, pointHoverRadius: 3, tension: 0.25, yAxisID: 'y1' }
        ]
      },
      options: {
        responsive: true, maintainAspectRatio: false,
        layout: { padding: { top: 10, right: 8, bottom: 4, left: 8 } },
        interaction: { mode: 'index', intersect: false },
        scales: {
          x: { ticks: { maxRotation: 0, autoSkip: false, callback: xTick, font: { family: 'Inter', size: 9 }, color: '#8a96a0' }, grid: { display: false } },
          y: { position: 'left', min: -0.5, max: 2.5, grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false }, ticks: { stepSize: 0.5, callback: function(v) { return v.toFixed(1) + '%'; }, font: { family: 'Inter', size: 9 }, color: '#5a6a78' }, title: { display: true, text: '10Y Yield', font: { family: 'Inter', size: 9 }, color: '#5a6a78' } },
          y1: { position: 'right', min: 70, max: 165, display: true, grid: { display: false }, ticks: { callback: function(v) { return '\u00a5' + v; }, font: { family: 'Inter', size: 9 }, color: 'rgba(13,33,55,0.5)' }, title: { display: true, text: 'JPY/USD', font: { family: 'Inter', size: 9 }, color: 'rgba(13,33,55,0.5)' } }
        },
        plugins: {
          legend: { display: true, position: 'top', align: 'end', labels: { usePointStyle: true, pointStyle: 'line', font: { family: 'Inter', size: 9 }, color: '#5a6a78', padding: 8, boxWidth: 18 } },
          tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(item) { return item.datasetIndex === 0 ? '10Y: ' + item.raw.toFixed(2) + '%' : 'JPY/USD: \u00a5' + item.raw.toFixed(1); } } },
          annotation: { annotations: { yccEnd: { type: 'line', xMin: 131, xMax: 131, borderColor: 'rgba(0,0,0,0.2)', borderWidth: 1, borderDash: [4,3], label: { display: true, content: 'YCC adj.', position: 'start', backgroundColor: 'rgba(0,0,0,0.05)', color: '#8a96a0', font: { family: 'Inter', size: 8 }, padding: 3 } } } }
        }
      }
    });
  }

  // UK CHART
  var cu = document.getElementById('ukChart');
  if (cu) {
    new Chart(cu, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          { label: '10Y Gilt (%)', data: uk10y, borderColor: '#0d2137', backgroundColor: 'rgba(13,33,55,0.1)', borderWidth: 2, pointRadius: 0, pointHoverRadius: 3, tension: 0.25, fill: true, yAxisID: 'y' },
          { label: 'GBP/USD', data: gbpusd, borderColor: 'rgba(42,122,140,0.4)', backgroundColor: 'transparent', borderWidth: 1.5, borderDash: [5,3], pointRadius: 0, pointHoverRadius: 3, tension: 0.25, yAxisID: 'y1' }
        ]
      },
      options: {
        responsive: true, maintainAspectRatio: false,
        layout: { padding: { top: 10, right: 8, bottom: 4, left: 8 } },
        interaction: { mode: 'index', intersect: false },
        scales: {
          x: { ticks: { maxRotation: 0, autoSkip: false, callback: xTick, font: { family: 'Inter', size: 9 }, color: '#8a96a0' }, grid: { display: false } },
          y: { position: 'left', min: 0, max: 5.0, grid: { color: 'rgba(0,0,0,0.045)', drawBorder: false }, ticks: { stepSize: 1, callback: function(v) { return v.toFixed(1) + '%'; }, font: { family: 'Inter', size: 9 }, color: '#5a6a78' }, title: { display: true, text: '10Y Gilt', font: { family: 'Inter', size: 9 }, color: '#5a6a78' } },
          y1: { position: 'right', min: 1.0, max: 1.8, display: true, grid: { display: false }, ticks: { callback: function(v) { return '$' + v.toFixed(2); }, font: { family: 'Inter', size: 9 }, color: 'rgba(42,122,140,0.5)' }, title: { display: true, text: 'GBP/USD', font: { family: 'Inter', size: 9 }, color: 'rgba(42,122,140,0.5)' } }
        },
        plugins: {
          legend: { display: true, position: 'top', align: 'end', labels: { usePointStyle: true, pointStyle: 'line', font: { family: 'Inter', size: 9 }, color: '#5a6a78', padding: 8, boxWidth: 18 } },
          tooltip: { backgroundColor: '#0d2137', titleFont: { family: 'Inter', size: 11 }, bodyFont: { family: 'Inter', size: 11 }, callbacks: { label: function(item) { return item.datasetIndex === 0 ? 'Gilt: ' + item.raw.toFixed(2) + '%' : 'GBP/USD: $' + item.raw.toFixed(2); } } },
          annotation: { annotations: {
            brexit: { type: 'line', xMin: 54, xMax: 54, borderColor: 'rgba(0,0,0,0.2)', borderWidth: 1, borderDash: [4,3], label: { display: true, content: 'Brexit', position: 'start', backgroundColor: 'rgba(0,0,0,0.05)', color: '#8a96a0', font: { family: 'Inter', size: 8 }, padding: 3 } },
            truss: { type: 'line', xMin: 128, xMax: 128, borderColor: 'rgba(0,0,0,0.2)', borderWidth: 1, borderDash: [4,3], label: { display: true, content: 'Truss', position: 'start', backgroundColor: 'rgba(0,0,0,0.05)', color: '#8a96a0', font: { family: 'Inter', size: 8 }, padding: 3 } }
          } }
        }
      }
    });
  }
})();

// ==========================
// CHART: METR TASK HORIZON (SLIDE 22) — v3 LINEAR hockey-stick
// ==========================
(function() {
  var c = document.getElementById('chart-metr');
  if (!c) return;

  var TEAL = '#2a7a8c';
  var TEAL_LINE = 'rgba(42,122,140,0.18)';
  var GRAY = 'rgba(170,180,190,0.4)';
  var C_OAI = '#0d2137';
  var C_ANT = '#e67e22';
  var C_GOO = '#c05040';

  // Custom plugin: CI error bars (capped at chart area)
  var errorBarPlugin = {
    id: 'errorBars',
    afterDatasetsDraw: function(chart) {
      var ctx = chart.ctx;
      var area = chart.chartArea;
      chart.data.datasets.forEach(function(ds, dsIdx) {
        if (!ds.ciRanges) return;
        var meta = chart.getDatasetMeta(dsIdx);
        var yScale = chart.scales.y;
        ds.ciRanges.forEach(function(ci, i) {
          if (!ci) return;
          var pt = meta.data[i];
          if (!pt) return;
          var yLo = Math.min(yScale.getPixelForValue(ci[0]), area.bottom);
          var yHi = Math.max(yScale.getPixelForValue(ci[1]), area.top);
          ctx.save();
          ctx.strokeStyle = TEAL;
          ctx.globalAlpha = 0.08;
          ctx.lineWidth = 2;
          ctx.beginPath(); ctx.moveTo(pt.x, yLo); ctx.lineTo(pt.x, yHi); ctx.stroke();
          ctx.beginPath();
          ctx.moveTo(pt.x - 3, yLo); ctx.lineTo(pt.x + 3, yLo);
          ctx.moveTo(pt.x - 3, yHi); ctx.lineTo(pt.x + 3, yHi);
          ctx.stroke();
          ctx.restore();
        });
      });
    }
  };

  // Custom plugin: model-name labels with per-label color + font
  var labelPlugin = {
    id: 'modelLabels',
    afterDatasetsDraw: function(chart) {
      var ctx = chart.ctx;
      chart.data.datasets.forEach(function(ds, dsIdx) {
        if (!ds.modelLabels) return;
        var meta = chart.getDatasetMeta(dsIdx);
        ds.modelLabels.forEach(function(lbl, i) {
          if (!lbl) return;
          var pt = meta.data[i];
          if (!pt) return;
          var a = (ds.labelAligns && ds.labelAligns[i]) || 'right';
          ctx.save();
          ctx.font = (ds.labelFonts && ds.labelFonts[i]) || '500 9px Inter';
          ctx.fillStyle = (ds.labelColors && ds.labelColors[i]) || TEAL;
          ctx.globalAlpha = 0.9;
          ctx.textBaseline = 'middle';
          var dx = 8, dy = 0;
          if (a === 'left')        { ctx.textAlign = 'right';  dx = -8; }
          else if (a === 'top')    { ctx.textAlign = 'center'; dx = 0; dy = -13; }
          else if (a === 'bottom') { ctx.textAlign = 'center'; dx = 0; dy = 13; }
          else if (a === 'tr')     { ctx.textAlign = 'left';   dx = 7;  dy = -10; }
          else if (a === 'tl')     { ctx.textAlign = 'right';  dx = -7; dy = -10; }
          else if (a === 'br')     { ctx.textAlign = 'left';   dx = 7;  dy = 10; }
          else if (a === 'bl')     { ctx.textAlign = 'right';  dx = -7; dy = 10; }
          else                     { ctx.textAlign = 'left'; }
          ctx.fillText(lbl, pt.x + dx, pt.y + dy);
          ctx.restore();
        });
      });
    }
  };

  var fs = '500 7.5px Inter', fm = '500 9px Inter', fl = '600 10.5px Inter';

  // ── SOTA frontier (16 models by release date) — values in HOURS (YAML is in minutes) ──
  var sotaData = [
    {x:1,y:0.001},{x:16,y:0.003},{x:38,y:0.010},
    {x:50,y:0.059},{x:56,y:0.060},{x:64,y:0.107},
    {x:65,y:0.180},{x:68,y:0.323},{x:69,y:0.330},
    {x:71,y:0.632},{x:73,y:0.996},{x:75,y:2.012},
    {x:79,y:3.566},{x:82,y:3.944},{x:82,y:5.340},{x:83,y:6.573}
  ];
  var sotaLabels = [
    'GPT-2',null,'GPT-3.5',
    'GPT-4',null,'GPT-4o',
    'Sonnet 3.5','o1-preview',null,
    'o1','Sonnet 3.7','o3',
    'GPT-5','Gemini 3 Pro','Opus 4.5','GPT-5.2'
  ];
  var sotaTooltips = [
    'GPT-2','davinci-002','GPT-3.5 Turbo',
    'GPT-4','GPT-4 (Nov 2023)','GPT-4o',
    'Claude 3.5 Sonnet','o1-preview','Claude 3.5 Sonnet (Oct)',
    'o1','Claude 3.7 Sonnet','o3',
    'GPT-5','Gemini 3 Pro','Claude Opus 4.5','GPT-5.2'
  ];
  var sotaAligns = [
    'top',null,'top',
    'top',null,'top',
    'left','right',null,
    'right','right','right',
    'right','left','left','right'
  ];
  var sotaLabelColors = [
    C_OAI,null,C_OAI,
    C_OAI,null,C_OAI,
    C_ANT,C_OAI,null,
    C_OAI,C_ANT,C_OAI,
    C_OAI,C_GOO,C_ANT,C_OAI
  ];
  var sotaLabelFonts = [
    fs,null,fs,
    fs,null,fs,
    fm,fm,null,
    fm,fm,fm,
    fl,fl,fl,fl
  ];
  var sotaCI = [
    [0.00003,0.002],[0.001,0.004],[0.004,0.017],
    [0.026,0.113],[0.027,0.120],[0.059,0.200],
    [0.079,0.348],[0.186,0.546],[0.161,0.670],
    [0.346,1.096],[0.542,1.719],[1.219,3.356],
    [1.959,7.998],[2.313,7.377],[2.883,12.235],[3.300,17.376]
  ];

  // ── Non-SOTA models (gray, no labels) — values in hours ──
  var nonSotaData = [
    {x:62,y:0.060},{x:63,y:0.054},
    {x:76,y:1.687},{x:79,y:1.681},{x:82,y:3.943}
  ];
  var nonSotaNames = ['Claude 3 Opus','GPT-4 Turbo','Claude 4 Opus','Claude 4.1 Opus','GPT-5.1 Codex'];

  new Chart(c, {
    type: 'scatter',
    plugins: [errorBarPlugin, labelPlugin],
    data: {
      datasets: [
        {
          label: 'SOTA frontier',
          data: sotaData,
          backgroundColor: TEAL,
          pointBorderColor: TEAL,
          borderColor: TEAL_LINE,
          showLine: true,
          borderDash: [6, 4],
          borderWidth: 1.5,
          fill: false,
          pointRadius: [3.5,3.5,3.5, 4,3.5,4, 5,5,4.5, 5.5,5.5,6, 7,7,7,8],
          pointHoverRadius: 9,
          modelLabels: sotaLabels,
          labelAligns: sotaAligns,
          labelColors: sotaLabelColors,
          labelFonts: sotaLabelFonts,
          ciRanges: sotaCI
        },
        {
          label: 'Non-SOTA',
          data: nonSotaData,
          backgroundColor: GRAY,
          borderColor: 'rgba(170,180,190,0.3)',
          pointRadius: 3.5,
          pointHoverRadius: 6
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 25, right: 90, bottom: 8, left: 8}},
      scales: {
        x: {
          type: 'linear', min: -2, max: 88,
          ticks: {
            callback: function(v) { return {0:'2019',12:'2020',24:'2021',36:'2022',48:'2023',60:'2024',72:'2025',84:'2026'}[v] || ''; },
            stepSize: 12, font: {family:'Inter',size:11,weight:500}, color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.04)', drawBorder: false}
        },
        y: {
          type: 'linear', min: 0, max: 7,
          ticks: {
            stepSize: 1,
            callback: function(v) { if (v === 0) return '0'; return v + 'h'; },
            font: {family:'Inter',size:11}, color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.04)', drawBorder: false},
          title: {display:true, text:'Median task horizon (p50), hours', font:{family:'Inter',size:12,weight:600}, color:'#0d2137', padding:{bottom:4}}
        }
      },
      plugins: {
        legend: {display: false},
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: {family:'Inter',size:12,weight:600},
          bodyFont: {family:'Inter',size:11},
          padding: 10, cornerRadius: 6,
          callbacks: {
            title: function(items) {
              var d = items[0].datasetIndex, i = items[0].dataIndex;
              if (d === 0) return sotaTooltips[i] || '';
              if (d === 1) return nonSotaNames[i] || '';
              return '';
            },
            afterTitle: function(items) {
              var d = items[0].datasetIndex, i = items[0].dataIndex;
              if (d === 0 && sotaCI[i]) return '95% CI: ' + sotaCI[i][0].toFixed(1) + 'h \u2013 ' + sotaCI[i][1].toFixed(1) + 'h';
              return '';
            },
            label: function(item) {
              var y = item.parsed.y;
              if (y >= 1) return y.toFixed(1) + ' hours (' + (y*60).toFixed(0) + ' min)';
              if (y >= 0.0167) return (y*60).toFixed(1) + ' minutes';
              return (y*3600).toFixed(0) + ' seconds';
            }
          }
        },
        annotation: {
          annotations: {
            h1: {type:'line', yMin:1, yMax:1, borderColor:'rgba(0,0,0,0.07)', borderWidth:1, borderDash:[4,4],
              label:{display:true, content:'1 HOUR', position:'start', backgroundColor:'transparent', color:'#a0a8b0', font:{family:'Inter',size:7.5,weight:700}, padding:2}},
            callout: {type:'label', xValue:25, yValue:5.5,
              content:['Task horizon doubled','every ~4.3 months','since GPT-4 (Mar 2023)'], color:'rgba(26,122,109,0.5)',
              font:{family:'Inter',size:9,weight:600,style:'italic'},
              backgroundColor:'transparent', padding:0}
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: AI REVENUE TRAJECTORIES (SLIDE 41)
// ==========================
(function() {
  var c = document.getElementById('chart-ai-revenue');
  if (!c) return;
  // x = months since Jan 2022, y = annualized revenue in $B
  var oai = [{x:11,y:0.028},{x:14,y:0.2},{x:19,y:1.0},{x:21,y:1.3},{x:23,y:2.0},{x:29,y:3.4},{x:32,y:4.0},{x:35,y:5.5},{x:41,y:10.0},{x:42,y:12.0},{x:47,y:20.0}];
  var ant = [{x:21,y:0.1},{x:24,y:0.087},{x:35,y:1.0},{x:38,y:2.0},{x:40,y:3.0},{x:42,y:5.0},{x:45,y:7.0},{x:47,y:9.0}];
  var xai = [{x:34,y:0.1},{x:37,y:0.172},{x:40,y:0.236},{x:43,y:0.428}];
  new Chart(c, {
    type: 'scatter',
    data: {
      datasets: [
        {label: 'OpenAI', data: oai, borderColor: '#0d2137', backgroundColor: 'rgba(13,33,55,0.08)', pointRadius: 4, pointHoverRadius: 6, showLine: true, tension: 0.3, fill: false, borderWidth: 2.5},
        {label: 'Anthropic', data: ant, borderColor: '#2a7a8c', backgroundColor: 'rgba(42,122,140,0.08)', pointRadius: 4, pointHoverRadius: 6, showLine: true, tension: 0.3, fill: false, borderWidth: 2.5},
        {label: 'xAI', data: xai, borderColor: '#c05040', backgroundColor: 'rgba(192,80,64,0.08)', pointRadius: 4, pointHoverRadius: 6, showLine: true, tension: 0.3, fill: false, borderWidth: 2.5}
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 10, right: 16, bottom: 4, left: 8}},
      scales: {
        x: {
          type: 'linear', min: 10, max: 48,
          ticks: {
            callback: function(v) { return {12:'Jan 2023',24:'Jan 2024',36:'Jan 2025',48:'Jan 2026'}[v] || ''; },
            stepSize: 12, font: {family: 'Inter', size: 11}, color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false}
        },
        y: {
          type: 'logarithmic', min: 0.01, max: 30,
          ticks: {
            callback: function(v) {
              if (v === 0.01) return '$10M';
              if (v === 0.1) return '$100M';
              if (v === 1) return '$1B';
              if (v === 10) return '$10B';
              return '';
            },
            font: {family: 'Inter', size: 11}, color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Annualized Revenue (USD)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      },
      plugins: {
        legend: {display: true, position: 'top', align: 'end', labels: {font: {family: 'Inter', size: 10}, boxWidth: 8, padding: 12, usePointStyle: true}},
        tooltip: {
          backgroundColor: '#0d2137', titleFont: {family: 'Inter', size: 11}, bodyFont: {family: 'Inter', size: 11},
          callbacks: {
            label: function(item) {
              var v = item.parsed.y;
              return item.dataset.label + ': ' + (v >= 1 ? '$' + v.toFixed(1) + 'B' : '$' + (v * 1000).toFixed(0) + 'M') + ' ARR';
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: AI COMPUTE SPEND (SLIDE 26)
// ==========================
(function() {
  var c = document.getElementById('chart-ai-compute-spend');
  if (!c) return;

  // Data from Epoch AI / The Information
  // OpenAI: 2022=$0.4B, 2023~$1B est, 2024=$5.8B (R&D $4B + Inf $1.8B), 2025=$16B (R&D $9B + Inf $7B)
  // Anthropic: 2023=$0.285B, 2024=$2.5B, 2025=$6.8B (R&D $4.1B + Inf $2.7B)
  // Google (DeepMind+Cloud): 2023~$3B est, 2024~$6B est, 2025~$12B est
  // Meta: 2023~$4B est, 2024~$8B est, 2025~$14B est

  new Chart(c, {
    type: 'bar',
    data: {
      labels: ['2022', '2023', '2024', '2025E'],
      datasets: [
        {
          label: 'OpenAI',
          data: [0.4, 1.0, 5.8, 16.0],
          backgroundColor: '#0d2137',
          borderColor: '#0d2137',
          borderWidth: 0, borderRadius: 3,
          barPercentage: 0.8, categoryPercentage: 0.7
        },
        {
          label: 'Anthropic',
          data: [null, 0.3, 2.5, 6.8],
          backgroundColor: '#2a7a8c',
          borderColor: '#2a7a8c',
          borderWidth: 0, borderRadius: 3,
          barPercentage: 0.8, categoryPercentage: 0.7
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 10, right: 16, bottom: 4, left: 8}},
      scales: {
        x: {
          ticks: {font: {family: 'Inter', size: 12, weight: 500}, color: '#5a6a78'},
          grid: {display: false}
        },
        y: {
          beginAtZero: true, max: 20,
          ticks: {callback: function(v) { return '$' + v + 'B'; }, stepSize: 4, font: {family: 'Inter', size: 11}, color: '#5a6a78'},
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Total Cloud Compute Spend ($B)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      },
      plugins: {
        legend: {position: 'top', align: 'end', labels: {usePointStyle: true, pointStyle: 'rectRounded', font: {family: 'Inter', size: 11}, padding: 16, color: '#0d2137'}},
        tooltip: {
          backgroundColor: '#0d2137', titleFont: {family: 'Inter', size: 11}, bodyFont: {family: 'Inter', size: 11},
          callbacks: {
            label: function(item) {
              if (item.parsed.y === null) return null;
              return item.dataset.label + ': $' + item.parsed.y.toFixed(1) + 'B';
            }
          }
        }
      }
    },
    plugins: [{
      id: 'barValueLabels',
      afterDatasetsDraw: function(chart) {
        var ctx2 = chart.ctx;
        ctx2.save();
        ctx2.font = 'bold 10px Inter';
        ctx2.textAlign = 'center';
        ctx2.textBaseline = 'bottom';
        chart.data.datasets.forEach(function(ds, di) {
          var meta = chart.getDatasetMeta(di);
          meta.data.forEach(function(bar, i) {
            var val = ds.data[i];
            if (val === null || val === 0) return;
            ctx2.fillStyle = ds.backgroundColor;
            ctx2.fillText('$' + val + 'B', bar.x, bar.y - 4);
          });
        });
        ctx2.restore();
      }
    }]
  });
})();

// ==========================
// CHART: CHATGPT USAGE GROWTH (SLIDE 43)
// ==========================
(function() {
  var c = document.getElementById('chart-ai-usage');
  if (!c) return;
  new Chart(c, {
    type: 'line',
    data: {
      labels: ['Mar 23','Sep 23','Mar 24','Sep 24','Dec 24','Mar 25','Aug 25','Oct 25','Dec 25'],
      datasets: [{
        label: 'ChatGPT Weekly Active Users',
        data: [50, 80, 125, 240, 300, 430, 700, 800, 900],
        borderColor: '#0d2137',
        backgroundColor: 'rgba(13,33,55,0.06)',
        fill: true, tension: 0.3, borderWidth: 2.5,
        pointRadius: 4, pointHoverRadius: 6, pointBackgroundColor: '#0d2137'
      }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 10, right: 16, bottom: 4, left: 8}},
      scales: {
        x: {
          ticks: {font: {family: 'Inter', size: 11}, color: '#5a6a78'},
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false}
        },
        y: {
          beginAtZero: true, max: 1000,
          ticks: {callback: function(v) { return v + 'M'; }, stepSize: 200, font: {family: 'Inter', size: 11}, color: '#5a6a78'},
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Weekly Active Users (millions)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      },
      plugins: {
        legend: {display: false},
        tooltip: {
          backgroundColor: '#0d2137', titleFont: {family: 'Inter', size: 11}, bodyFont: {family: 'Inter', size: 11},
          callbacks: {label: function(item) { return item.parsed.y + 'M weekly active users'; }}
        }
      }
    }
  });
})();

// ==========================
// CHART: ECI BENCHMARK FRONTIER (SLIDE 23)
// ==========================
(function() {
  var ctx = document.getElementById('chart-eci');
  if (!ctx) return;
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ["Jun 23","Jul 23","Aug 23","Sep 23","Oct 23","Nov 23","Dec 23","Jan 24","Feb 24","Mar 24","Apr 24","May 24","Jun 24","Jul 24","Aug 24","Sep 24","Oct 24","Nov 24","Dec 24","Jan 25","Feb 25","Mar 25","Apr 25","May 25","Jun 25","Jul 25","Aug 25","Sep 25","Oct 25","Nov 25","Dec 25","Jan 26","Feb 26"],
      datasets: [
        {
          label: 'WeirdML',
          data: [0.1244,0.1244,0.1244,0.1244,0.1244,0.1244,0.1244,0.1244,0.2318,0.2318,0.2318,0.2318,0.3097,0.3097,0.3097,0.4756,0.4756,0.4756,0.4756,0.4756,0.4756,0.4756,0.5256,0.5256,0.5821,0.5821,0.6070,0.6070,0.6070,0.6993,0.7220,0.7220,0.7220],
          borderColor: '#0d2137',
          backgroundColor: '#0d213720',
          tension: 0.3, borderWidth: 2.5, pointRadius: 3,
          pointBackgroundColor: '#0d2137', spanGaps: true, fill: false
        },
        {
          label: 'SimpleBench',
          data: [null,null,null,null,null,null,null,null,0.0820,0.0820,0.1012,0.1012,0.1300,0.1300,0.1300,0.3004,0.3004,0.3004,0.3004,0.3004,0.3568,0.4192,0.4372,0.5056,0.5488,0.5488,0.5488,0.5488,0.5488,0.7168,0.7168,0.7168,0.7168],
          borderColor: '#2a7a8c',
          backgroundColor: '#2a7a8c20',
          tension: 0.3, borderWidth: 2.5, pointRadius: 3,
          pointBackgroundColor: '#2a7a8c', spanGaps: true, fill: false
        },
        {
          label: 'FrontierMath',
          data: [null,null,null,null,null,null,null,null,null,null,null,null,0.0103,0.0103,0.0103,0.0172,0.0207,0.0207,0.0931,0.1241,0.1241,0.1241,0.2483,0.2483,0.2483,0.2483,0.3241,0.3241,0.3241,0.3760,0.4070,0.4070,0.4070],
          borderColor: '#e67e22',
          backgroundColor: '#e67e2220',
          tension: 0.3, borderWidth: 2.5, pointRadius: 3,
          pointBackgroundColor: '#e67e22', spanGaps: true, fill: false
        },
        {
          label: 'SWE-Bench Verified',
          data: [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.2162,0.2162,0.2162,0.5280,0.5280,0.6910,0.7250,0.7250,0.7250,0.7490,0.7720,0.7720,0.8090,0.8090,0.8090,0.8090],
          borderColor: '#c05040',
          backgroundColor: '#c0504020',
          tension: 0.3, borderWidth: 2.5, pointRadius: 3,
          pointBackgroundColor: '#c05040', spanGaps: true, fill: false
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      interaction: {mode: 'index', intersect: false},
      layout: {padding: {top: 10, right: 16, bottom: 4, left: 8}},
      plugins: {
        legend: {
          position: 'top', align: 'end',
          labels: {font: {family: 'Inter', size: 11}, usePointStyle: true, pointStyle: 'circle', padding: 16, color: '#0d2137'}
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: {family: 'Inter', size: 11}, bodyFont: {family: 'Inter', size: 11},
          callbacks: {
            label: function(ctx) {
              var val = ctx.parsed.y;
              if (val === null) return null;
              return ctx.dataset.label + ': ' + (val * 100).toFixed(1) + '%';
            }
          }
        }
      },
      scales: {
        x: {
          ticks: {font: {family: 'Inter', size: 10}, maxRotation: 45, autoSkip: true, maxTicksLimit: 12, color: '#5a6a78'},
          grid: {display: false}
        },
        y: {
          min: 0, max: 0.90,
          ticks: {
            callback: function(v) { return (v * 100).toFixed(0) + '%'; },
            stepSize: 0.1,
            font: {family: 'Inter', size: 11}, color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Frontier Performance (Running Max)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      }
    }
  });
})();

// ==========================
// CHART: TRAINING COMPUTE (SLIDE 24)
// ==========================
(function() {
  var ctx = document.getElementById('chart-training-compute');
  if (!ctx) return;

  var frontierData = [
    {x:2019.42,y:6.19e+21,label:'XLNet'},{x:2019.50,y:8.51e+21,label:'RoBERTa'},
    {x:2019.71,y:2.20e+22,label:'Megatron-BERT'},{x:2019.81,y:3.30e+22,label:'T5-11B'},
    {x:2020.07,y:1.12e+23,label:'Meena'},{x:2020.41,y:3.14e+23,label:'GPT-3'},
    {x:2021.03,y:8.22e+22,label:'Switch'},{x:2021.61,y:3.70e+23,label:'Jurassic-1'},
    {x:2021.78,y:8.59e+23,label:'MT-NLG 530B'},{x:2021.94,y:6.31e+23,label:'Gopher'},
    {x:2021.98,y:1.04e+24,label:'ERNIE 3.0 Titan'},{x:2022.26,y:2.53e+24,label:'PaLM'},
    {x:2022.49,y:2.74e+24,label:'Minerva'},{x:2022.91,y:2.58e+24,label:'GPT-3.5'},
    {x:2023.21,y:2.10e+25,label:'GPT-4'},{x:2023.36,y:7.34e+24,label:'PaLM 2'},
    {x:2023.53,y:3.87e+24,label:'Claude 2'},{x:2023.68,y:3.76e+24,label:'Falcon-180B'},
    {x:2023.89,y:1.00e+25,label:'Inflection-2'},{x:2023.93,y:5.00e+25,label:'Gemini Ultra'},
    {x:2024.45,y:1.80e+25,label:'Nemotron-4 340B'},{x:2024.47,y:2.70e+25,label:'Claude 3.5 Sonnet'},
    {x:2024.56,y:3.80e+25,label:'Llama 3.1-405B'},{x:2024.62,y:2.96e+25,label:'Grok-2'},
    {x:2025.13,y:3.50e+26,label:'Grok 3'},{x:2025.16,y:3.80e+26,label:'GPT-4.5'},
    {x:2025.26,y:5.18e+25,label:'Llama 4 Behemoth'},{x:2025.52,y:5.00e+26,label:'Grok 4'}
  ];

  var otherData = [
    {x:2024.15,y:1.12e+25,label:'Mistral Large'},{x:2024.18,y:8.00e+24,label:'Inflection-2.5'},
    {x:2024.30,y:7.86e+24,label:'Llama 3-70B'},{x:2024.56,y:2.13e+25,label:'Mistral Large 2'},
    {x:2024.72,y:7.85e+24,label:'Qwen2.5-72B'},{x:2024.82,y:2.50e+25,label:'Doubao-pro'},
    {x:2024.98,y:3.41e+24,label:'DeepSeek-V3'},{x:2025.05,y:3.50e+24,label:'DeepSeek-R1'},
    {x:2025.15,y:3.35e+25,label:'Claude 3.7 Sonnet'},{x:2025.33,y:4.75e+24,label:'Qwen3-235B'},
    {x:2025.60,y:6.60e+25,label:'GPT-5'},{x:2025.68,y:1.51e+25,label:'Qwen3-Max'}
  ];

  var labelsToShow = ['GPT-3','GPT-3.5','GPT-4','GPT-4.5','GPT-5','Grok 3','Grok 4','Grok-2',
    'Gemini Ultra','PaLM','PaLM 2','Llama 3.1-405B','Llama 4 Behemoth',
    'Claude 2','Claude 3.5 Sonnet','Claude 3.7 Sonnet','DeepSeek-V3','DeepSeek-R1','Gopher'];

  new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [
        {label:'Frontier models',data:frontierData,backgroundColor:'#2a7a8c',borderColor:'#2a7a8c',pointRadius:5,pointHoverRadius:7,order:1},
        {label:'Other notable',data:otherData,backgroundColor:'#8a96a0',borderColor:'#8a96a0',pointRadius:3,pointHoverRadius:5,order:2}
      ]
    },
    options: {
      responsive:true, maintainAspectRatio:false,
      layout:{padding:{top:10,right:16,bottom:4,left:8}},
      scales: {
        x: {type:'linear',min:2019,max:2026,
          title:{display:true,text:'Publication Year',font:{family:'Inter',size:11,weight:500},color:'#5a6a78'},
          ticks:{stepSize:1,callback:function(v){return String(Math.round(v));},font:{family:'Inter',size:11},color:'#5a6a78'},
          grid:{color:'rgba(0,0,0,0.045)',drawBorder:false}},
        y: {type:'logarithmic',
          title:{display:true,text:'Training Compute (FLOP)',font:{family:'Inter',size:11,weight:500},color:'#5a6a78'},
          ticks:{callback:function(v){var e=Math.log10(v);if(Number.isInteger(e))return '10^'+e;return '';},font:{family:'Inter',size:10},color:'#5a6a78'},
          grid:{color:'rgba(0,0,0,0.045)',drawBorder:false}}
      },
      plugins: {
        legend:{position:'top',align:'end',labels:{usePointStyle:true,pointStyle:'circle',font:{family:'Inter',size:11},padding:16,color:'#0d2137'}},
        tooltip:{backgroundColor:'#0d2137',titleFont:{family:'Inter',size:11},bodyFont:{family:'Inter',size:11},
          callbacks:{
            title:function(items){return items[0].raw.label||'';},
            label:function(item){var f=item.raw.y;var e=Math.floor(Math.log10(f));var m=(f/Math.pow(10,e)).toFixed(1);return m+' \u00d7 10^'+e+' FLOP';}
          }}
      }
    },
    plugins: [{
      id:'computeLabels',
      afterDatasetsDraw:function(chart){
        var ctx2=chart.ctx;ctx2.save();ctx2.font='9px Inter';ctx2.textBaseline='bottom';
        var drawn=[];
        function overlaps(x,y,w,h){for(var r of drawn){if(x<r.x+r.w&&x+w>r.x&&y<r.y+r.h&&y+h>r.y)return true;}return false;}
        chart.data.datasets.forEach(function(ds,di){
          var meta=chart.getDatasetMeta(di);
          meta.data.forEach(function(pt,i){
            var item=ds.data[i];if(!item.label||labelsToShow.indexOf(item.label)===-1)return;
            var tw=ctx2.measureText(item.label).width,th=11;
            var lx=pt.x+5,ly=pt.y-5;
            if(overlaps(lx,ly-th,tw,th)){ly=pt.y+14;}
            if(overlaps(lx,ly-th,tw,th)){lx=pt.x-tw-5;ly=pt.y-5;}
            drawn.push({x:lx,y:ly-th,w:tw,h:th});
            ctx2.fillStyle=di===0?'#2a7a8c':'#8a96a0';
            ctx2.fillText(item.label,lx,ly);
          });
        });
        ctx2.restore();
      }
    }]
  });
})();

// ==========================
// CHART: TRAINING COST (SLIDE 46)
// ==========================
(function() {
  var ctx = document.getElementById('chart-training-cost');
  if (!ctx) return;

  var costData = [
    {x:2016.07,y:22207,label:'AlphaGo Lee'},{x:2016.74,y:201332,label:'GNMT'},
    {x:2017.80,y:471445,label:'AlphaGo Master'},{x:2017.93,y:229919,label:'AlphaZero'},
    {x:2018.34,y:134077,label:'ResNeXt-101'},{x:2018.78,y:1751,label:'BERT-Large'},
    {x:2019.12,y:4348,label:'GPT-2'},{x:2019.50,y:85350,label:'RoBERTa'},
    {x:2019.71,y:171819,label:'Megatron-BERT'},{x:2019.81,y:78465,label:'T5-11B'},
    {x:2019.83,y:130654,label:'AlphaStar'},{x:2019.95,y:4328311,label:'OpenAI Five'},
    {x:2020.07,y:214810,label:'Meena'},{x:2020.41,y:2116866,label:'GPT-3'},
    {x:2020.50,y:266200,label:'GShard'},{x:2020.81,y:6724,label:'ViT-Huge'},
    {x:2020.91,y:3842,label:'AlphaFold 2'},
    {x:2021.01,y:125819,label:'DALL-E'},{x:2021.03,y:145101,label:'Switch'},
    {x:2021.61,y:836700,label:'Jurassic-1'},{x:2021.69,y:441770,label:'HyperCLOVA'},
    {x:2021.78,y:3848506,label:'MT-NLG 530B'},{x:2021.94,y:640617,label:'Gopher'},
    {x:2021.95,y:541437,label:'GLaM'},
    {x:2022.11,y:229950,label:'LaMDA'},{x:2022.26,y:3060365,label:'PaLM'},
    {x:2022.34,y:733635,label:'OPT-175B'},{x:2022.53,y:995819,label:'BLOOM-176B'},
    {x:2022.91,y:7466801,label:'GPT-3.5'},
    {x:2023.15,y:578026,label:'LLaMA-65B'},{x:2023.21,y:68783538,label:'GPT-4'},
    {x:2023.36,y:5014267,label:'PaLM 2'},{x:2023.53,y:4902644,label:'Claude 2'},
    {x:2023.55,y:1102561,label:'Llama 2-70B'},{x:2023.68,y:10743501,label:'Falcon-180B'},
    {x:2023.89,y:13461144,label:'Inflection-2'},{x:2023.93,y:30719420,label:'Gemini Ultra'},
    {x:2024.12,y:16760813,label:'Gemini 1.5 Pro'},{x:2024.15,y:14110112,label:'Mistral Large'},
    {x:2024.47,y:25870993,label:'Claude 3.5 Sonnet'},{x:2024.56,y:52885434,label:'Llama 3.1-405B'},
    {x:2024.62,y:31602311,label:'Grok-2'},{x:2024.98,y:5390000,label:'DeepSeek-V3'},
    {x:2025.05,y:6770000,label:'DeepSeek-R1'},{x:2025.13,y:507476933,label:'Grok 3'},
    {x:2025.16,y:339957480,label:'GPT-4.5'},{x:2025.26,y:44588964,label:'Llama 4 Behemoth'},
    {x:2025.52,y:387842678,label:'Grok 4'}
  ];

  var labelsToShow = ['GPT-2','GPT-3','GPT-3.5','GPT-4','GPT-4.5','Grok 3','Grok 4','Grok-2',
    'Gemini Ultra','PaLM','Llama 3.1-405B','Claude 2','Claude 3.5 Sonnet',
    'DeepSeek-V3','DeepSeek-R1','BERT-Large','OpenAI Five','BLOOM-176B','Gopher','LLaMA-65B','Llama 4 Behemoth'];

  var notableSet = new Set(labelsToShow);
  var pointRadii = costData.map(function(d){return notableSet.has(d.label)?5:3;});

  function formatCost(v){
    if(v>=1e8)return '$'+Math.round(v/1e6)+'M';
    if(v>=1e6)return '$'+Math.round(v/1e6)+'M';
    if(v>=1e3)return '$'+Math.round(v/1e3)+'K';
    return '$'+v;
  }

  new Chart(ctx, {
    type:'scatter',
    data:{datasets:[{
      label:'Training Cost (2023 USD)',data:costData,
      backgroundColor:'#0d2137',borderColor:'#0d2137',
      pointRadius:pointRadii,pointHoverRadius:8
    }]},
    options:{
      responsive:true,maintainAspectRatio:false,
      layout:{padding:{top:10,right:16,bottom:4,left:8}},
      scales:{
        x:{type:'linear',min:2016,max:2026,
          title:{display:true,text:'Publication Year',font:{family:'Inter',size:11,weight:500},color:'#5a6a78'},
          ticks:{stepSize:1,callback:function(v){return String(Math.round(v));},font:{family:'Inter',size:11},color:'#5a6a78'},
          grid:{color:'rgba(0,0,0,0.045)',drawBorder:false}},
        y:{type:'logarithmic',min:1000,max:1e9,
          title:{display:true,text:'Training Cost (2023 USD)',font:{family:'Inter',size:11,weight:500},color:'#5a6a78'},
          ticks:{callback:function(v){var ok=[1000,10000,100000,1000000,10000000,100000000,500000000];if(ok.indexOf(v)!==-1)return formatCost(v);return '';},font:{family:'Inter',size:10},color:'#5a6a78'},
          grid:{color:'rgba(0,0,0,0.045)',drawBorder:false}}
      },
      plugins:{
        legend:{display:false},
        tooltip:{backgroundColor:'#0d2137',titleFont:{family:'Inter',size:11},bodyFont:{family:'Inter',size:11},
          callbacks:{
            title:function(items){return items[0].raw.label||'';},
            label:function(item){var c=item.raw.y;return (c>=1e6?'$'+(c/1e6).toFixed(1)+'M':c>=1e3?'$'+(c/1e3).toFixed(0)+'K':'$'+c);}
          }}
      }
    },
    plugins:[{
      id:'costLabels',
      afterDatasetsDraw:function(chart){
        var ctx2=chart.ctx;ctx2.save();ctx2.font='9px Inter';ctx2.fillStyle='#0d2137';ctx2.textBaseline='bottom';
        var drawn=[];
        function overlaps(x,y,w,h){for(var r of drawn){if(x<r.x+r.w&&x+w>r.x&&y<r.y+r.h&&y+h>r.y)return true;}return false;}
        var meta=chart.getDatasetMeta(0);
        meta.data.forEach(function(pt,i){
          var item=costData[i];if(labelsToShow.indexOf(item.label)===-1)return;
          var tw=ctx2.measureText(item.label).width,th=11;
          var lx=pt.x+6,ly=pt.y-5;
          if(overlaps(lx,ly-th,tw,th)){ly=pt.y+14;}
          if(overlaps(lx,ly-th,tw,th)){lx=pt.x-tw-6;ly=pt.y-5;}
          drawn.push({x:lx,y:ly-th,w:tw,h:th});
          ctx2.fillText(item.label,lx,ly);
        });
        ctx2.restore();
      }
    }]
  });
})();

// ==========================
// CHART: HYPERSCALER CAPEX (SLIDE 44)
// ==========================
(function() {
  var c = document.getElementById('chart-hyperscaler-capex');
  if (!c) return;

  var years = ['2016','2017','2018','2019','2020','2021','2022','2023','2024','2025','2026E'];

  new Chart(c, {
    type: 'bar',
    data: {
      labels: years,
      datasets: [
        {
          label: 'Amazon',
          data: [12.4, 19.7, 27.8, 32.0, 54.0, 68.1, 63.6, 52.7, 83.9, 131.8, 200],
          backgroundColor: '#2a7a8c',
          borderColor: '#2a7a8c',
          borderWidth: 0
        },
        {
          label: 'Alphabet',
          data: [10.9, 13.2, 25.1, 23.5, 22.3, 24.6, 31.5, 32.3, 52.5, 91.4, 180],
          backgroundColor: '#8a96a0',
          borderColor: '#8a96a0',
          borderWidth: 0
        },
        {
          label: 'Meta',
          data: [4.5, 6.7, 13.9, 15.1, 15.7, 19.2, 31.4, 27.3, 37.3, 72.2, 125],
          backgroundColor: '#0d2137',
          borderColor: '#0d2137',
          borderWidth: 0
        },
        {
          label: 'Microsoft',
          data: [8.3, 8.7, 11.6, 13.9, 15.4, 20.6, 23.9, 28.1, 44.5, 64.6, 100],
          backgroundColor: '#5ba3b5',
          borderColor: '#5ba3b5',
          borderWidth: 0
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 10, right: 16, bottom: 4, left: 8}},
      scales: {
        x: {
          stacked: true,
          ticks: {font: {family: 'Inter', size: 11}, color: '#5a6a78'},
          grid: {display: false}
        },
        y: {
          stacked: true,
          beginAtZero: true,
          max: 700,
          ticks: {
            callback: function(v) { return '$' + v + 'B'; },
            stepSize: 100,
            font: {family: 'Inter', size: 11},
            color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Capital Expenditure ($B)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        }
      },
      plugins: {
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            usePointStyle: true,
            pointStyle: 'rectRounded',
            padding: 16,
            font: {family: 'Inter', size: 11},
            color: '#0d2137'
          }
        },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: {family: 'Inter', size: 11},
          bodyFont: {family: 'Inter', size: 11},
          callbacks: {
            label: function(item) {
              return item.dataset.label + ': $' + item.parsed.y + 'B';
            },
            footer: function(items) {
              var total = 0;
              items.forEach(function(item) { total += item.parsed.y; });
              return 'Total: $' + Math.round(total) + 'B';
            }
          }
        },
        annotation: {
          annotations: {
            label2026: {
              type: 'label',
              xValue: '2026E',
              yValue: 640,
              content: ['~$600B'],
              font: {family: 'Inter', size: 13, weight: 'bold'},
              color: '#0d2137',
              backgroundColor: 'rgba(255,255,255,0)',
              padding: 0
            }
          }
        }
      }
    }
  });
})();

// ==========================
// CHART: GPU GENERATION TRAINING LADDER (SLIDE 45)
// ==========================
(function() {
  var c = document.getElementById('chart-gpu-generations');
  if (!c) return;

  // Horizontal bar: each bar is a frontier model, x = estimated cluster size (GPUs)
  // Color coded by GPU generation
  var COL_A100 = '#8a96a0';   // gray
  var COL_H100 = '#2a7a8c';   // teal
  var COL_GB200 = '#76b900';  // NVIDIA green
  var COL_RUBIN = '#e67e22';  // orange (future)

  var models = [
    'GPT-4 (Mar 2023)',
    'Claude 3 Opus (Mar 2024)',
    'Gemini Ultra (Dec 2023)',
    'Llama 3.1-405B (Jul 2024)',
    'Grok-3 (Feb 2025)',
    'GPT-5 (Jun 2025)',
    'Claude Opus 4 (Jun 2025)',
    'GPT-5.2 (Sep 2025)',
    'Gemini 2.5 Pro (Mar 2025)',
    'Claude Opus 4.5 (Dec 2025)',
    'GPT-5.3-Codex (Feb 2026)'
  ];

  var clusterSizes = [
    25000,   // GPT-4: ~25k A100s
    20000,   // Claude 3 Opus: estimated ~20k A100/H100
    26000,   // Gemini Ultra: ~26k TPUv4 (GPU-equiv)
    30000,   // Llama 3.1-405B: 30k H100s (Meta)
    200000,  // Grok-3: xAI Colossus ~200k H100s
    80000,   // GPT-5: estimated 60-80k H100s
    50000,   // Claude Opus 4: estimated ~50k H100s
    100000,  // GPT-5.2: ~100k H100 + early GB200
    50000,   // Gemini 2.5 Pro: ~50k TPUv5 (equiv)
    60000,   // Claude Opus 4.5: estimated
    300000   // GPT-5.3-Codex: ~300k GB200 from Microsoft
  ];

  var colors = [
    COL_A100,   // GPT-4
    COL_A100,   // Claude 3 Opus
    COL_A100,   // Gemini Ultra
    COL_H100,   // Llama 3.1-405B
    COL_H100,   // Grok-3
    COL_H100,   // GPT-5
    COL_H100,   // Claude Opus 4
    COL_H100,   // GPT-5.2 (mixed)
    COL_H100,   // Gemini 2.5 Pro
    COL_H100,   // Claude Opus 4.5
    COL_GB200   // GPT-5.3-Codex
  ];

  var gpuGen = [
    'A100', 'A100', 'TPUv4',
    'H100', 'H100', 'H100', 'H100', 'H100/GB200', 'TPUv5',
    'H100', 'GB200'
  ];

  new Chart(c, {
    type: 'bar',
    data: {
      labels: models,
      datasets: [{
        label: 'Estimated GPU cluster size',
        data: clusterSizes,
        backgroundColor: colors,
        borderColor: colors,
        borderWidth: 0,
        borderRadius: 3,
        barPercentage: 0.75
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true, maintainAspectRatio: false,
      layout: {padding: {top: 6, right: 60, bottom: 4, left: 8}},
      scales: {
        x: {
          beginAtZero: true,
          max: 350000,
          ticks: {
            callback: function(v) { return (v/1000) + 'k'; },
            stepSize: 50000,
            font: {family: 'Inter', size: 10},
            color: '#5a6a78'
          },
          grid: {color: 'rgba(0,0,0,0.045)', drawBorder: false},
          title: {display: true, text: 'Estimated Training Cluster Size (GPUs / GPU-equivalents)', font: {family: 'Inter', size: 11, weight: 500}, color: '#5a6a78'}
        },
        y: {
          ticks: {font: {family: 'Inter', size: 10, weight: 500}, color: '#0d2137'},
          grid: {display: false}
        }
      },
      plugins: {
        legend: {display: false},
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: {family: 'Inter', size: 11},
          bodyFont: {family: 'Inter', size: 11},
          callbacks: {
            label: function(item) {
              var idx = item.dataIndex;
              var size = item.parsed.x;
              return gpuGen[idx] + ' \u00d7 ' + (size >= 1000 ? (size/1000).toFixed(0) + 'k' : size);
            }
          }
        }
      }
    },
    plugins: [{
      id: 'gpuLabels',
      afterDatasetsDraw: function(chart) {
        var ctx = chart.ctx;
        var meta = chart.getDatasetMeta(0);
        ctx.font = 'bold 9px Inter';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'middle';
        meta.data.forEach(function(bar, i) {
          var x = bar.x + 6;
          var y = bar.y;
          ctx.fillStyle = colors[i];
          ctx.fillText(gpuGen[i], x, y);
        });
      }
    }]
  });
})();

// ==========================
// CHART: FINANCIAL REPRESSION REAL RETURNS (SLIDE 46)
// ==========================
(function() {
  var ctx = document.getElementById('repressionChart');
  if (!ctx) return;

  var labels = ['Long-Term\nTreasuries', 'Cash\n(T-Bills)', 'US Equities\n(S\u0026P 500)', 'Real Estate', 'Commodities'];
  var values = [-2.0, -0.8, 6.8, 3.5, 2.8];

  var bgColors = values.map(function(v) {
    return v < 0 ? 'rgba(192, 57, 43, 0.82)' : 'rgba(42, 122, 140, 0.82)';
  });
  var borderColors = values.map(function(v) {
    return v < 0 ? '#c0392b' : '#2a7a8c';
  });

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        data: values,
        backgroundColor: bgColors,
        borderColor: borderColors,
        borderWidth: 1.5,
        borderRadius: 6,
        barPercentage: 0.62,
        categoryPercentage: 0.82
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      layout: { padding: { top: 6, right: 32, bottom: 4, left: 4 } },
      scales: {
        x: {
          min: -4,
          max: 9,
          ticks: {
            stepSize: 2,
            callback: function(v) { return (v > 0 ? '+' : '') + v + '%'; },
            font: { family: 'Inter', size: 11 },
            color: '#8a96a0'
          },
          grid: { color: 'rgba(0,0,0,0.05)', drawBorder: false }
        },
        y: {
          ticks: {
            font: { family: 'Inter', size: 13, weight: '600' },
            color: '#0d2137'
          },
          grid: { display: false }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#0d2137',
          titleFont: { family: 'Inter', size: 12 },
          bodyFont: { family: 'Inter', size: 12 },
          cornerRadius: 6,
          padding: 10,
          callbacks: {
            label: function(item) {
              return 'Real return: ' + (item.raw > 0 ? '+' : '') + item.raw.toFixed(1) + '% per year';
            }
          }
        },
        annotation: {
          annotations: {
            zeroLine: {
              type: 'line',
              xMin: 0, xMax: 0,
              borderColor: 'rgba(13,33,55,0.35)',
              borderWidth: 2,
              borderDash: [6, 4]
            },
            lossLabel: {
              type: 'label',
              xValue: -2.8,
              yValue: 4.4,
              content: ['PURCHASING', 'POWER LOSS'],
              font: { family: 'Inter', size: 9, weight: '700' },
              color: 'rgba(192, 57, 43, 0.35)',
              textAlign: 'center'
            },
            gainLabel: {
              type: 'label',
              xValue: 7,
              yValue: 4.4,
              content: ['REAL WEALTH', 'PRESERVED'],
              font: { family: 'Inter', size: 9, weight: '700' },
              color: 'rgba(42, 122, 140, 0.35)',
              textAlign: 'center'
            }
          }
        }
      }
    },
    plugins: [{
      id: 'barValueLabels',
      afterDatasetsDraw: function(chart) {
        var ctx2 = chart.ctx;
        var meta = chart.getDatasetMeta(0);
        ctx2.textBaseline = 'middle';
        meta.data.forEach(function(bar, i) {
          var val = values[i];
          var x, textAlign;
          if (val >= 0) {
            x = bar.x + 8;
            textAlign = 'left';
          } else {
            x = bar.x - 8;
            textAlign = 'right';
          }
          ctx2.font = 'bold 14px Inter';
          ctx2.textAlign = textAlign;
          ctx2.fillStyle = val < 0 ? '#c0392b' : '#1e6b7a';
          ctx2.fillText((val > 0 ? '+' : '') + val.toFixed(1) + '%', x, bar.y);
        });
      }
    }]
  });
})();
</script>

</body>
</html>
